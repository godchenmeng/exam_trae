2025-10-29 15:19:20.429 +08:00 [DBG] Hosting starting
2025-10-29 15:19:20.473 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 15:19:20.475 +08:00 [INF] Hosting environment: Production
2025-10-29 15:19:20.476 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 15:19:20.476 +08:00 [DBG] Hosting started
2025-10-29 15:19:20.526 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 15:19:20.542 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 15:19:20.728 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 15:19:20.758 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 15:19:20.845 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 15:19:20.846 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 15:19:20.871 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 15:19:21.056 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 15:19:21.061 +08:00 [DBG] Creating DbConnection.
2025-10-29 15:19:21.067 +08:00 [DBG] Created DbConnection. (4ms).
2025-10-29 15:19:21.070 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.072 +08:00 [DBG] Creating DbConnection.
2025-10-29 15:19:21.074 +08:00 [DBG] Created DbConnection. (1ms).
2025-10-29 15:19:21.075 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.079 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.082 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.084 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.090 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 15:19:21.093 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 15:19:21.094 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-10-29 15:19:21.095 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.099 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.102 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.114 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.116 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.117 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (1ms).
2025-10-29 15:19:21.118 +08:00 [DBG] Creating DbConnection.
2025-10-29 15:19:21.118 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 15:19:21.118 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.119 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.119 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.119 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.119 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 15:19:21.119 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 15:19:21.119 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 15:19:21.119 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.119 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.119 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.120 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.120 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.120 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.128 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.128 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.128 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 15:19:21.128 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.128 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.129 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 15:19:21.130 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 15:19:21.133 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.133 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 2ms reading results.
2025-10-29 15:19:21.133 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.134 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.142 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 15:19:21.144 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.144 +08:00 [DBG] Creating DbConnection.
2025-10-29 15:19:21.145 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 15:19:21.145 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.145 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.145 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.145 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.145 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 15:19:21.145 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 15:19:21.145 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 15:19:21.145 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.145 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.145 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.146 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.146 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.146 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.146 +08:00 [DBG] Creating DbConnection.
2025-10-29 15:19:21.146 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 15:19:21.146 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.146 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.146 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.146 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.146 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 15:19:21.146 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 15:19:21.146 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 15:19:21.146 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.146 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.146 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.147 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 15:19:21.147 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.147 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.147 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.147 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.147 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 15:19:21.147 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.147 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.147 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 15:19:21.147 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 15:19:21.147 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.147 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 15:19:21.147 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.147 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.147 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 15:19:21.173 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 15:19:21.258 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 15:19:21.271 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.271 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.271 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 15:19:21.271 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.271 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.271 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 15:19:21.271 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 15:19:21.272 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.272 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 15:19:21.272 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.272 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.273 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 15:19:21.275 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 15:19:21.275 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.275 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.275 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 15:19:21.275 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.275 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.275 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 15:19:21.275 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 15:19:21.275 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.275 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 15:19:21.275 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.275 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.275 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 15:19:21.277 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 15:19:21.277 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.277 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.277 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 15:19:21.277 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.277 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 15:19:21.277 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 15:19:21.277 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 15:19:21.277 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.277 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 15:19:21.277 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.277 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.278 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 15:19:21.279 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 15:19:21.279 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 15:19:21.286 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 18:37:50.369 +08:00 [INF] === 开始登录流程 ===
2025-10-29 18:37:50.370 +08:00 [INF] 用户名: admin
2025-10-29 18:37:50.370 +08:00 [INF] 密码长度: 8
2025-10-29 18:37:50.370 +08:00 [INF] AuthService是否为null: False
2025-10-29 18:37:50.370 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 18:37:50.372 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 18:37:50.372 +08:00 [INF] 接收到的用户名: admin
2025-10-29 18:37:50.372 +08:00 [INF] 接收到的密码长度: 8
2025-10-29 18:37:50.372 +08:00 [INF] 开始查询用户
2025-10-29 18:37:50.372 +08:00 [INF] UserRepository是否为null: False
2025-10-29 18:37:50.372 +08:00 [INF] Context是否为null: False
2025-10-29 18:37:50.372 +08:00 [INF] 测试数据库连接...
2025-10-29 18:37:50.373 +08:00 [DBG] Creating DbConnection.
2025-10-29 18:37:50.373 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 18:37:50.373 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.374 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.374 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.374 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.374 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 18:37:50.375 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 18:37:50.383 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 18:37:50.385 +08:00 [DBG] Creating DbConnection.
2025-10-29 18:37:50.385 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 18:37:50.385 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.386 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.386 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.386 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.386 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.386 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 18:37:50.387 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 18:37:50.387 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.387 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.387 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.387 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.387 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 18:37:50.388 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 18:37:50.401 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 18:37:50.403 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.403 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.403 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.403 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.404 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.404 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 18:37:50.406 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 18:37:50.416 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:37:50.428 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.428 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 22ms reading results.
2025-10-29 18:37:50.428 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.428 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.428 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 18:37:50.429 +08:00 [INF] 用户ID: 1, 用户名: admin, 角色: Admin
2025-10-29 18:37:50.429 +08:00 [INF] 用户是否激活: True
2025-10-29 18:37:50.429 +08:00 [INF] 登录失败次数: 0
2025-10-29 18:37:50.429 +08:00 [INF] 检查账户锁定状态
2025-10-29 18:37:50.431 +08:00 [INF] 开始验证密码
2025-10-29 18:37:50.431 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 18:37:50.431 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 18:37:50.431 +08:00 [INF] 密码哈希前20字符: $2a$12$3HBZtD4B3T4c4...
2025-10-29 18:37:50.431 +08:00 [INF] 开始验证密码 - 用户: admin
2025-10-29 18:37:50.431 +08:00 [INF] 密码哈希长度: 60
2025-10-29 18:37:50.431 +08:00 [INF] 密码哈希前缀: $2a$12$3HB
2025-10-29 18:37:50.656 +08:00 [INF] 密码验证结果: True
2025-10-29 18:37:50.656 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 18:37:50.658 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:37:50.660 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:37:50.667 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:37:50.669 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:37:50.672 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:37:50.689 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.689 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.690 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.690 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.690 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.690 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 18:37:50.690 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 18:37:50.694 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.694 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 18:37:50.694 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.694 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.696 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:37:50.696 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:37:50.696 +08:00 [INF] 用户信息更新完成
2025-10-29 18:37:50.696 +08:00 [INF] 用户登录成功 - admin
2025-10-29 18:37:50.696 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 18:37:50.697 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 18:37:50.697 +08:00 [INF] 成功: True
2025-10-29 18:37:50.697 +08:00 [INF] 消息: 登录成功
2025-10-29 18:37:50.697 +08:00 [INF] 用户对象是否为null: False
2025-10-29 18:37:50.697 +08:00 [INF] 用户 admin 登录成功
2025-10-29 18:37:50.698 +08:00 [INF] 上次登录时间: 2025-10-29 02:06:43
2025-10-29 18:37:50.698 +08:00 [INF] 触发登录成功事件
2025-10-29 18:37:50.699 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 18:37:50.699 +08:00 [INF] 登录成功的用户: admin (Admin)
2025-10-29 18:37:50.699 +08:00 [INF] 用户ID: 1
2025-10-29 18:37:50.699 +08:00 [INF] 用户对象是否为null: False
2025-10-29 18:37:50.727 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 18:37:50.727 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 18:37:50.737 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 18:37:50.743 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 18:37:50.745 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:50.745 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.745 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.745 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.745 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.745 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.745 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 18:37:50.745 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 18:37:50.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:37:50.754 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.754 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 8ms reading results.
2025-10-29 18:37:50.754 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.754 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.755 +08:00 [DBG] Compiling query expression: 
'DbSet<Question>()'
2025-10-29 18:37:50.756 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Question>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Question.Analysis (string), 1], [Property: Question.Answer (string) Required, 2], [Property: Question.BankId (int) Required FK Index, 3], [Property: Question.Content (string) Required, 4], [Property: Question.CreatedAt (DateTime) Required, 5], [Property: Question.Difficulty (Difficulty) Required, 6], [Property: Question.GuidanceOverlaysJson (string), 7], [Property: Question.IsActive (bool) Required, 8], [Property: Question.MapDrawingConfigJson (string), 9], [Property: Question.QuestionType (QuestionType) Required, 10], [Property: Question.ReferenceOverlaysJson (string), 11], [Property: Question.ReviewRubricJson (string), 12], [Property: Question.Score (decimal) Required, 13], [Property: Question.ShowBuildingLayersJson (string), 14], [Property: Question.Tags (string) MaxLength(200), 15], [Property: Question.TimeLimitSeconds (int) Required, 16], [Property: Question.Title (string) Required MaxLength(200), 17], [Property: Question.UpdatedAt (DateTime) Required, 18] }
        SELECT q.QuestionId, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
        FROM Questions AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Question>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:50.757 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.757 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.757 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.757 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.757 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.757 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
FROM "Questions" AS "q"
2025-10-29 18:37:50.757 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
FROM "Questions" AS "q"
2025-10-29 18:37:50.757 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.757 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.757 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.757 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.757 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 18:37:50.759 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:50.759 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.759 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.759 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.759 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.759 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.759 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.759 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.759 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.759 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.759 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.759 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.760 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 18:37:50.761 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:50.761 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.761 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.761 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.761 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.761 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.761 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 18:37:50.761 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 18:37:50.762 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.762 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.762 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.762 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.762 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2025-10-29 18:37:50.763 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
        SELECT u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:50.763 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.763 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.763 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.763 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.763 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.763 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
2025-10-29 18:37:50.764 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
2025-10-29 18:37:50.764 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:37:50.765 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:37:50.765 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.765 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:37:50.765 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.765 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.765 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.765 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.765 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.765 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.765 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.765 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.765 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.765 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.765 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.765 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.765 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.765 +08:00 [DBG] Compiling query expression: 
'DbSet<Notification>()'
2025-10-29 18:37:50.767 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Notification>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Notification.Content (string) Required, 1], [Property: Notification.CreatedAt (DateTime) Required, 2], [Property: Notification.Priority (NotificationPriority) Required, 3], [Property: Notification.Scope (NotificationScope) Required, 4], [Property: Notification.SenderId (int) Required FK Index, 5], [Property: Notification.Status (NotificationStatus) Required, 6], [Property: Notification.Title (string) Required MaxLength(200), 7] }
        SELECT n.NotificationId, n.Content, n.CreatedAt, n.Priority, n.Scope, n.SenderId, n.Status, n.Title
        FROM Notifications AS n), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Notification>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:50.767 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.767 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.767 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.767 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.767 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."NotificationId", "n"."Content", "n"."CreatedAt", "n"."Priority", "n"."Scope", "n"."SenderId", "n"."Status", "n"."Title"
FROM "Notifications" AS "n"
2025-10-29 18:37:50.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."NotificationId", "n"."Content", "n"."CreatedAt", "n"."Priority", "n"."Scope", "n"."SenderId", "n"."Status", "n"."Title"
FROM "Notifications" AS "n"
2025-10-29 18:37:50.767 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.767 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.767 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.767 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.774 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.774 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.774 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.774 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.774 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.774 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 18:37:50.774 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 18:37:50.774 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.774 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.774 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.774 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.784 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 18:37:50.785 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 18:37:50.785 +08:00 [INF] 接收到的用户: admin (Admin)
2025-10-29 18:37:50.785 +08:00 [INF] 用户ID: 1
2025-10-29 18:37:50.785 +08:00 [INF] 用户对象是否为null: False
2025-10-29 18:37:50.785 +08:00 [INF] 设置后的CurrentUser: admin (Admin)
2025-10-29 18:37:50.785 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 18:37:50.785 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 18:37:50.787 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.787 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.788 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.788 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.788 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.788 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.788 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.788 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.788 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.788 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.788 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.789 +08:00 [INF] 加载试卷列表成功，共 0 个试卷
2025-10-29 18:37:50.847 +08:00 [INF] 所有页面加载完成
2025-10-29 18:37:50.848 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 18:37:50.848 +08:00 [INF] 当前用户: admin (Admin)
2025-10-29 18:37:50.848 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 18:37:50.848 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 18:37:50.848 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 18:37:50.848 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 18:37:50.848 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 18:37:50.848 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 18:37:50.848 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 18:37:50.848 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 18:37:50.848 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 18:37:50.848 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 18:37:50.848 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 18:37:50.848 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 18:37:50.848 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 18:37:50.848 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 18:37:50.848 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 18:37:50.868 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:50.891 +08:00 [INF] 关闭登录窗口
2025-10-29 18:37:50.897 +08:00 [INF] === 登录流程结束 ===
2025-10-29 18:37:50.926 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.926 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.927 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.927 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.927 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.927 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 18:37:50.927 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 18:37:50.927 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.927 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.928 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.928 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.928 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.928 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.928 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.928 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.928 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.928 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
FROM "Questions" AS "q"
2025-10-29 18:37:50.928 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
FROM "Questions" AS "q"
2025-10-29 18:37:50.928 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.928 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.928 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.928 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.928 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.928 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.929 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.929 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.929 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.929 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.929 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.929 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.929 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.929 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.929 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.929 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.929 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.929 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.929 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.929 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.929 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 18:37:50.929 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 18:37:50.930 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.930 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.930 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.930 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.930 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.930 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.930 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.930 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.930 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.930 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
2025-10-29 18:37:50.931 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
2025-10-29 18:37:50.931 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.931 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.931 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.931 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.931 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.931 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.931 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.931 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.931 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.931 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.932 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 18:37:50.932 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.932 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.932 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.932 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.932 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.932 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.932 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:50.932 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.932 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:50.932 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."NotificationId", "n"."Content", "n"."CreatedAt", "n"."Priority", "n"."Scope", "n"."SenderId", "n"."Status", "n"."Title"
FROM "Notifications" AS "n"
2025-10-29 18:37:50.932 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "n"."NotificationId", "n"."Content", "n"."CreatedAt", "n"."Priority", "n"."Scope", "n"."SenderId", "n"."Status", "n"."Title"
FROM "Notifications" AS "n"
2025-10-29 18:37:50.932 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.932 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:50.933 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:50.933 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:50.996 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:51.106 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:52.186 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:52.255 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:52.941 +08:00 [DBG] Compiling query expression: 
'DbSet<Question>()
    .Include(q => q.Options)
    .Where(q => q.BankId == __bankId_0)
    .OrderBy(q => q.QuestionId)'
2025-10-29 18:37:52.944 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 18:37:52.963 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Question>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Question.Analysis (string), 1], [Property: Question.Answer (string) Required, 2], [Property: Question.BankId (int) Required FK Index, 3], [Property: Question.Content (string) Required, 4], [Property: Question.CreatedAt (DateTime) Required, 5], [Property: Question.Difficulty (Difficulty) Required, 6], [Property: Question.GuidanceOverlaysJson (string), 7], [Property: Question.IsActive (bool) Required, 8], [Property: Question.MapDrawingConfigJson (string), 9], [Property: Question.QuestionType (QuestionType) Required, 10], [Property: Question.ReferenceOverlaysJson (string), 11], [Property: Question.ReviewRubricJson (string), 12], [Property: Question.Score (decimal) Required, 13], [Property: Question.ShowBuildingLayersJson (string), 14], [Property: Question.Tags (string) MaxLength(200), 15], [Property: Question.TimeLimitSeconds (int) Required, 16], [Property: Question.Title (string) Required MaxLength(200), 17], [Property: Question.UpdatedAt (DateTime) Required, 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: QuestionOption.Content (string) Required, 20], [Property: QuestionOption.IsCorrect (bool) Required, 21], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 22], [Property: QuestionOption.OrderIndex (int) Required, 23], [Property: QuestionOption.QuestionId (int) Required FK Index, 24] }
            3 -> 19
        SELECT q.QuestionId, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content, q0.IsCorrect, q0.OptionLabel, q0.OrderIndex, q0.QuestionId
        FROM Questions AS q
        LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
        WHERE q.BankId == @__bankId_0
        ORDER BY q.QuestionId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Question>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 18:37:52.963 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:52.963 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:52.963 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:37:52.963 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:52.963 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:37:52.964 +08:00 [DBG] Executing DbCommand [Parameters=[@__bankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content", "q0"."IsCorrect", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId"
FROM "Questions" AS "q"
LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
WHERE "q"."BankId" = @__bankId_0
ORDER BY "q"."QuestionId"
2025-10-29 18:37:52.964 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content", "q0"."IsCorrect", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId"
FROM "Questions" AS "q"
LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
WHERE "q"."BankId" = @__bankId_0
ORDER BY "q"."QuestionId"
2025-10-29 18:37:52.964 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:52.964 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:37:52.964 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:37:52.964 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:37:52.980 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:53.041 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:53.729 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:54.401 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:54.561 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:57.731 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:58.401 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:37:58.464 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:00.721 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:00.790 +08:00 [INF] 开始导入题目流程，选中题库: 默认题库 (ID: 1)
2025-10-29 18:38:01.423 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:03.873 +08:00 [INF] 用户选择了文件: E:\Project\exam_trae\题目导入模板.xlsx
2025-10-29 18:38:03.873 +08:00 [INF] 开始调用Excel导入服务
2025-10-29 18:38:03.875 +08:00 [INF] 开始导入题目，题库ID: 1
2025-10-29 18:38:04.340 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()
    .Any(qb => qb.BankId == __question_BankId_0 && qb.IsActive)'
2025-10-29 18:38:04.342 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM QuestionBanks AS q
                WHERE (q.BankId == @__question_BankId_0) && q.IsActive)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 18:38:04.343 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.343 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.343 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.343 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.343 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.343 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.343 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.343 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.343 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.343 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.343 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.353 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.386 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.388 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.390 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.394 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.395 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.395 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.402 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.411 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.411 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.412 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.413 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.413 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.413 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.414 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.414 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 43), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 22), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 22), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.415 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 43), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 22), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 22), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.417 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.419 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.419 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.419 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.419 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.420 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.420 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 5ms reading results.
2025-10-29 18:38:04.420 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.420 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.420 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.420 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 6), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.420 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 6), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.420 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.420 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.420 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.421 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.421 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.421 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.421 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.421 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.421 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.421 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.421 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.421 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.421 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.421 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.421 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.421 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.421 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.421 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.421 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.421 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.421 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.421 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.421 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.421 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.421 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.421 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.421 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.422 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.425 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.426 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.426 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.427 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.428 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.428 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.428 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.428 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.429 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.429 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.429 +08:00 [INF] 创建题目成功: 消防车到达火场后，首先应该进行的工作是什么？
2025-10-29 18:38:04.429 +08:00 [DBG] 成功导入题目，行号: 2
2025-10-29 18:38:04.430 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.430 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.430 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.430 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.430 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.430 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.431 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.431 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.431 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.431 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.431 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.431 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.431 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.431 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.431 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.432 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.432 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.432 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.432 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.432 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.432 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.432 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.432 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.432 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.432 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.432 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.432 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.432 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.432 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.432 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.432 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.432 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.432 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.432 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.432 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 3), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.432 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 3), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.432 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.432 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.432 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.432 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.433 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.433 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.433 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.433 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.433 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.433 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.433 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.433 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.433 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.433 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.433 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.433 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.433 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.433 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.433 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.433 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.433 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.433 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.433 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.433 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.433 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.433 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.433 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.433 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.435 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.435 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.435 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.435 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.435 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.435 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.435 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.435 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.435 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.435 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.435 +08:00 [INF] 创建题目成功: 我国火警电话号码是多少？
2025-10-29 18:38:04.435 +08:00 [DBG] 成功导入题目，行号: 3
2025-10-29 18:38:04.435 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.435 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.435 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.435 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.435 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.435 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.435 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.435 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.435 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.435 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.435 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.436 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.436 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.436 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.436 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.436 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.436 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.436 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.436 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.436 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.436 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.436 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.436 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 41), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 10), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.436 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 41), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 10), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.436 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.436 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.436 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.437 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.437 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.437 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.437 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.437 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.437 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.437 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.437 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.437 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.437 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.437 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.437 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.437 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.437 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.437 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.437 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.437 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.439 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.439 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.439 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.439 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.439 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.439 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.439 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.439 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.439 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.439 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.439 +08:00 [INF] 创建题目成功: 干粉灭火器主要适用于扑救哪类火灾？
2025-10-29 18:38:04.439 +08:00 [DBG] 成功导入题目，行号: 4
2025-10-29 18:38:04.439 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.439 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.439 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.439 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.439 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.439 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.439 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.439 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.439 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.439 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.439 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.439 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.440 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.440 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.440 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.440 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.440 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.440 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.440 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.440 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.440 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.440 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.440 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 40), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.440 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 40), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.440 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.440 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.440 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.440 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.440 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.440 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.440 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.440 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.440 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.441 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.441 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.441 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.441 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.441 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.441 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.441 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.441 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.441 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.441 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.441 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.441 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.441 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.441 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.441 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.441 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.441 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.442 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.442 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.443 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.443 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.443 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.443 +08:00 [INF] 创建题目成功: 消防员进入火场前必须佩戴的基本防护装备是什么？
2025-10-29 18:38:04.443 +08:00 [DBG] 成功导入题目，行号: 5
2025-10-29 18:38:04.443 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.443 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.443 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.443 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.443 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.443 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.443 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.443 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.443 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.443 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.443 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.443 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.443 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.443 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.444 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.444 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.444 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.444 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.444 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.444 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.444 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.444 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.444 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 38), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 20), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.444 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 38), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 20), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.444 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.444 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.444 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.444 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.444 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.444 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.444 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.444 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.444 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.444 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.444 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.444 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.444 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.444 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.444 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.445 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.445 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.445 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.445 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.445 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.445 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.445 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.445 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.445 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.445 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.445 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.445 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.445 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.445 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.445 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.445 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.445 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.446 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.446 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.446 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.446 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.446 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.447 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.447 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.447 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.447 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.447 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.447 +08:00 [INF] 创建题目成功: 火灾按燃烧物质分类，汽油火灾属于哪一类？
2025-10-29 18:38:04.447 +08:00 [DBG] 成功导入题目，行号: 6
2025-10-29 18:38:04.448 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.448 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.448 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.448 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.448 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.448 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.448 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.448 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.448 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.448 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.448 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.448 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.448 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.449 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.449 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.449 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.449 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.449 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.449 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.449 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.449 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.449 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.449 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.449 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 46), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 13), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 13), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 46), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 13), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 13), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.450 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.450 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.450 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.450 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.450 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.450 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.450 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.450 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.450 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.450 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.451 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.451 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.451 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.451 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.451 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.451 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.452 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.452 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.452 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.452 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.452 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.452 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.452 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.452 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.452 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.452 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.452 +08:00 [INF] 创建题目成功: 火场供水的基本方式有哪些？
2025-10-29 18:38:04.452 +08:00 [DBG] 成功导入题目，行号: 7
2025-10-29 18:38:04.453 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.453 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.453 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.453 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.453 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.453 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.453 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.453 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.453 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.453 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.453 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.453 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.453 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.453 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.453 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.454 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.454 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.454 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.454 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 39), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.454 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 39), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.454 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.454 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.454 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.454 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.454 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 3), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.454 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.454 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.455 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.456 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.456 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.456 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.456 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.456 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.456 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.456 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.456 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.456 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.456 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.456 +08:00 [INF] 创建题目成功: 常用的消防水枪类型包括哪些？
2025-10-29 18:38:04.456 +08:00 [DBG] 成功导入题目，行号: 8
2025-10-29 18:38:04.456 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.456 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.456 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.456 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.456 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.457 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.457 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.457 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.457 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.457 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.457 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.457 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.457 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.457 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.457 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.457 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.457 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.457 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.457 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.457 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.457 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.457 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.457 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 42), @p1='?' (Size = 4), @p2='?' (DbType = Int32), @p3='?' (Size = 22), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 22), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.457 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 42), @p1='?' (Size = 4), @p2='?' (DbType = Int32), @p3='?' (Size = 22), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 22), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.457 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.459 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.459 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.459 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.459 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.459 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.459 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.459 +08:00 [INF] 创建题目成功: 火灾现场的烟气温度可达到800-1000℃。
2025-10-29 18:38:04.459 +08:00 [DBG] 成功导入题目，行号: 9
2025-10-29 18:38:04.459 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.459 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.459 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.459 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.459 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.459 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.459 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.459 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.459 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.459 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.459 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.459 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.459 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.459 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.459 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.459 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.460 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.460 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.460 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.460 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.460 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.460 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.460 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 33), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.460 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 33), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.460 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.461 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.461 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.461 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.462 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.462 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.462 +08:00 [INF] 创建题目成功: 消防员可以单独进入火场作业。
2025-10-29 18:38:04.462 +08:00 [DBG] 成功导入题目，行号: 10
2025-10-29 18:38:04.462 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.462 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.462 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.462 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.462 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.462 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.462 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.462 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.462 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.462 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.462 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.462 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.462 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.462 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.462 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.462 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.462 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.462 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 34), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 16), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 16), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.462 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 34), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 16), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 16), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.462 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.464 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.464 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.464 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.464 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.464 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.464 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.464 +08:00 [INF] 创建题目成功: 泡沫灭火器可以用于扑救电气火灾。
2025-10-29 18:38:04.464 +08:00 [DBG] 成功导入题目，行号: 11
2025-10-29 18:38:04.464 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.464 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.464 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.464 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.464 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.464 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.464 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.464 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.464 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.464 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.464 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.464 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.465 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.465 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.465 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.465 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.465 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.465 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.465 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.465 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.465 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.465 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 24), @p1='?' (Size = 9), @p2='?' (DbType = Int32), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 21), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.465 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 24), @p1='?' (Size = 9), @p2='?' (DbType = Int32), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 21), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.465 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.466 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.467 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.467 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.467 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.467 +08:00 [INF] 创建题目成功: 消防工作贯彻___________的方针。
2025-10-29 18:38:04.467 +08:00 [DBG] 成功导入题目，行号: 12
2025-10-29 18:38:04.467 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.467 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.467 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.467 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.467 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.467 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.467 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.467 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.467 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.467 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.467 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.467 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.467 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.467 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.467 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.467 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.467 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.467 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 28), @p1='?' (Size = 14), @p2='?' (DbType = Int32), @p3='?' (Size = 46), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 46), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.467 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 28), @p1='?' (Size = 14), @p2='?' (DbType = Int32), @p3='?' (Size = 46), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 46), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.467 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.504 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.504 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 36ms reading results.
2025-10-29 18:38:04.504 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.504 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.504 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.504 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.504 +08:00 [INF] 创建题目成功: 火场指挥的基本原则是___________、___________、___________。
2025-10-29 18:38:04.504 +08:00 [DBG] 成功导入题目，行号: 13
2025-10-29 18:38:04.505 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.505 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.505 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.505 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.505 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.505 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.505 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.505 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.505 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.505 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.505 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.505 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.505 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.505 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.505 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.505 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.506 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.506 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.506 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.506 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.506 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.506 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.506 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 31), @p1='?' (Size = 88), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.506 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 31), @p1='?' (Size = 88), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.506 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.508 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.508 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.508 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.508 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.508 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.508 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.508 +08:00 [INF] 创建题目成功: 简述火灾发生的必要条件。
2025-10-29 18:38:04.508 +08:00 [DBG] 成功导入题目，行号: 14
2025-10-29 18:38:04.508 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.508 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.508 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.508 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.508 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.508 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.508 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.508 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.508 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.508 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.508 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.508 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.508 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.508 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.509 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.509 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.509 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.509 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.509 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.509 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.509 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.509 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.509 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 33), @p1='?' (Size = 82), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.509 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 33), @p1='?' (Size = 82), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.509 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.510 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.510 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.510 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.510 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.510 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.510 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.510 +08:00 [INF] 创建题目成功: 简述火场侦察的主要内容。
2025-10-29 18:38:04.510 +08:00 [DBG] 成功导入题目，行号: 15
2025-10-29 18:38:04.511 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.511 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.511 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.511 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.511 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.511 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.511 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.511 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.511 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.511 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.511 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.511 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.511 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.511 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.511 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.511 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.511 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.511 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.511 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.511 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.511 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.511 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.511 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 30), @p1='?' (Size = 103), @p2='?' (DbType = Int32), @p3='?' (Size = 15), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 15), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.511 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 30), @p1='?' (Size = 103), @p2='?' (DbType = Int32), @p3='?' (Size = 15), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 15), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.511 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.513 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.513 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.513 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.513 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.513 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.513 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.513 +08:00 [INF] 创建题目成功: 简述消防员个人防护装备的作用。
2025-10-29 18:38:04.513 +08:00 [DBG] 成功导入题目，行号: 16
2025-10-29 18:38:04.513 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.513 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.513 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.513 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.513 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.513 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.513 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.513 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.513 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.513 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.513 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.514 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.514 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.514 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.514 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.514 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.514 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.514 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.514 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.514 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.514 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.514 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.514 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 37), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.514 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 37), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.514 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.514 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.514 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.514 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.514 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.514 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.514 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.514 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.514 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.514 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.514 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 9), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 9), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.515 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.515 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.515 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.515 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.515 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.515 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 8), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 8), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.515 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.515 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.515 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.515 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.515 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.515 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 9), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 9), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.515 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.515 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.515 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.515 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.515 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.515 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.515 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.515 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.515 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.515 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.516 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.516 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.516 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.516 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.516 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.516 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.516 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.516 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.516 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.516 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.516 +08:00 [INF] 创建题目成功: 在高层建筑火灾扑救中，最有效的进攻路线是什么？
2025-10-29 18:38:04.516 +08:00 [DBG] 成功导入题目，行号: 17
2025-10-29 18:38:04.516 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.516 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.516 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.516 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.517 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.517 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.517 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.517 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.517 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.517 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.517 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.517 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.517 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.517 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.517 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.517 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.517 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.517 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.517 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.517 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.517 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.517 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.517 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 21), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.518 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 21), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.518 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.518 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.518 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.518 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.518 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.518 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.518 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.518 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.518 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.518 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.518 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.518 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.518 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.518 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.518 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.518 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.518 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.520 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.520 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.520 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.520 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.520 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.520 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.520 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.520 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.520 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.520 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.520 +08:00 [INF] 创建题目成功: 液化石油气罐体火灾扑救时，首要任务是什么？
2025-10-29 18:38:04.520 +08:00 [DBG] 成功导入题目，行号: 18
2025-10-29 18:38:04.520 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.520 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.520 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.520 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.520 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.520 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.521 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.521 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.521 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.521 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.521 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.521 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.521 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.521 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.521 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.521 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.521 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.521 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.521 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.521 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.521 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.521 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.521 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 37), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 18), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 18), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.521 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 37), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 18), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 18), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.521 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.521 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.521 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.521 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.521 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.521 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.521 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.521 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.521 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.521 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 1), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 1), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.522 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.522 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.522 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.522 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.522 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.522 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.522 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.522 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.522 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.522 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.522 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.522 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.522 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.522 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.522 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.522 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.522 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.523 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.523 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.523 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.523 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.523 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.523 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.523 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.523 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.523 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.523 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.523 +08:00 [INF] 创建题目成功: 在扑救电气火灾时，应选择哪种灭火剂？
2025-10-29 18:38:04.523 +08:00 [DBG] 成功导入题目，行号: 19
2025-10-29 18:38:04.523 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.523 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.523 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.523 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.523 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.524 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.524 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.524 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.524 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.524 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.524 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.524 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.524 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.524 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.524 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.524 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.524 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.524 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.524 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.524 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.524 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.524 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.524 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 29), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 28), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 28), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.524 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 29), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 28), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 28), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.524 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.524 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.524 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.524 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.524 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.524 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.524 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.525 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.525 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.525 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.525 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.525 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.525 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.525 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.525 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.525 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.525 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.525 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.525 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.525 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.525 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.525 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.525 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.525 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.525 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.525 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.526 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.526 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.526 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.526 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.526 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.526 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.526 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.526 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.526 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.526 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.526 +08:00 [INF] 创建题目成功: 火场指挥员在制定灭火救援方案时，应遵循的基本原则是什么？
2025-10-29 18:38:04.526 +08:00 [DBG] 成功导入题目，行号: 20
2025-10-29 18:38:04.526 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.526 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.526 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.527 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.527 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.527 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.527 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.527 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.527 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.527 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.527 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.527 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.527 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.527 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.527 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.527 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.527 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.527 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.527 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.527 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.527 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.527 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.527 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 24), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.527 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 24), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 12), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 12), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.527 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.527 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.527 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.527 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.527 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.528 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.528 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.528 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.528 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.528 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.528 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.528 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.528 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.528 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.528 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.528 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.528 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.528 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.528 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.528 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.528 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.528 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.528 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.528 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.528 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.528 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.529 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.529 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.529 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.529 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.529 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.529 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.529 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.529 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.529 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.529 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.529 +08:00 [INF] 创建题目成功: 建筑物耐火等级分为几级？
2025-10-29 18:38:04.529 +08:00 [DBG] 成功导入题目，行号: 21
2025-10-29 18:38:04.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.530 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.530 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.530 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.530 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.530 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.530 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.530 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.530 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.530 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.530 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.530 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.530 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.530 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.530 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.530 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.530 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.530 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.530 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.530 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.530 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.530 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 53), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 16), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 16), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 53), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 16), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 16), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.531 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.531 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.531 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.533 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.533 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.533 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.533 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.533 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.533 +08:00 [INF] 创建题目成功: 室内火灾扑救的基本战术包括哪些？
2025-10-29 18:38:04.533 +08:00 [DBG] 成功导入题目，行号: 22
2025-10-29 18:38:04.533 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.533 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.533 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.533 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.533 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.533 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.533 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.533 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.533 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.533 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.533 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.533 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.533 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.533 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.534 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.534 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.534 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.534 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.534 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.534 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.534 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.534 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.534 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.534 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.534 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.534 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.534 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.534 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.534 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.534 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.534 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.534 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.534 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.534 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.534 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.535 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.535 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.535 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.535 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.536 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.536 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.536 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.536 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.536 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.536 +08:00 [INF] 创建题目成功: 化工装置火灾的特点包括哪些？
2025-10-29 18:38:04.536 +08:00 [DBG] 成功导入题目，行号: 23
2025-10-29 18:38:04.536 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.536 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.536 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.536 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.536 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.536 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.536 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.536 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.536 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.536 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.536 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.536 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.536 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.536 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.537 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.537 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.537 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.537 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.537 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 44), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 19), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 19), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.537 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 44), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 19), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 19), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.537 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.537 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 6), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 6), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.537 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.537 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.537 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.537 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 6), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 6), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.537 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.537 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.537 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 6), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 6), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.537 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.537 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.537 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.537 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.540 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.540 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.540 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.540 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.540 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.540 +08:00 [INF] 创建题目成功: 消防员在火场作业时应注意哪些安全事项？
2025-10-29 18:38:04.540 +08:00 [DBG] 成功导入题目，行号: 24
2025-10-29 18:38:04.540 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.540 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.540 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.540 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.540 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.540 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.540 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.540 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.540 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.540 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.540 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.540 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.540 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.540 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.541 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.541 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.541 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.541 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.541 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.541 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.541 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 37), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 27), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 27), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.541 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 37), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 27), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 27), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.541 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.542 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.542 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.542 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.542 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.542 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.542 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.542 +08:00 [INF] 创建题目成功: 在扑救高层建筑火灾时，应优先使用举高消防车从外部进攻。
2025-10-29 18:38:04.542 +08:00 [DBG] 成功导入题目，行号: 25
2025-10-29 18:38:04.542 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.542 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.542 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.542 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.542 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.542 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.543 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.543 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.543 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.543 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.543 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.543 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.543 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.543 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.543 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.543 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.543 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.543 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.543 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.543 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.543 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.543 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.543 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 31), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.543 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 31), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.543 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.545 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.545 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.545 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.545 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.545 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.545 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.545 +08:00 [INF] 创建题目成功: 消防水带的工作压力越高越好。
2025-10-29 18:38:04.545 +08:00 [DBG] 成功导入题目，行号: 26
2025-10-29 18:38:04.545 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.545 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.545 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.545 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.545 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.545 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.545 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.545 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.545 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.545 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.545 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.545 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.545 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.545 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.545 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.545 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.546 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.546 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.546 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.546 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.546 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.546 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.546 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 35), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 22), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 22), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.546 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 35), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 22), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 22), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.546 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.547 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.547 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.547 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.547 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.547 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.547 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.547 +08:00 [INF] 创建题目成功: 扑救油罐火灾时，可以直接用直流水枪射击油面。
2025-10-29 18:38:04.547 +08:00 [DBG] 成功导入题目，行号: 27
2025-10-29 18:38:04.547 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.547 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.547 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.547 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.547 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.547 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.547 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.547 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.547 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.547 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.547 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.547 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.547 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.547 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.547 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.548 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.548 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.548 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.548 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.548 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.548 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.548 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 29), @p1='?' (Size = 9), @p2='?' (DbType = Int32), @p3='?' (Size = 40), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 40), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.548 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 29), @p1='?' (Size = 9), @p2='?' (DbType = Int32), @p3='?' (Size = 40), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 40), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.548 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.549 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.549 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.549 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.549 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.549 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.549 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.549 +08:00 [INF] 创建题目成功: 高层建筑火灾扑救的基本战术是___________，辅以___________。
2025-10-29 18:38:04.549 +08:00 [DBG] 成功导入题目，行号: 28
2025-10-29 18:38:04.550 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.550 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.550 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.550 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.550 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.550 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.550 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.550 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.550 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.550 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.550 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.550 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.550 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.550 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.550 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.550 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.550 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.550 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.550 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.550 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.550 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.550 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.550 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 26), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (Size = 51), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 51), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.550 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 26), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (Size = 51), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 51), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.550 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.552 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.552 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.552 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.552 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.552 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.552 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.552 +08:00 [INF] 创建题目成功: 火场指挥部的组织架构包括___________、___________、___________等部门。
2025-10-29 18:38:04.552 +08:00 [DBG] 成功导入题目，行号: 29
2025-10-29 18:38:04.552 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.552 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.552 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.552 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.552 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.552 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.552 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.552 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.552 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.552 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.552 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.552 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.552 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.552 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.552 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.552 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.553 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.553 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.553 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.553 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.553 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.553 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.553 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 31), @p1='?' (Size = 108), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.553 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 31), @p1='?' (Size = 108), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.553 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.554 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.554 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.554 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.554 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.554 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.554 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.554 +08:00 [INF] 创建题目成功: 简述泡沫灭火的基本原理和适用范围。
2025-10-29 18:38:04.554 +08:00 [DBG] 成功导入题目，行号: 30
2025-10-29 18:38:04.554 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.554 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.554 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.554 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.554 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.554 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.554 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.554 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.554 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.554 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.554 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.554 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.554 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.554 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.554 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.554 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.555 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.555 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.555 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.555 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.555 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.555 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.555 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 44), @p1='?' (Size = 104), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.555 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 44), @p1='?' (Size = 104), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.555 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.556 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.556 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.556 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.556 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.556 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.556 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.556 +08:00 [INF] 创建题目成功: 简述危险化学品火灾扑救的基本要求。
2025-10-29 18:38:04.556 +08:00 [DBG] 成功导入题目，行号: 31
2025-10-29 18:38:04.557 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.557 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.557 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.557 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.557 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.557 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.557 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.557 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.557 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.557 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.557 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.557 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.557 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.557 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.557 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.557 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.557 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.557 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.557 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.557 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.557 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.557 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.557 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 48), @p1='?' (Size = 99), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.557 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 48), @p1='?' (Size = 99), @p2='?' (DbType = Int32), @p3='?' (Size = 14), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 14), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.557 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.613 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.613 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 55ms reading results.
2025-10-29 18:38:04.613 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.613 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.613 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.613 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.613 +08:00 [INF] 创建题目成功: 简述火场供水的组织实施要点。
2025-10-29 18:38:04.613 +08:00 [DBG] 成功导入题目，行号: 32
2025-10-29 18:38:04.614 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.614 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.614 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.614 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.614 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.614 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.614 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.614 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.614 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.614 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.614 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.614 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.614 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.615 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.615 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.615 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.615 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.615 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.615 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.615 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 48), @p1='?' (Size = 108), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 48), @p1='?' (Size = 108), @p2='?' (DbType = Int32), @p3='?' (Size = 17), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 17), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.615 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.617 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.617 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.617 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.617 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.617 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.617 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.617 +08:00 [INF] 创建题目成功: 简述消防员火场安全防护的基本措施。
2025-10-29 18:38:04.617 +08:00 [DBG] 成功导入题目，行号: 33
2025-10-29 18:38:04.617 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.617 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.617 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.617 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.617 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.617 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.618 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.618 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.618 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.618 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.618 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.618 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.618 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.618 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.618 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.618 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.618 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.618 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.618 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.618 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.618 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.618 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.618 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 48), @p1='?' (Size = 112), @p2='?' (DbType = Int32), @p3='?' (Size = 15), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 15), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.618 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 48), @p1='?' (Size = 112), @p2='?' (DbType = Int32), @p3='?' (Size = 15), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 15), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.619 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.620 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.620 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.620 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.620 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.620 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.620 +08:00 [INF] 创建题目成功: 简述消防水枪的选择和使用原则。
2025-10-29 18:38:04.620 +08:00 [DBG] 成功导入题目，行号: 34
2025-10-29 18:38:04.620 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.620 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.620 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.620 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.620 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.620 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.620 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.620 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.620 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.620 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.620 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.620 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.620 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.620 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.621 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.621 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.621 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.621 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.621 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.621 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.621 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.621 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.621 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 21), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.621 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 32), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 21), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 21), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.621 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.621 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.621 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.621 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.621 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.621 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.621 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.621 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.621 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.621 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.621 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.621 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.621 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.621 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.621 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.622 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.622 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.622 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.622 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.622 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.622 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.622 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.622 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.622 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.622 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.622 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.622 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.622 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.622 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.622 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.622 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.622 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.622 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.622 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.622 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.622 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.622 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.622 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.622 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.622 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.624 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.624 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.624 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.624 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.624 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.624 +08:00 [INF] 创建题目成功: 在扑救大型石化装置火灾时，应采用何种战术？
2025-10-29 18:38:04.624 +08:00 [DBG] 成功导入题目，行号: 35
2025-10-29 18:38:04.624 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.624 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.624 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.624 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.624 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.624 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.624 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.624 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.624 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.624 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.624 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.624 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.624 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.624 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.625 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.625 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.625 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.625 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 35), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 18), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 18), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 35), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 18), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 18), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.625 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 5), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 5), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.625 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.625 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.625 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.625 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 5), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.625 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.625 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.625 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.625 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.627 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.627 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.627 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.627 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.627 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.627 +08:00 [INF] 创建题目成功: 特大火灾现场指挥权的移交原则是什么？
2025-10-29 18:38:04.627 +08:00 [DBG] 成功导入题目，行号: 36
2025-10-29 18:38:04.627 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.627 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.627 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.627 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.627 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.627 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.627 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.627 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.627 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.627 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.627 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.627 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.627 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.627 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.628 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.628 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.628 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.628 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.628 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.628 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.628 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.628 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.628 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 35), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 25), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 25), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.628 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 35), @p1='?' (Size = 1), @p2='?' (DbType = Int32), @p3='?' (Size = 25), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 25), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.628 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.628 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.628 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.628 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.628 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.628 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.628 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.628 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.628 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.628 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.628 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.628 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 2), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.628 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.628 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.628 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.628 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.628 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.628 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.629 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.629 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.629 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.629 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.629 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.629 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.629 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.629 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.629 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.629 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.629 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.629 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.629 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.629 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.629 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.629 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.629 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.629 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 2), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.629 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.629 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.629 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.629 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.631 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.631 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.631 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.631 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.631 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.631 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.631 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.631 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.631 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.631 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.631 +08:00 [INF] 创建题目成功: 在复杂地下空间火灾扑救中，最关键的战术要素是什么？
2025-10-29 18:38:04.631 +08:00 [DBG] 成功导入题目，行号: 37
2025-10-29 18:38:04.631 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.631 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.631 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.631 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.631 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.631 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.631 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.632 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.632 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.632 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.632 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.632 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.632 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.632 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.632 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.632 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.632 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.632 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.632 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.632 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.632 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.632 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.632 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 42), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 20), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.633 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 42), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 20), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 20), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.633 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.633 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.633 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.633 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.633 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.633 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.633 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.633 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.633 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.633 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.633 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.633 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.633 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.633 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.633 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.633 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.633 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.635 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.635 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.635 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.635 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.635 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.635 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.635 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.635 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.635 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.635 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.635 +08:00 [INF] 创建题目成功: 核电站火灾扑救需要考虑的特殊因素有哪些？
2025-10-29 18:38:04.635 +08:00 [DBG] 成功导入题目，行号: 38
2025-10-29 18:38:04.636 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.636 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.636 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.636 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.636 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.636 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.636 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.636 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.636 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.636 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.636 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.636 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'QuestionOption.OptionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.636 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.636 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.636 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.637 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 18:38:04.637 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 18:38:04.637 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.637 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 19), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 19), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.637 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 7), @p2='?' (DbType = Int32), @p3='?' (Size = 19), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 19), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.637 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.637 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Executing DbCommand [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p18='?' (Size = 4), @p19='?' (DbType = Boolean), @p20='?' (Size = 1), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p18, @p19, @p20, @p21, @p22)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.637 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.637 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.637 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.637 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.637 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.637 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.637 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4), @p1='?' (DbType = Boolean), @p2='?' (Size = 1), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionOptions" ("Content", "IsCorrect", "OptionLabel", "OrderIndex", "QuestionId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "OptionId";
2025-10-29 18:38:04.637 +08:00 [DBG] The foreign key property 'QuestionOption.OptionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.637 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.637 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.637 +08:00 [DBG] Committing transaction.
2025-10-29 18:38:04.639 +08:00 [DBG] Committed transaction.
2025-10-29 18:38:04.639 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.639 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.639 +08:00 [DBG] Disposing transaction.
2025-10-29 18:38:04.639 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] An entity of type 'QuestionOption' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 5 entities written to the database.
2025-10-29 18:38:04.639 +08:00 [INF] 创建题目成功: 跨区域灭火救援的组织协调要点包括哪些？
2025-10-29 18:38:04.639 +08:00 [DBG] 成功导入题目，行号: 39
2025-10-29 18:38:04.639 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.639 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.639 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.639 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.639 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.639 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.639 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.639 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.639 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.639 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.639 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.639 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.639 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.639 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.640 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.640 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.640 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.640 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.640 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.640 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.640 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 40), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 25), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 25), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.640 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 40), @p1='?' (Size = 5), @p2='?' (DbType = Int32), @p3='?' (Size = 25), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 25), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.640 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.641 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.641 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.641 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.641 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.641 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.641 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.641 +08:00 [INF] 创建题目成功: 在扑救高层建筑火灾时，可以同时从多个楼层进行内攻。
2025-10-29 18:38:04.641 +08:00 [DBG] 成功导入题目，行号: 40
2025-10-29 18:38:04.642 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.642 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.642 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.642 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.642 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.642 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.642 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.642 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.642 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.642 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.642 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.642 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.642 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.642 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.642 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.643 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.643 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.643 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.643 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.643 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.643 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.643 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 34), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (Size = 52), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 52), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.643 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 34), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (Size = 52), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 52), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.643 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.644 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.644 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.644 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.644 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.644 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.644 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.644 +08:00 [INF] 创建题目成功: 危险化学品事故现场划分为___________、___________、___________三个区域。
2025-10-29 18:38:04.644 +08:00 [DBG] 成功导入题目，行号: 41
2025-10-29 18:38:04.644 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.644 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.644 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.644 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.644 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.644 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.644 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.644 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.644 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.644 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.644 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.644 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.644 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.645 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.645 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.645 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.645 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.645 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.645 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.645 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.645 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.645 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.645 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 77), @p1='?' (Size = 205), @p2='?' (DbType = Int32), @p3='?' (Size = 51), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 51), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.646 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 77), @p1='?' (Size = 205), @p2='?' (DbType = Int32), @p3='?' (Size = 51), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 51), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.646 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.647 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.647 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.647 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.647 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.647 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.647 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.647 +08:00 [INF] 创建题目成功: 某化工厂发生爆炸火灾，现场有多个储罐燃烧，风力较大，附近有居民区。作为现场指挥员，请制定灭火救援方案。
2025-10-29 18:38:04.647 +08:00 [DBG] 成功导入题目，行号: 42
2025-10-29 18:38:04.647 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.647 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.647 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.647 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.647 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.647 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.647 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.647 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.647 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.647 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.647 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.647 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.647 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.647 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.647 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.647 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.648 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.648 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.648 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.648 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.648 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.648 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.648 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 66), @p1='?' (Size = 199), @p2='?' (DbType = Int32), @p3='?' (Size = 54), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 54), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.648 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 66), @p1='?' (Size = 199), @p2='?' (DbType = Int32), @p3='?' (Size = 54), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 54), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.648 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.649 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.649 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.649 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.649 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.649 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.649 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.649 +08:00 [INF] 创建题目成功: 某高层住宅楼15层发生火灾，楼内有人员被困，电梯已停用，楼梯间有烟气。请分析救人和灭火的优先顺序及具体措施。
2025-10-29 18:38:04.649 +08:00 [DBG] 成功导入题目，行号: 43
2025-10-29 18:38:04.649 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.649 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.649 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.649 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.649 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.649 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.649 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.649 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.649 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.649 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.649 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.650 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.650 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.650 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.650 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.650 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.650 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.650 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.650 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.650 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.650 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.650 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.650 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 90), @p1='?' (Size = 246), @p2='?' (DbType = Int32), @p3='?' (Size = 44), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 44), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.650 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 90), @p1='?' (Size = 246), @p2='?' (DbType = Int32), @p3='?' (Size = 44), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 44), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.650 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.652 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.652 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.652 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.652 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.652 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.652 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.652 +08:00 [INF] 创建题目成功: 某地下商场发生火灾，烟雾浓重，能见度极低，有大量人员被困。请制定救援方案并说明注意事项。
2025-10-29 18:38:04.652 +08:00 [DBG] 成功导入题目，行号: 44
2025-10-29 18:38:04.652 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.652 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.652 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.652 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.652 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.652 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.652 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.652 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.652 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.652 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.652 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.652 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.652 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.652 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.652 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.652 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.653 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.653 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.653 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.653 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.653 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.653 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.653 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 94), @p1='?' (Size = 235), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.653 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 94), @p1='?' (Size = 235), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.653 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.654 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.654 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.654 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.654 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.654 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.654 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.654 +08:00 [INF] 创建题目成功: 简述大型灾害事故现场指挥体系的建立和运行机制。
2025-10-29 18:38:04.654 +08:00 [DBG] 成功导入题目，行号: 45
2025-10-29 18:38:04.654 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.654 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.654 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.654 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.654 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.654 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.654 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.654 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.654 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.654 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.654 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.654 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.654 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.654 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.654 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.654 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.655 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.655 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.655 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.655 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.655 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.655 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.655 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 97), @p1='?' (Size = 229), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.655 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 97), @p1='?' (Size = 229), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.655 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.657 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.657 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 2ms reading results.
2025-10-29 18:38:04.657 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.657 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.657 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.657 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.657 +08:00 [INF] 创建题目成功: 简述石油化工装置火灾扑救的技术要点和安全措施。
2025-10-29 18:38:04.657 +08:00 [DBG] 成功导入题目，行号: 46
2025-10-29 18:38:04.657 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.657 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.657 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.657 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.657 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.657 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.658 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.658 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.658 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.658 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.658 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.658 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.658 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.658 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.658 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.658 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.661 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.661 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.661 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.661 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.661 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.661 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.661 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 109), @p1='?' (Size = 228), @p2='?' (DbType = Int32), @p3='?' (Size = 24), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 24), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.661 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 109), @p1='?' (Size = 228), @p2='?' (DbType = Int32), @p3='?' (Size = 24), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 24), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.661 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.663 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.663 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.663 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.663 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.663 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.663 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.663 +08:00 [INF] 创建题目成功: 简述城市综合体火灾扑救的战术特点和组织指挥要点。
2025-10-29 18:38:04.663 +08:00 [DBG] 成功导入题目，行号: 47
2025-10-29 18:38:04.663 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.663 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.663 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.663 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.663 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.663 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.663 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.663 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.663 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.663 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.663 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.663 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.663 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.663 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.663 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.663 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.664 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.664 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.664 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.664 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.664 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.664 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.664 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 99), @p1='?' (Size = 238), @p2='?' (DbType = Int32), @p3='?' (Size = 24), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 24), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.664 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 99), @p1='?' (Size = 238), @p2='?' (DbType = Int32), @p3='?' (Size = 24), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 12), @p15='?' (DbType = Int32), @p16='?' (Size = 24), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.664 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.665 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.665 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.665 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.665 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.665 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.665 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.665 +08:00 [INF] 创建题目成功: 简述消防员在危险化学品事故处置中的安全防护要求。
2025-10-29 18:38:04.665 +08:00 [DBG] 成功导入题目，行号: 48
2025-10-29 18:38:04.665 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.665 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.665 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.665 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.665 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.665 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.666 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.666 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.666 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.666 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.666 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.666 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.666 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.666 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.666 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.666 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.666 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.666 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.666 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.666 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.666 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.666 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.666 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 99), @p1='?' (Size = 234), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.666 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 99), @p1='?' (Size = 234), @p2='?' (DbType = Int32), @p3='?' (Size = 23), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 23), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.666 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.668 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.668 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.668 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.668 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.668 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.668 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.668 +08:00 [INF] 创建题目成功: 简述大型消防装备在复杂火场中的配置和使用策略。
2025-10-29 18:38:04.668 +08:00 [DBG] 成功导入题目，行号: 49
2025-10-29 18:38:04.668 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.668 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.668 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.668 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.668 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.668 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.668 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.668 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.668 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.668 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.668 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.668 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.668 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.668 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.668 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.668 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.669 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.669 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.669 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.669 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.669 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.669 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.669 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 126), @p1='?' (Size = 295), @p2='?' (DbType = Int32), @p3='?' (Size = 59), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 59), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.669 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 126), @p1='?' (Size = 295), @p2='?' (DbType = Int32), @p3='?' (Size = 59), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 11), @p15='?' (DbType = Int32), @p16='?' (Size = 59), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.669 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.671 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.671 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.671 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.671 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.671 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.671 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.671 +08:00 [INF] 创建题目成功: 某大型购物中心发生火灾，建筑面积10万平方米，共5层，现场有3000余人，多个安全出口被烟火封堵。请制定综合救援方案。
2025-10-29 18:38:04.671 +08:00 [DBG] 成功导入题目，行号: 50
2025-10-29 18:38:04.671 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.671 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.671 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.671 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.671 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.671 +08:00 [DBG] Executing DbCommand [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.671 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__question_BankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "QuestionBanks" AS "q"
    WHERE "q"."BankId" = @__question_BankId_0 AND "q"."IsActive")
2025-10-29 18:38:04.671 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.671 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 18:38:04.671 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.671 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.671 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'Question.QuestionId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.671 +08:00 [DBG] The navigation 'Question.QuestionBank' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.671 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.671 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.671 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 18:38:04.672 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 18:38:04.672 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.672 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.672 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.672 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.672 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.672 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 140), @p1='?' (Size = 315), @p2='?' (DbType = Int32), @p3='?' (Size = 51), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 51), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.672 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 140), @p1='?' (Size = 315), @p2='?' (DbType = Int32), @p3='?' (Size = 51), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?', @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?', @p11='?', @p12='?' (DbType = Decimal), @p13='?', @p14='?' (Size = 9), @p15='?' (DbType = Int32), @p16='?' (Size = 51), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Questions" ("Analysis", "Answer", "BankId", "Content", "CreatedAt", "Difficulty", "GuidanceOverlaysJson", "IsActive", "MapDrawingConfigJson", "QuestionType", "ReferenceOverlaysJson", "ReviewRubricJson", "Score", "ShowBuildingLayersJson", "Tags", "TimeLimitSeconds", "Title", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)
RETURNING "QuestionId";
2025-10-29 18:38:04.672 +08:00 [DBG] The foreign key property 'Question.QuestionId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 18:38:04.673 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.673 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.673 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.673 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.674 +08:00 [DBG] An entity of type 'Question' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 18:38:04.674 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 18:38:04.674 +08:00 [INF] 创建题目成功: 某化工园区发生连环爆炸火灾，涉及多个企业，有毒气体泄漏，风向不定。请分析应急处置的关键环节和具体措施。
2025-10-29 18:38:04.674 +08:00 [DBG] 成功导入题目，行号: 51
2025-10-29 18:38:04.674 +08:00 [INF] 题目导入完成，成功: 50，失败: 0
2025-10-29 18:38:04.683 +08:00 [INF] Excel导入服务返回结果: 总数=50, 成功=50, 失败=0
2025-10-29 18:38:04.683 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.683 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.683 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 18:38:04.683 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.683 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 18:38:04.683 +08:00 [DBG] Executing DbCommand [Parameters=[@__bankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content", "q0"."IsCorrect", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId"
FROM "Questions" AS "q"
LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
WHERE "q"."BankId" = @__bankId_0
ORDER BY "q"."QuestionId"
2025-10-29 18:38:04.683 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__bankId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."QuestionId", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content", "q0"."IsCorrect", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId"
FROM "Questions" AS "q"
LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
WHERE "q"."BankId" = @__bankId_0
ORDER BY "q"."QuestionId"
2025-10-29 18:38:04.685 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.685 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 18:38:04.685 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:38:04.685 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 18:38:04.685 +08:00 [INF] 准备显示导入结果对话框
2025-10-29 18:38:04.686 +08:00 [INF] 开始创建导入结果对话框，结果: 总数=50, 成功=50, 失败=0
2025-10-29 18:38:04.686 +08:00 [INF] 创建ImportResultViewModel完成，成功题目数: 50, 失败题目数: 0
2025-10-29 18:38:04.689 +08:00 [INF] 创建ImportResultDialog完成，准备显示对话框
2025-10-29 18:38:04.689 +08:00 [INF] 设置对话框Owner为主窗口
2025-10-29 18:38:04.689 +08:00 [INF] 准备显示导入结果对话框
2025-10-29 18:38:04.785 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:04.789 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:05.714 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:05.814 +08:00 [INF] 导入结果对话框已关闭
2025-10-29 18:38:05.857 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:07.065 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:07.233 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:08.329 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:08.466 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:08.499 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:08.575 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:08.608 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:08.731 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:09.044 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:09.889 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:09.959 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:10.433 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:10.496 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:10.689 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:10.987 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:11.542 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:11.619 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:11.810 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:12.139 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:13.089 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:13.872 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:13.985 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:14.369 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:14.432 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:15.606 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:15.921 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:16.371 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:16.625 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:16.737 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:16.939 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:16.966 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:17.018 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:17.088 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:17.216 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:17.230 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:17.391 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:18.434 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:18.510 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:18.718 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:18.782 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:18.982 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:19.056 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:19.199 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:20.346 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:20.482 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:22.416 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:22.542 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:27.168 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:30.857 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:32.995 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:33.696 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:36.342 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:36.448 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:36.903 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:40.731 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:38:40.855 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:40:26.697 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:40:27.461 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:40:27.772 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:40:27.901 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:46:04.247 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:48:32.527 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:48:33.737 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:48:33.857 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 18:48:33.945 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:48:35.103 +08:00 [INF] PermissionService.HasPermission: Role=Admin, Operation=SendNotification, Result=True
2025-10-29 18:48:35.203 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 18:48:35.204 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 18:48:35.204 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.014 +08:00 [DBG] Hosting starting
2025-10-29 21:39:19.034 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 21:39:19.036 +08:00 [INF] Hosting environment: Production
2025-10-29 21:39:19.037 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 21:39:19.037 +08:00 [DBG] Hosting started
2025-10-29 21:39:19.075 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 21:39:19.088 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 21:39:19.229 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:39:19.248 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:39:19.301 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:39:19.302 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:39:19.317 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 21:39:19.431 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 21:39:19.470 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:39:19.473 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 21:39:19.475 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.477 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:39:19.477 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:39:19.478 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.482 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.484 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.487 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.492 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:39:19.495 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 21:39:19.495 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-10-29 21:39:19.496 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.499 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.502 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.510 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.511 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.512 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.513 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:39:19.513 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:39:19.513 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.513 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.513 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.513 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.513 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:39:19.514 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:39:19.514 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:39:19.514 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.514 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.514 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.514 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.514 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.514 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.519 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.519 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.519 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:39:19.519 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.519 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.519 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:39:19.520 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:39:19.521 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.522 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 21:39:19.522 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.522 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.528 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 21:39:19.529 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.529 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:39:19.530 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:39:19.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.530 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.530 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.530 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.530 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:39:19.530 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:39:19.530 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:39:19.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.530 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.530 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.530 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.530 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.530 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.530 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:39:19.530 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:39:19.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.531 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:39:19.531 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:39:19.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:39:19.531 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:39:19.531 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.531 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:39:19.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.531 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:39:19.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:39:19.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:39:19.531 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.531 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.531 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 21:39:19.548 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 21:39:19.600 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:39:19.608 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.608 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.608 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:39:19.608 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.608 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.608 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 21:39:19.608 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 21:39:19.609 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.609 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:39:19.609 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.609 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.609 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 21:39:19.611 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:39:19.611 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.611 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.611 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:39:19.611 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.611 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.611 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 21:39:19.611 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 21:39:19.611 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.611 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:39:19.611 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.611 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.611 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 21:39:19.612 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:39:19.612 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.612 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.612 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:39:19.612 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.612 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:39:19.612 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 21:39:19.612 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 21:39:19.612 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.612 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:39:19.612 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.612 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.613 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 21:39:19.613 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:39:19.613 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:39:19.617 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 21:40:37.884 +08:00 [INF] === 开始登录流程 ===
2025-10-29 21:40:37.884 +08:00 [INF] 用户名: student
2025-10-29 21:40:37.884 +08:00 [INF] 密码长度: 10
2025-10-29 21:40:37.884 +08:00 [INF] AuthService是否为null: False
2025-10-29 21:40:37.884 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 21:40:37.886 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 21:40:37.886 +08:00 [INF] 接收到的用户名: student
2025-10-29 21:40:37.886 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 21:40:37.886 +08:00 [INF] 开始查询用户
2025-10-29 21:40:37.886 +08:00 [INF] UserRepository是否为null: False
2025-10-29 21:40:37.886 +08:00 [INF] Context是否为null: False
2025-10-29 21:40:37.886 +08:00 [INF] 测试数据库连接...
2025-10-29 21:40:37.888 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:40:37.888 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:40:37.888 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.888 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.888 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.888 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:37.888 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 21:40:37.889 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 21:40:37.898 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:37.900 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:40:37.900 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:40:37.900 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.900 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.900 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:37.900 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:37.900 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:37.900 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 21:40:37.900 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 21:40:37.900 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.900 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:37.900 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.901 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:37.901 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 21:40:37.901 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 21:40:37.914 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:37.917 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.917 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.917 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:37.917 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:37.917 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:37.918 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 21:40:37.919 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 21:40:37.929 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:37.942 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.942 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 22ms reading results.
2025-10-29 21:40:37.942 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:37.942 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:37.942 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 21:40:37.943 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 21:40:37.943 +08:00 [INF] 用户是否激活: True
2025-10-29 21:40:37.943 +08:00 [INF] 登录失败次数: 0
2025-10-29 21:40:37.943 +08:00 [INF] 检查账户锁定状态
2025-10-29 21:40:37.944 +08:00 [INF] 开始验证密码
2025-10-29 21:40:37.944 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 21:40:37.944 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 21:40:37.944 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 21:40:37.944 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 21:40:37.945 +08:00 [INF] 密码哈希长度: 60
2025-10-29 21:40:37.945 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 21:40:38.166 +08:00 [INF] 密码验证结果: True
2025-10-29 21:40:38.166 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 21:40:38.167 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 21:40:38.168 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 21:40:38.175 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:38.177 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.180 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 21:40:38.197 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.197 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.198 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.198 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.198 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.198 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 21:40:38.199 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 21:40:38.202 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.202 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 21:40:38.203 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.203 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.205 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.205 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 21:40:38.205 +08:00 [INF] 用户信息更新完成
2025-10-29 21:40:38.205 +08:00 [INF] 用户登录成功 - student
2025-10-29 21:40:38.205 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 21:40:38.206 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 21:40:38.206 +08:00 [INF] 成功: True
2025-10-29 21:40:38.206 +08:00 [INF] 消息: 登录成功
2025-10-29 21:40:38.206 +08:00 [INF] 用户对象是否为null: False
2025-10-29 21:40:38.206 +08:00 [INF] 用户 student 登录成功
2025-10-29 21:40:38.207 +08:00 [INF] 上次登录时间: 2025-10-29 21:32:06
2025-10-29 21:40:38.207 +08:00 [INF] 触发登录成功事件
2025-10-29 21:40:38.208 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 21:40:38.208 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 21:40:38.208 +08:00 [INF] 用户ID: 2
2025-10-29 21:40:38.208 +08:00 [INF] 用户对象是否为null: False
2025-10-29 21:40:38.222 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 21:40:38.222 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 21:40:38.223 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 21:40:38.231 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 21:40:38.235 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 21:40:38.238 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:38.238 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.238 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.238 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.238 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.238 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.238 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:40:38.238 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:40:38.238 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.238 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.238 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.238 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.242 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 21:40:38.271 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.274 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.274 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.274 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.274 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.274 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.274 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:40:38.274 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:40:38.277 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.281 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.282 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.282 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.282 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.282 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.282 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.282 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 7ms reading results.
2025-10-29 21:40:38.282 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.282 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.286 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 21:40:38.289 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 21:40:38.289 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:40:38.298 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.300 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.300 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.300 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.300 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.300 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.300 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:40:38.301 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:40:38.301 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.301 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.301 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.301 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.302 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 21:40:38.304 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.304 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.304 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.304 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.304 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.304 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.304 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:40:38.304 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:40:38.306 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.325 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.325 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.325 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.326 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.326 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 21ms reading results.
2025-10-29 21:40:38.326 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.326 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.331 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 21:40:38.333 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.333 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.334 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.334 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.334 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.334 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.334 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 21:40:38.334 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 21:40:38.335 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.338 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.338 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 21:40:38.338 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.338 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.347 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 21:40:38.347 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 21:40:38.347 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 21:40:38.347 +08:00 [INF] 用户ID: 2
2025-10-29 21:40:38.347 +08:00 [INF] 用户对象是否为null: False
2025-10-29 21:40:38.347 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 21:40:38.347 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 21:40:38.347 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 21:40:38.348 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 21:40:38.350 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.350 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.351 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.351 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.351 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.351 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.351 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 21:40:38.351 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 21:40:38.354 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.356 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.356 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.356 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.356 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.363 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.363 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 21:40:38.363 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.363 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.364 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 21:40:38.370 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 21:40:38.371 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 21:40:38.371 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 21:40:38.372 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 21:40:38.372 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 21:40:38.372 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:40:38.373 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 21:40:38.381 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.381 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.381 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.381 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.381 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.381 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.382 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 21:40:38.382 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 21:40:38.382 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.383 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.383 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.384 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.387 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.387 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.397 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.397 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 21:40:38.398 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.398 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.398 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 21:40:38.398 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 21:40:38.403 +08:00 [INF] 开始加载学生考试结果
2025-10-29 21:40:38.404 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.404 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.404 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.404 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.404 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.404 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:40:38.404 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:40:38.405 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.405 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.405 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.405 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.405 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 21:40:38.412 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 21:40:38.413 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:38.413 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.413 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.413 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.413 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.413 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.413 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 21:40:38.414 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 21:40:38.414 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.414 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.414 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.414 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.414 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 21:40:38.415 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 21:40:38.415 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 21:40:38.422 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:40:38.422 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.422 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.422 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.422 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.422 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.423 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 21:40:38.423 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 21:40:38.423 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.423 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.423 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.423 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.436 +08:00 [INF] 所有页面加载完成
2025-10-29 21:40:38.437 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 21:40:38.437 +08:00 [INF] 当前用户: student (Student)
2025-10-29 21:40:38.437 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 21:40:38.437 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 21:40:38.437 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 21:40:38.437 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 21:40:38.437 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 21:40:38.437 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 21:40:38.437 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 21:40:38.437 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 21:40:38.437 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 21:40:38.437 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 21:40:38.437 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 21:40:38.437 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 21:40:38.437 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 21:40:38.437 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 21:40:38.437 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 21:40:38.469 +08:00 [INF] 关闭登录窗口
2025-10-29 21:40:38.474 +08:00 [INF] === 登录流程结束 ===
2025-10-29 21:40:38.501 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.501 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.501 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.502 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.502 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.502 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:40:38.502 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:40:38.502 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.502 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.502 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.502 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.502 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.503 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.503 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.503 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.503 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.503 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.503 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:40:38.503 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:40:38.503 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.503 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.503 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.504 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.504 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.504 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.504 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.504 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.504 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.504 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.504 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.504 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:40:38.504 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:40:38.504 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.504 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:38.504 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.504 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:38.504 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.504 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:38.504 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:40:38.504 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:40:38.505 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.505 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.505 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.505 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:38.505 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.505 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:38.505 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:38.505 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:41.469 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 21:40:41.469 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 21:40:41.471 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 21:40:41.471 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 21:40:41.472 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:40:41.472 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 21:40:41.479 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:41.480 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.480 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.480 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:41.480 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:41.480 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:41.480 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:41.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:41.480 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:41.481 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.481 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:41.481 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.481 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:41.481 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 21:40:41.481 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 21:40:41.481 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 21:40:41.482 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 21:40:41.484 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:41.484 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.484 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.484 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:41.484 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:41.484 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:41.484 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:40:41.484 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:40:41.484 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.484 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:41.484 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:41.484 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:41.484 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 21:40:41.484 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 21:40:42.364 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 21:40:42.365 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.365 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.365 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.365 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.365 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.365 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:42.365 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:42.366 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.366 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.366 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.366 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.366 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 21:40:42.366 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 21:40:42.366 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 21:40:42.366 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.366 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.366 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.366 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.366 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.380 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:40:42.380 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:40:42.381 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.381 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.381 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.381 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.381 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 21:40:42.381 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 21:40:42.382 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 21:40:42.382 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.383 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.383 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.383 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.383 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.383 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:42.383 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:42.383 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.383 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.383 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.383 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.383 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 21:40:42.383 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 21:40:42.383 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 21:40:42.383 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.383 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.383 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.383 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.383 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.383 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:40:42.384 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:40:42.384 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.384 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.384 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.384 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.384 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 21:40:42.384 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 21:40:42.384 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.384 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.384 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.384 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.384 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.384 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:42.384 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:40:42.384 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.384 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.384 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.385 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.395 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.397 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.398 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.398 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 21:40:42.398 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 21:40:42.412 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 21:40:42.417 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.418 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.418 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.418 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.418 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.418 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 21:40:42.418 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 21:40:42.421 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.425 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.425 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 21:40:42.425 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.425 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.427 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.427 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 21:40:42.429 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.438 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.438 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.438 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.439 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 21:40:42.439 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 21:40:42.441 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 21:40:42.443 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.443 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.443 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 21:40:42.444 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 21:40:42.445 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.445 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.445 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.445 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.445 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.446 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.446 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.446 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.446 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.446 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.446 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.446 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.446 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.446 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.446 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.446 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.446 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.446 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.446 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.446 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.446 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.447 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.447 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.447 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.447 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.447 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.447 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.447 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.447 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.447 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.447 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.447 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.447 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:40:42.447 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:40:42.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:40:42.448 +08:00 [DBG] Committing transaction.
2025-10-29 21:40:42.451 +08:00 [DBG] Committed transaction.
2025-10-29 21:40:42.451 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.451 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.452 +08:00 [DBG] Disposing transaction.
2025-10-29 21:40:42.452 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.452 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.452 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.452 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.452 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.452 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.452 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 21:40:42.453 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 21:40:42.453 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 21:40:42.453 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:40:42.453 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 21:40:42.454 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 21:40:42.454 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 21:40:42.465 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 21:40:42.468 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:40:42.468 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.468 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.468 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:40:42.468 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.468 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:40:42.468 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 21:40:42.469 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 21:40:42.471 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:40:42.473 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.473 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 21:40:42.474 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:42.474 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:40:42.474 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 5
2025-10-29 21:40:47.951 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 21:40:49.160 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 21:40:49.161 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:40:49.161 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.194 +08:00 [DBG] Hosting starting
2025-10-29 21:48:51.213 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 21:48:51.215 +08:00 [INF] Hosting environment: Production
2025-10-29 21:48:51.215 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 21:48:51.215 +08:00 [DBG] Hosting started
2025-10-29 21:48:51.249 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 21:48:51.261 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 21:48:51.395 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:48:51.413 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:48:51.468 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:48:51.469 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 21:48:51.484 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 21:48:51.602 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 21:48:51.606 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:48:51.609 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 21:48:51.611 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.612 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:48:51.613 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:48:51.614 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.617 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.619 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.620 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.624 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:48:51.626 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-10-29 21:48:51.626 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 21:48:51.627 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.675 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.678 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.686 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.687 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.688 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.689 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:48:51.689 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:48:51.689 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.689 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.690 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.690 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.690 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:48:51.690 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:48:51.690 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:48:51.690 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.690 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.690 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.690 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.690 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.690 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.695 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.695 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.695 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:48:51.695 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.695 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.695 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:48:51.696 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:48:51.697 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.698 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 21:48:51.698 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.698 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.703 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 21:48:51.704 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:48:51.705 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:48:51.705 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.705 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:48:51.705 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:48:51.705 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:48:51.705 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.705 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.705 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.705 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.705 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:48:51.706 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 21:48:51.706 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.706 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 21:48:51.706 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:48:51.706 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.706 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:48:51.706 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 21:48:51.706 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:48:51.706 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.706 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.706 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 21:48:51.722 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 21:48:51.770 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:48:51.778 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.778 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.778 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:48:51.778 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.778 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.778 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 21:48:51.778 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 21:48:51.779 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.779 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:48:51.779 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.779 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.779 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 21:48:51.780 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:48:51.780 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.780 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.780 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:48:51.780 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.780 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.780 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 21:48:51.780 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 21:48:51.781 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.781 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:48:51.781 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.781 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.781 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 21:48:51.781 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:48:51.782 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.782 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.782 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:48:51.782 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.782 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:48:51.782 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 21:48:51.782 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 21:48:51.782 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.782 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:48:51.782 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.782 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.782 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 21:48:51.783 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:48:51.783 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:48:51.786 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 21:49:01.414 +08:00 [INF] === 开始登录流程 ===
2025-10-29 21:49:01.414 +08:00 [INF] 用户名: student
2025-10-29 21:49:01.414 +08:00 [INF] 密码长度: 10
2025-10-29 21:49:01.414 +08:00 [INF] AuthService是否为null: False
2025-10-29 21:49:01.414 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 21:49:01.416 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 21:49:01.416 +08:00 [INF] 接收到的用户名: student
2025-10-29 21:49:01.416 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 21:49:01.416 +08:00 [INF] 开始查询用户
2025-10-29 21:49:01.416 +08:00 [INF] UserRepository是否为null: False
2025-10-29 21:49:01.416 +08:00 [INF] Context是否为null: False
2025-10-29 21:49:01.416 +08:00 [INF] 测试数据库连接...
2025-10-29 21:49:01.418 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:49:01.418 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:49:01.418 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.418 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.419 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.419 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.419 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 21:49:01.419 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 21:49:01.428 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:01.430 +08:00 [DBG] Creating DbConnection.
2025-10-29 21:49:01.430 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 21:49:01.430 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.431 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.431 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.431 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.431 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.431 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 21:49:01.431 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 21:49:01.431 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.431 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:01.431 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.431 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.431 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 21:49:01.432 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 21:49:01.445 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:01.448 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.448 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.448 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.448 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.448 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.449 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 21:49:01.450 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 21:49:01.461 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.474 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.474 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 23ms reading results.
2025-10-29 21:49:01.474 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.474 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.474 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 21:49:01.475 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 21:49:01.475 +08:00 [INF] 用户是否激活: True
2025-10-29 21:49:01.475 +08:00 [INF] 登录失败次数: 0
2025-10-29 21:49:01.475 +08:00 [INF] 检查账户锁定状态
2025-10-29 21:49:01.477 +08:00 [INF] 开始验证密码
2025-10-29 21:49:01.477 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 21:49:01.477 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 21:49:01.477 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 21:49:01.477 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 21:49:01.477 +08:00 [INF] 密码哈希长度: 60
2025-10-29 21:49:01.477 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 21:49:01.695 +08:00 [INF] 密码验证结果: True
2025-10-29 21:49:01.696 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 21:49:01.697 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 21:49:01.697 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 21:49:01.707 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:01.710 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.712 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 21:49:01.729 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.729 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.729 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.729 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.729 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.729 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 21:49:01.730 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 21:49:01.733 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.733 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 21:49:01.733 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.734 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.735 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.736 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 21:49:01.736 +08:00 [INF] 用户信息更新完成
2025-10-29 21:49:01.736 +08:00 [INF] 用户登录成功 - student
2025-10-29 21:49:01.736 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 21:49:01.736 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 21:49:01.736 +08:00 [INF] 成功: True
2025-10-29 21:49:01.736 +08:00 [INF] 消息: 登录成功
2025-10-29 21:49:01.736 +08:00 [INF] 用户对象是否为null: False
2025-10-29 21:49:01.736 +08:00 [INF] 用户 student 登录成功
2025-10-29 21:49:01.738 +08:00 [INF] 上次登录时间: 2025-10-29 21:44:32
2025-10-29 21:49:01.738 +08:00 [INF] 触发登录成功事件
2025-10-29 21:49:01.738 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 21:49:01.739 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 21:49:01.739 +08:00 [INF] 用户ID: 2
2025-10-29 21:49:01.739 +08:00 [INF] 用户对象是否为null: False
2025-10-29 21:49:01.750 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 21:49:01.750 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 21:49:01.751 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 21:49:01.758 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 21:49:01.761 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 21:49:01.764 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:01.764 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.764 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.764 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.764 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.764 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.764 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:49:01.764 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:49:01.764 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.764 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:01.764 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.764 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.768 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 21:49:01.793 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.795 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.795 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.795 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.795 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.795 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.795 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:49:01.795 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:49:01.798 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.801 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.802 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 21:49:01.802 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.802 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.805 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 21:49:01.807 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 21:49:01.807 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:49:01.816 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.818 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.818 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.818 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.818 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.818 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.818 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:49:01.818 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:49:01.818 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.818 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:01.818 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.818 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.819 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 21:49:01.821 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.821 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.821 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.821 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.821 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.821 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.821 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:49:01.821 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:49:01.823 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.832 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.832 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 21:49:01.832 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.832 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.837 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 21:49:01.839 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.839 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.839 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.839 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.839 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.839 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.839 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 21:49:01.840 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 21:49:01.841 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.844 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.844 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 21:49:01.844 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.844 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.852 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 21:49:01.852 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 21:49:01.852 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 21:49:01.852 +08:00 [INF] 用户ID: 2
2025-10-29 21:49:01.852 +08:00 [INF] 用户对象是否为null: False
2025-10-29 21:49:01.852 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 21:49:01.852 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 21:49:01.852 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 21:49:01.853 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 21:49:01.855 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.855 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.855 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.855 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.855 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.855 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.855 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 21:49:01.855 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 21:49:01.858 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.860 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.867 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.867 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 21:49:01.867 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.867 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.868 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 21:49:01.874 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 21:49:01.875 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 21:49:01.876 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 21:49:01.876 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 21:49:01.877 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 21:49:01.877 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:49:01.877 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 21:49:01.885 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.885 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.885 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.885 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.886 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.886 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.886 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 21:49:01.886 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 21:49:01.886 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.887 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.888 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.891 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.891 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:01.901 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.901 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 14ms reading results.
2025-10-29 21:49:01.901 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.901 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.901 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 21:49:01.902 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 21:49:01.906 +08:00 [INF] 开始加载学生考试结果
2025-10-29 21:49:01.907 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.907 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.907 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.907 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.907 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.907 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:49:01.908 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:49:01.908 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.908 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:01.908 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.908 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.908 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 21:49:01.929 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 21:49:01.930 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:01.931 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.931 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.931 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.931 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.931 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.931 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 21:49:01.931 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 21:49:01.931 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.931 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:01.931 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.931 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.932 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 21:49:01.932 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 21:49:01.933 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 21:49:01.940 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 21:49:01.940 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.940 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.940 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:01.940 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.940 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:01.940 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 21:49:01.941 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 21:49:01.941 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.941 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:01.941 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:01.941 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:01.954 +08:00 [INF] 所有页面加载完成
2025-10-29 21:49:01.954 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 21:49:01.954 +08:00 [INF] 当前用户: student (Student)
2025-10-29 21:49:01.954 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 21:49:01.954 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 21:49:01.954 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 21:49:01.954 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 21:49:01.954 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 21:49:01.954 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 21:49:01.954 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 21:49:01.954 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 21:49:01.954 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 21:49:01.954 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 21:49:01.954 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 21:49:01.954 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 21:49:01.954 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 21:49:01.954 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 21:49:01.955 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 21:49:01.991 +08:00 [INF] 关闭登录窗口
2025-10-29 21:49:01.996 +08:00 [INF] === 登录流程结束 ===
2025-10-29 21:49:02.023 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.024 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.024 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:02.024 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.024 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.024 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:49:02.024 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 21:49:02.024 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.024 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.024 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:02.024 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.024 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:02.025 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.025 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.025 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:02.025 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.026 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.026 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:49:02.026 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 21:49:02.026 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.026 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.026 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.026 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.026 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.026 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.026 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.026 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:02.026 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.026 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:02.026 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.026 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.026 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:02.026 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.026 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.027 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:49:02.027 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 21:49:02.027 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.027 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:02.027 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.027 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:02.027 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.027 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.027 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:02.027 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.027 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:02.027 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:49:02.027 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:02.027 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.027 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:02.027 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:02.027 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:05.305 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 21:49:05.305 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 21:49:05.307 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 21:49:05.307 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 21:49:05.308 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:49:05.308 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 21:49:05.316 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:05.317 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.317 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.317 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:05.317 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:05.317 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:05.317 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:05.317 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:05.318 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.318 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:05.318 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.318 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:05.319 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 21:49:05.319 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 21:49:05.319 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 21:49:05.319 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 21:49:05.321 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:05.321 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.321 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.321 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:05.321 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:05.321 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:05.321 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:49:05.322 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:49:05.322 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.322 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:05.322 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:05.322 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:05.322 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 21:49:05.322 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 21:49:06.254 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 21:49:06.255 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.255 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.255 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.255 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.255 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.255 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:06.255 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:06.255 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.255 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.255 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.255 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.255 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 21:49:06.255 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 21:49:06.255 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 21:49:06.256 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.256 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.256 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.256 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.256 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.256 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:49:06.256 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:49:06.256 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.256 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.256 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.256 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.256 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 21:49:06.256 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 21:49:06.257 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 21:49:06.257 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.258 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.258 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.258 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:06.258 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:06.258 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.258 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.258 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 21:49:06.258 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 21:49:06.258 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 21:49:06.258 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.258 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.258 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.258 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:49:06.258 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 21:49:06.258 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.258 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.258 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.258 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 21:49:06.258 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 21:49:06.259 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.259 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.259 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.259 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.259 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.259 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:06.259 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 21:49:06.259 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.259 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.259 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.259 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.269 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.271 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.272 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.273 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 21:49:06.273 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 21:49:06.289 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 21:49:06.295 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.295 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.295 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.295 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.295 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.295 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 21:49:06.295 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 21:49:06.298 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.302 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.302 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 21:49:06.302 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.302 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.304 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.304 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 21:49:06.307 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.315 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.315 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.316 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 21:49:06.316 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 21:49:06.319 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 21:49:06.321 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.321 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.321 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 21:49:06.322 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 21:49:06.323 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.323 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.323 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.323 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.323 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.323 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.324 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.324 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 21:49:06.324 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.324 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.324 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.324 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.324 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.324 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.324 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.325 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.325 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.325 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.325 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.325 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.325 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.325 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.325 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.325 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.325 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.325 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.325 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.325 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.325 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.325 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.325 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.325 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.325 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.325 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.325 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.325 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.325 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.326 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 21:49:06.326 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 21:49:06.326 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.326 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 21:49:06.327 +08:00 [DBG] Committing transaction.
2025-10-29 21:49:06.329 +08:00 [DBG] Committed transaction.
2025-10-29 21:49:06.330 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.330 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.330 +08:00 [DBG] Disposing transaction.
2025-10-29 21:49:06.331 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.331 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.331 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.331 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.331 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.331 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.331 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 21:49:06.331 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 21:49:06.332 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 21:49:06.332 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 21:49:06.332 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 21:49:06.332 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 21:49:06.332 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 21:49:06.342 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 21:49:06.346 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 21:49:06.346 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.346 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.346 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 21:49:06.346 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.346 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 21:49:06.346 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 21:49:06.347 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 21:49:06.349 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.363 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 21:49:06.364 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.364 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 16ms reading results.
2025-10-29 21:49:06.364 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:06.364 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 21:49:06.364 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 8
2025-10-29 21:49:13.401 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 21:49:14.612 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 21:49:14.613 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 21:49:14.614 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:30.604 +08:00 [DBG] Hosting starting
2025-10-29 22:20:30.624 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 22:20:30.626 +08:00 [INF] Hosting environment: Production
2025-10-29 22:20:30.626 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 22:20:30.626 +08:00 [DBG] Hosting started
2025-10-29 22:20:30.661 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 22:20:30.673 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 22:20:30.808 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:20:30.826 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:20:30.881 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:20:30.881 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:20:30.896 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 22:20:31.011 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:20:31.015 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:31.019 +08:00 [DBG] Created DbConnection. (3ms).
2025-10-29 22:20:31.022 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.023 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:31.024 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:20:31.025 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.028 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.030 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.032 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.035 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:20:31.037 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 22:20:31.038 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 22:20:31.039 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.041 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.043 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.051 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.052 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.053 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.053 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:31.053 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:20:31.053 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.054 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.054 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.054 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.054 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:20:31.054 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:20:31.054 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:20:31.054 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.054 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.054 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.054 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.054 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.054 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.059 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.059 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.059 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:31.059 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.059 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.059 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:20:31.059 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:20:31.061 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.062 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:20:31.062 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.062 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.067 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:20:31.068 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:31.069 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:20:31.069 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.069 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.069 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:31.069 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:20:31.069 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.069 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:20:31.069 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.069 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.069 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.070 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:31.070 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.070 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.070 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:20:31.070 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:20:31.070 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.070 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:31.070 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.070 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.070 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:20:31.085 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 22:20:31.137 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:31.154 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.154 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.154 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:31.155 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.155 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.155 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:20:31.155 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:20:31.156 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.156 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:31.156 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.156 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.156 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 22:20:31.158 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:31.159 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.159 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.159 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:31.159 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.159 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.159 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:20:31.159 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:20:31.159 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.159 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:31.159 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.159 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.159 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 22:20:31.160 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:31.160 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.161 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.161 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:31.161 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.161 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:31.161 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:20:31.161 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:20:31.161 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.161 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:31.161 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.161 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.162 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:20:31.163 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:31.163 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:31.174 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:20:38.503 +08:00 [INF] === 开始登录流程 ===
2025-10-29 22:20:38.503 +08:00 [INF] 用户名: student
2025-10-29 22:20:38.503 +08:00 [INF] 密码长度: 10
2025-10-29 22:20:38.503 +08:00 [INF] AuthService是否为null: False
2025-10-29 22:20:38.503 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 22:20:38.505 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 22:20:38.505 +08:00 [INF] 接收到的用户名: student
2025-10-29 22:20:38.505 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 22:20:38.505 +08:00 [INF] 开始查询用户
2025-10-29 22:20:38.505 +08:00 [INF] UserRepository是否为null: False
2025-10-29 22:20:38.505 +08:00 [INF] Context是否为null: False
2025-10-29 22:20:38.505 +08:00 [INF] 测试数据库连接...
2025-10-29 22:20:38.506 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:38.507 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:20:38.507 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.507 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.507 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.507 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.507 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 22:20:38.508 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 22:20:38.516 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:38.518 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:20:38.518 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:20:38.518 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.518 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.518 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.518 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.518 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.518 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:20:38.518 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:20:38.518 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.519 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:38.519 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.519 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.519 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 22:20:38.519 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 22:20:38.532 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:38.534 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.534 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.534 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.534 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.535 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.535 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:20:38.537 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:20:38.549 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.565 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.565 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 27ms reading results.
2025-10-29 22:20:38.565 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.565 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.565 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 22:20:38.566 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 22:20:38.566 +08:00 [INF] 用户是否激活: True
2025-10-29 22:20:38.566 +08:00 [INF] 登录失败次数: 0
2025-10-29 22:20:38.566 +08:00 [INF] 检查账户锁定状态
2025-10-29 22:20:38.568 +08:00 [INF] 开始验证密码
2025-10-29 22:20:38.568 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 22:20:38.568 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 22:20:38.568 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 22:20:38.568 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 22:20:38.568 +08:00 [INF] 密码哈希长度: 60
2025-10-29 22:20:38.568 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 22:20:38.795 +08:00 [INF] 密码验证结果: True
2025-10-29 22:20:38.795 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 22:20:38.797 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:20:38.799 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:20:38.806 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:38.808 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.811 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:20:38.827 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.827 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.828 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.828 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.828 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.828 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:20:38.829 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:20:38.832 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.832 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 22:20:38.832 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.832 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.834 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.834 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:20:38.835 +08:00 [INF] 用户信息更新完成
2025-10-29 22:20:38.835 +08:00 [INF] 用户登录成功 - student
2025-10-29 22:20:38.835 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 22:20:38.835 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 22:20:38.835 +08:00 [INF] 成功: True
2025-10-29 22:20:38.835 +08:00 [INF] 消息: 登录成功
2025-10-29 22:20:38.835 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:20:38.835 +08:00 [INF] 用户 student 登录成功
2025-10-29 22:20:38.836 +08:00 [INF] 上次登录时间: 2025-10-29 21:49:48
2025-10-29 22:20:38.836 +08:00 [INF] 触发登录成功事件
2025-10-29 22:20:38.837 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 22:20:38.837 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 22:20:38.837 +08:00 [INF] 用户ID: 2
2025-10-29 22:20:38.837 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:20:38.850 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 22:20:38.850 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 22:20:38.851 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 22:20:38.857 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 22:20:38.861 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 22:20:38.864 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:38.864 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.864 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.864 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.864 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.864 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.864 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:20:38.864 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:20:38.864 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.864 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:38.864 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.864 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.868 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 22:20:38.893 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:38.896 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.896 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.896 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.896 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.896 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.896 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:20:38.896 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:20:38.899 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.902 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.902 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.902 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.902 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.902 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.902 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.902 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:20:38.902 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.902 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.906 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 22:20:38.908 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:20:38.908 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:20:38.917 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:38.918 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.918 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.918 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.918 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.919 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.919 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:20:38.919 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:20:38.919 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.919 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:38.919 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.919 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.920 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 22:20:38.922 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:38.922 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.922 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.922 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.922 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.923 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.923 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:20:38.923 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:20:38.924 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.934 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.934 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:20:38.934 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.934 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.939 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 22:20:38.941 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:38.941 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.941 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.941 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.941 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.941 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.941 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:20:38.941 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:20:38.942 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.945 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.945 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:20:38.945 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.945 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.954 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 22:20:38.954 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 22:20:38.954 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 22:20:38.954 +08:00 [INF] 用户ID: 2
2025-10-29 22:20:38.954 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:20:38.954 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 22:20:38.954 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 22:20:38.954 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 22:20:38.955 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 22:20:38.957 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:38.958 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.958 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.958 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.958 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.958 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.958 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:20:38.958 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:20:38.961 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.963 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.970 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.970 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:20:38.970 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.970 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:38.971 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 22:20:38.978 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 22:20:38.978 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 22:20:38.979 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 22:20:38.979 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 22:20:38.980 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 22:20:38.980 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:20:38.980 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:20:38.989 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:38.990 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.990 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:38.990 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:38.990 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.990 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:38.990 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:20:38.990 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:20:38.991 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.991 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.991 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.993 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.996 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:38.996 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.006 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.006 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 16ms reading results.
2025-10-29 22:20:39.006 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.006 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.006 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 22:20:39.007 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 22:20:39.012 +08:00 [INF] 开始加载学生考试结果
2025-10-29 22:20:39.014 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.014 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.014 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.014 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.014 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.014 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:20:39.014 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:20:39.014 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.014 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.014 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.014 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.014 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 22:20:39.021 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 22:20:39.023 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:39.023 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.023 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.023 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.023 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.023 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.037 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:20:39.037 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:20:39.037 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.037 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.037 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.037 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.038 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 22:20:39.039 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 22:20:39.040 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 22:20:39.046 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:20:39.048 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.049 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.049 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.049 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.049 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.049 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:20:39.049 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:20:39.049 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.049 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.049 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.049 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.064 +08:00 [INF] 所有页面加载完成
2025-10-29 22:20:39.064 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 22:20:39.065 +08:00 [INF] 当前用户: student (Student)
2025-10-29 22:20:39.065 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 22:20:39.065 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 22:20:39.065 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 22:20:39.065 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 22:20:39.065 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 22:20:39.065 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 22:20:39.065 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 22:20:39.065 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 22:20:39.065 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 22:20:39.065 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 22:20:39.065 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 22:20:39.065 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 22:20:39.065 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 22:20:39.065 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 22:20:39.065 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 22:20:39.105 +08:00 [INF] 关闭登录窗口
2025-10-29 22:20:39.111 +08:00 [INF] === 登录流程结束 ===
2025-10-29 22:20:39.140 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.141 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.141 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.141 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.141 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.141 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:20:39.141 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:20:39.141 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.141 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.141 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.141 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.141 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.142 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.142 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.142 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.143 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.143 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.143 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:20:39.143 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:20:39.143 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.143 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.143 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.143 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.143 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.143 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.143 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.143 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.143 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.143 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.143 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.143 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.143 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.143 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.143 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.143 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:20:39.144 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:20:39.144 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.144 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.144 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.144 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:39.144 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.144 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.144 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:39.144 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.144 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:39.144 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:20:39.144 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:39.144 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.144 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:39.144 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:39.144 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:41.774 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 22:20:41.775 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 22:20:41.776 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:20:41.777 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 22:20:41.777 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:20:41.777 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:20:41.785 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:41.785 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.785 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.785 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:41.785 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:41.785 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:41.785 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:41.786 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:41.786 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.786 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:41.786 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.786 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:41.787 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:20:41.787 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:20:41.787 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:20:41.787 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 22:20:41.789 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:41.789 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.789 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.789 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:41.789 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:41.789 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:41.789 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:20:41.789 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:20:41.789 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.789 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:41.789 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:41.789 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:41.789 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:20:41.789 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:20:42.684 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:20:42.685 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.685 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.685 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.685 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.685 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.685 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:42.685 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:42.685 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.685 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.685 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.685 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.685 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:20:42.685 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:20:42.685 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:20:42.685 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.686 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.686 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.686 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.686 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.686 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:20:42.686 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:20:42.686 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.686 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.686 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.686 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.686 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:20:42.686 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:20:42.687 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:20:42.687 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.687 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.687 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.687 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.687 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.687 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:42.688 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:42.688 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.688 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.688 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.688 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.688 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:20:42.688 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:20:42.688 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:20:42.688 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.688 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.688 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.688 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.688 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.688 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:20:42.688 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:20:42.688 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.688 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.688 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.688 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.688 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:20:42.688 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:20:42.689 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.689 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.689 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.689 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.689 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.689 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:42.689 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:20:42.689 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.689 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.689 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.689 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.699 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.701 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.702 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.702 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:20:42.702 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:20:42.716 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:20:42.721 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.721 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.721 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.721 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.722 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.722 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:20:42.722 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:20:42.725 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.728 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.728 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 5ms reading results.
2025-10-29 22:20:42.728 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.728 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.730 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.730 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:20:42.732 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.741 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.741 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.741 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.742 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:20:42.742 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:20:42.744 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:20:42.746 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.746 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.747 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 22:20:42.748 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 22:20:42.748 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.748 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.748 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.748 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.748 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.749 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.749 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.749 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.749 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.749 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.749 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.750 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.750 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.750 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.750 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.750 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.750 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.750 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.750 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.750 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.750 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.750 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.750 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.750 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.750 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.750 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.750 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.750 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:20:42.750 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:20:42.750 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.750 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:20:42.751 +08:00 [DBG] Committing transaction.
2025-10-29 22:20:42.754 +08:00 [DBG] Committed transaction.
2025-10-29 22:20:42.754 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.754 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.755 +08:00 [DBG] Disposing transaction.
2025-10-29 22:20:42.755 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.755 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.755 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.755 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.755 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.755 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.755 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 22:20:42.756 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 22:20:42.756 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:20:42.756 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:20:42.756 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 22:20:42.756 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 22:20:42.757 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 22:20:42.766 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 22:20:42.769 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:20:42.769 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.769 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.769 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:20:42.769 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.769 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:20:42.769 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:20:42.770 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:20:42.772 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:20:42.774 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.774 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:20:42.774 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:42.774 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:20:42.774 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 11
2025-10-29 22:20:57.970 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 22:20:59.161 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:20:59.162 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:20:59.163 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.104 +08:00 [DBG] Hosting starting
2025-10-29 22:39:50.127 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 22:39:50.129 +08:00 [INF] Hosting environment: Production
2025-10-29 22:39:50.130 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 22:39:50.130 +08:00 [DBG] Hosting started
2025-10-29 22:39:50.171 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 22:39:50.182 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 22:39:50.318 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:39:50.335 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:39:50.386 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:39:50.387 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:39:50.401 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 22:39:50.510 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:39:50.513 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:39:50.517 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 22:39:50.520 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.521 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:39:50.522 +08:00 [DBG] Created DbConnection. (1ms).
2025-10-29 22:39:50.523 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.527 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.529 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.531 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.534 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:39:50.536 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 22:39:50.537 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 22:39:50.538 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.541 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.543 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.552 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.553 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.554 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.555 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:39:50.555 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:39:50.555 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.555 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.555 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.555 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.556 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:39:50.556 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:39:50.556 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:39:50.556 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.556 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.556 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.556 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.556 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.556 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.561 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.561 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.561 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:39:50.561 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.562 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.562 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:39:50.562 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:39:50.564 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.564 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:39:50.564 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.564 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.570 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:39:50.571 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.571 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:39:50.571 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:39:50.571 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.571 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.571 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.571 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.571 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:39:50.571 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:39:50.571 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.572 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.572 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:39:50.572 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:39:50.572 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.572 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:39:50.572 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:39:50.572 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.572 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:39:50.572 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:39:50.572 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:39:50.572 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.572 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.572 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:39:50.587 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 22:39:50.640 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:39:50.649 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.649 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.649 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:39:50.649 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.649 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.649 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:39:50.649 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:39:50.650 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.650 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:39:50.650 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.650 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.650 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 22:39:50.652 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:39:50.652 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.652 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.652 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:39:50.652 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.652 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.652 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:39:50.652 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:39:50.652 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.652 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:39:50.652 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.652 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.652 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 22:39:50.653 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:39:50.654 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.654 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.654 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:39:50.654 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.654 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:39:50.654 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:39:50.654 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:39:50.654 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.654 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:39:50.654 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.654 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.654 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:39:50.655 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:39:50.655 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:39:50.659 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:40:12.577 +08:00 [INF] === 开始登录流程 ===
2025-10-29 22:40:12.578 +08:00 [INF] 用户名: student
2025-10-29 22:40:12.578 +08:00 [INF] 密码长度: 10
2025-10-29 22:40:12.578 +08:00 [INF] AuthService是否为null: False
2025-10-29 22:40:12.578 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 22:40:12.580 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 22:40:12.580 +08:00 [INF] 接收到的用户名: student
2025-10-29 22:40:12.580 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 22:40:12.580 +08:00 [INF] 开始查询用户
2025-10-29 22:40:12.580 +08:00 [INF] UserRepository是否为null: False
2025-10-29 22:40:12.580 +08:00 [INF] Context是否为null: False
2025-10-29 22:40:12.580 +08:00 [INF] 测试数据库连接...
2025-10-29 22:40:12.581 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:40:12.581 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:40:12.581 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.582 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.582 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.582 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.582 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 22:40:12.583 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 22:40:12.593 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:12.595 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:40:12.595 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:40:12.595 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.595 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.595 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.595 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.595 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.595 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:40:12.596 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:40:12.596 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.596 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:12.596 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.596 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.596 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 22:40:12.597 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 22:40:12.612 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:12.615 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.615 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.615 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.615 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.616 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.616 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:40:12.618 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:40:12.629 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.644 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.644 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 25ms reading results.
2025-10-29 22:40:12.644 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.644 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.644 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 22:40:12.645 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 22:40:12.645 +08:00 [INF] 用户是否激活: True
2025-10-29 22:40:12.645 +08:00 [INF] 登录失败次数: 0
2025-10-29 22:40:12.645 +08:00 [INF] 检查账户锁定状态
2025-10-29 22:40:12.647 +08:00 [INF] 开始验证密码
2025-10-29 22:40:12.647 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 22:40:12.647 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 22:40:12.647 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 22:40:12.647 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 22:40:12.647 +08:00 [INF] 密码哈希长度: 60
2025-10-29 22:40:12.647 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 22:40:12.867 +08:00 [INF] 密码验证结果: True
2025-10-29 22:40:12.867 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 22:40:12.868 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:40:12.869 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:40:12.875 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:12.878 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.881 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:40:12.897 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.897 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.898 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.898 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.898 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.898 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:40:12.898 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:40:12.902 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.902 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 22:40:12.902 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.902 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.904 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.904 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:40:12.905 +08:00 [INF] 用户信息更新完成
2025-10-29 22:40:12.905 +08:00 [INF] 用户登录成功 - student
2025-10-29 22:40:12.905 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 22:40:12.905 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 22:40:12.905 +08:00 [INF] 成功: True
2025-10-29 22:40:12.905 +08:00 [INF] 消息: 登录成功
2025-10-29 22:40:12.905 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:40:12.905 +08:00 [INF] 用户 student 登录成功
2025-10-29 22:40:12.906 +08:00 [INF] 上次登录时间: 2025-10-29 22:31:01
2025-10-29 22:40:12.906 +08:00 [INF] 触发登录成功事件
2025-10-29 22:40:12.907 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 22:40:12.907 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 22:40:12.907 +08:00 [INF] 用户ID: 2
2025-10-29 22:40:12.907 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:40:12.919 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 22:40:12.919 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 22:40:12.920 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 22:40:12.926 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 22:40:12.930 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 22:40:12.932 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:12.933 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.933 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.933 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.933 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.933 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.933 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:40:12.933 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:40:12.933 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.933 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:12.933 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.933 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.937 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 22:40:12.964 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:12.966 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.967 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.967 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.967 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.967 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.967 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:40:12.967 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:40:12.970 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.973 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.973 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.973 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.973 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.973 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:12.973 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.973 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:40:12.973 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.974 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.978 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 22:40:12.980 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:40:12.980 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:40:12.989 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:12.991 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.991 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.991 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.991 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.991 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.991 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:40:12.992 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:40:12.992 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.992 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:12.992 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.992 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:12.993 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 22:40:12.995 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:12.995 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.995 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:12.995 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:12.995 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.995 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:12.995 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:40:12.995 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:40:12.997 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.006 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.006 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:40:13.006 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.006 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.011 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 22:40:13.012 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:13.013 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.013 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.013 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.013 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.013 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.013 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:40:13.013 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:40:13.014 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.017 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.017 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:40:13.017 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.017 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.025 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 22:40:13.025 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 22:40:13.025 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 22:40:13.025 +08:00 [INF] 用户ID: 2
2025-10-29 22:40:13.025 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:40:13.025 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 22:40:13.025 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 22:40:13.025 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 22:40:13.027 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 22:40:13.028 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:13.029 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.029 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.029 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.029 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.029 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.029 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:40:13.029 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:40:13.032 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.033 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.041 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.041 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:40:13.041 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.041 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.041 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 22:40:13.048 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 22:40:13.048 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 22:40:13.049 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 22:40:13.050 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 22:40:13.050 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 22:40:13.050 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:40:13.050 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:40:13.059 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:13.059 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.059 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.059 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.059 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.059 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.059 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:40:13.060 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:40:13.074 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.074 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.075 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.076 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.080 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.089 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.089 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.089 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.089 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.089 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.089 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.090 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.090 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 17ms reading results.
2025-10-29 22:40:13.090 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.090 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.090 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 22:40:13.091 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 22:40:13.096 +08:00 [INF] 开始加载学生考试结果
2025-10-29 22:40:13.097 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.097 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.097 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.097 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.097 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.097 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:40:13.098 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:40:13.098 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.098 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.098 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.098 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.098 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 22:40:13.106 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 22:40:13.107 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:13.107 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.107 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.108 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.108 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.108 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.108 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:40:13.108 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:40:13.108 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.108 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.108 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.108 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.108 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 22:40:13.109 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 22:40:13.109 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 22:40:13.117 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:40:13.117 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.117 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.117 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.117 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.117 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.117 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:40:13.117 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:40:13.117 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.117 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.117 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.117 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.131 +08:00 [INF] 所有页面加载完成
2025-10-29 22:40:13.132 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 22:40:13.132 +08:00 [INF] 当前用户: student (Student)
2025-10-29 22:40:13.132 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 22:40:13.132 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 22:40:13.132 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 22:40:13.132 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 22:40:13.132 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 22:40:13.132 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 22:40:13.132 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 22:40:13.132 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 22:40:13.132 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 22:40:13.132 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 22:40:13.132 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 22:40:13.132 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 22:40:13.132 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 22:40:13.132 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 22:40:13.132 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 22:40:13.176 +08:00 [INF] 关闭登录窗口
2025-10-29 22:40:13.182 +08:00 [INF] === 登录流程结束 ===
2025-10-29 22:40:13.234 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.234 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.234 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.234 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.234 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.234 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:40:13.234 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:40:13.234 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.234 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.234 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.234 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.235 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.236 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.236 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.236 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.236 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.236 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.236 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:40:13.236 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:40:13.236 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.237 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.237 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.237 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.237 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.237 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.237 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.237 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.237 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.237 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.237 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.237 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.237 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.237 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.237 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.237 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:40:13.237 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:40:13.237 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.237 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.238 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.238 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:13.238 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.238 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.238 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:13.238 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.238 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:13.238 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:40:13.238 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:13.238 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.238 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:13.238 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:13.238 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:16.299 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 22:40:16.299 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 22:40:16.301 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:40:16.302 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 22:40:16.302 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:40:16.303 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:40:16.311 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:16.312 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.312 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.312 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:16.312 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:16.312 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:16.312 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:16.312 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:16.313 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.313 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:16.313 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.313 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:16.314 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:40:16.314 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:40:16.314 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:40:16.314 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 22:40:16.316 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:16.317 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.317 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.317 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:16.317 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:16.317 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:16.317 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:40:16.317 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:40:16.317 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.317 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:16.317 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:16.317 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:16.317 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:40:16.317 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:40:17.226 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:40:17.227 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.227 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.227 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.227 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.227 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.227 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:17.227 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:17.227 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.227 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.227 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.227 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.227 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:40:17.227 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:40:17.227 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:40:17.227 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.227 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.228 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.228 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.228 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.228 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:40:17.228 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:40:17.228 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.228 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.228 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.228 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.228 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:40:17.228 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:40:17.229 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:40:17.230 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.230 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.230 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.230 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:17.230 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:17.230 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.230 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.230 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:40:17.230 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:40:17.230 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:40:17.230 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.230 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.230 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.230 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:40:17.230 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:40:17.230 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.230 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.231 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.231 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.231 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:40:17.231 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:40:17.231 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.231 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.231 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.231 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.231 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.231 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:17.231 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:40:17.231 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.231 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.231 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.231 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.241 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.243 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.244 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.244 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:40:17.244 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:40:17.257 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:40:17.263 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.264 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.264 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.264 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.264 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.264 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:40:17.264 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:40:17.268 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.271 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.271 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:40:17.271 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.271 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.272 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.272 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:40:17.275 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.283 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.284 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.285 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:40:17.285 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:40:17.286 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:40:17.288 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.288 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.289 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 22:40:17.290 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 22:40:17.290 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.290 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.290 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.290 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.291 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.291 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.291 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.291 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.292 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.292 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.292 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.292 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.292 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.292 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.292 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.292 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.292 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.292 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.292 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.292 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.292 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.292 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.292 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.292 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.292 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.292 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.293 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.293 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.293 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.293 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.293 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.293 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.293 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.293 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.293 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.293 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.293 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.293 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.293 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.293 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.293 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.293 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.293 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.293 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.293 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:40:17.293 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:40:17.293 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.293 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:40:17.294 +08:00 [DBG] Committing transaction.
2025-10-29 22:40:17.296 +08:00 [DBG] Committed transaction.
2025-10-29 22:40:17.297 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.297 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.297 +08:00 [DBG] Disposing transaction.
2025-10-29 22:40:17.298 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.298 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.298 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.298 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.298 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.298 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.298 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 22:40:17.298 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 22:40:17.299 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:40:17.299 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:40:17.299 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 22:40:17.310 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 22:40:17.310 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 22:40:17.319 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 22:40:17.322 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:40:17.322 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.322 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.322 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:40:17.322 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.322 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:40:17.322 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:40:17.323 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:40:17.324 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:40:17.327 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.327 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 22:40:17.327 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:17.327 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:40:17.327 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 15
2025-10-29 22:40:23.058 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 22:40:24.358 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:40:24.359 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:40:24.359 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:14.693 +08:00 [DBG] Hosting starting
2025-10-29 22:44:14.712 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 22:44:14.714 +08:00 [INF] Hosting environment: Production
2025-10-29 22:44:14.714 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 22:44:14.714 +08:00 [DBG] Hosting started
2025-10-29 22:44:14.747 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 22:44:14.758 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 22:44:14.887 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:44:14.906 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:44:14.975 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:44:14.976 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:44:14.992 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 22:44:15.109 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:44:15.113 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:15.116 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 22:44:15.118 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.119 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:15.120 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:44:15.121 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.124 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.126 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.127 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.131 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:44:15.133 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 22:44:15.133 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 22:44:15.134 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.139 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.141 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.149 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.150 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.151 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.152 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:15.152 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:44:15.152 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.152 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.152 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.152 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.152 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:44:15.152 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:44:15.152 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:44:15.152 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.152 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.152 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.152 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.152 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.152 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.157 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.157 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.157 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:15.157 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.157 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.157 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:44:15.158 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:44:15.159 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.160 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:44:15.160 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.160 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.165 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:44:15.166 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.166 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:15.166 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:44:15.166 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:44:15.167 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.167 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.167 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:15.167 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:44:15.167 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.167 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:44:15.167 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:15.167 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.167 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:44:15.167 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:44:15.167 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:15.167 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.167 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.168 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:44:15.182 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 22:44:15.231 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:15.239 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.239 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.239 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:15.239 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.239 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.239 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:44:15.239 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:44:15.240 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.240 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:15.240 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.240 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.240 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 22:44:15.241 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:15.241 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.241 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.242 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:15.242 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.242 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.242 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:44:15.242 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:44:15.242 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.242 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:15.242 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.242 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.242 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 22:44:15.243 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:15.243 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.243 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.243 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:15.243 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.243 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:15.243 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:44:15.243 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:44:15.243 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.243 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:15.243 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.243 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.243 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:44:15.244 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:15.244 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:15.247 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:44:23.071 +08:00 [INF] === 开始登录流程 ===
2025-10-29 22:44:23.071 +08:00 [INF] 用户名: student
2025-10-29 22:44:23.071 +08:00 [INF] 密码长度: 10
2025-10-29 22:44:23.071 +08:00 [INF] AuthService是否为null: False
2025-10-29 22:44:23.071 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 22:44:23.073 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 22:44:23.073 +08:00 [INF] 接收到的用户名: student
2025-10-29 22:44:23.073 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 22:44:23.073 +08:00 [INF] 开始查询用户
2025-10-29 22:44:23.073 +08:00 [INF] UserRepository是否为null: False
2025-10-29 22:44:23.073 +08:00 [INF] Context是否为null: False
2025-10-29 22:44:23.073 +08:00 [INF] 测试数据库连接...
2025-10-29 22:44:23.075 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:23.075 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:44:23.075 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.075 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.075 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.075 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.075 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 22:44:23.076 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 22:44:23.085 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:23.087 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:44:23.087 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:44:23.087 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.087 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.087 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.087 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.087 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.087 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:44:23.087 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:44:23.088 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.088 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.088 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.088 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.088 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 22:44:23.089 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 22:44:23.102 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:23.104 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.104 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.104 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.105 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.105 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.105 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:44:23.107 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:44:23.118 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.131 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.131 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 23ms reading results.
2025-10-29 22:44:23.131 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.131 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.131 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 22:44:23.132 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 22:44:23.132 +08:00 [INF] 用户是否激活: True
2025-10-29 22:44:23.132 +08:00 [INF] 登录失败次数: 0
2025-10-29 22:44:23.132 +08:00 [INF] 检查账户锁定状态
2025-10-29 22:44:23.134 +08:00 [INF] 开始验证密码
2025-10-29 22:44:23.134 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 22:44:23.134 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 22:44:23.134 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 22:44:23.134 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 22:44:23.134 +08:00 [INF] 密码哈希长度: 60
2025-10-29 22:44:23.134 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 22:44:23.358 +08:00 [INF] 密码验证结果: True
2025-10-29 22:44:23.358 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 22:44:23.359 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:44:23.360 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:44:23.366 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:23.371 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.374 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:44:23.390 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.390 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.391 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.391 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.391 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.391 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:44:23.392 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:44:23.395 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.395 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 22:44:23.395 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.395 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.397 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.398 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:44:23.398 +08:00 [INF] 用户信息更新完成
2025-10-29 22:44:23.398 +08:00 [INF] 用户登录成功 - student
2025-10-29 22:44:23.398 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 22:44:23.398 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 22:44:23.399 +08:00 [INF] 成功: True
2025-10-29 22:44:23.399 +08:00 [INF] 消息: 登录成功
2025-10-29 22:44:23.399 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:44:23.399 +08:00 [INF] 用户 student 登录成功
2025-10-29 22:44:23.400 +08:00 [INF] 上次登录时间: 2025-10-29 22:41:25
2025-10-29 22:44:23.400 +08:00 [INF] 触发登录成功事件
2025-10-29 22:44:23.401 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 22:44:23.401 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 22:44:23.401 +08:00 [INF] 用户ID: 2
2025-10-29 22:44:23.401 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:44:23.414 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 22:44:23.414 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 22:44:23.415 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 22:44:23.421 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 22:44:23.425 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 22:44:23.427 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:23.428 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.428 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.428 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.428 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.428 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.428 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:44:23.428 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:44:23.428 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.428 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.428 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.428 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.431 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 22:44:23.456 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.458 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.459 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.459 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.459 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.459 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.459 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:44:23.459 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:44:23.461 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.465 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.465 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:44:23.465 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.465 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.468 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 22:44:23.471 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:44:23.471 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:44:23.479 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.481 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.481 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.481 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.481 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.481 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.481 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:44:23.481 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:44:23.481 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.481 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.481 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.481 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.482 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 22:44:23.484 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.484 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.484 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.484 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.484 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.484 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.484 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:44:23.484 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:44:23.486 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.495 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.495 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.495 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.495 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.495 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.496 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.496 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:44:23.496 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.496 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.501 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 22:44:23.502 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.503 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.503 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.503 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.503 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.503 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.503 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:44:23.503 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:44:23.504 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.507 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.507 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:44:23.507 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.507 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.515 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 22:44:23.516 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 22:44:23.516 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 22:44:23.516 +08:00 [INF] 用户ID: 2
2025-10-29 22:44:23.516 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:44:23.516 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 22:44:23.516 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 22:44:23.516 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 22:44:23.517 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 22:44:23.519 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.519 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.519 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.519 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.519 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.519 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.519 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:44:23.520 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:44:23.523 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.524 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.524 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.525 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.532 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.532 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 22:44:23.532 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.532 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.533 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 22:44:23.540 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 22:44:23.541 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 22:44:23.541 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 22:44:23.542 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 22:44:23.543 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 22:44:23.543 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:44:23.543 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:44:23.552 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.552 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.552 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.552 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.552 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.552 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.552 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:44:23.553 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:44:23.553 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.553 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.554 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.555 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.558 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.558 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.567 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.567 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.567 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.567 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.568 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.568 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 22:44:23.568 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.568 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.568 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 22:44:23.569 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 22:44:23.573 +08:00 [INF] 开始加载学生考试结果
2025-10-29 22:44:23.574 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.574 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.575 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.575 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.575 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.575 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:44:23.575 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:44:23.575 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.575 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.575 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.575 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.575 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 22:44:23.596 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 22:44:23.598 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:23.598 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.598 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.598 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.598 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.599 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.599 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:44:23.599 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:44:23.599 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.599 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.599 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.599 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.599 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 22:44:23.600 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 22:44:23.601 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 22:44:23.606 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:44:23.608 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.608 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.608 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.608 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.608 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.608 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:44:23.609 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:44:23.609 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.609 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.609 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.609 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.623 +08:00 [INF] 所有页面加载完成
2025-10-29 22:44:23.624 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 22:44:23.624 +08:00 [INF] 当前用户: student (Student)
2025-10-29 22:44:23.624 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 22:44:23.624 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 22:44:23.624 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 22:44:23.624 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 22:44:23.624 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 22:44:23.624 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 22:44:23.624 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 22:44:23.624 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 22:44:23.624 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 22:44:23.624 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 22:44:23.624 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 22:44:23.624 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 22:44:23.624 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 22:44:23.624 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 22:44:23.624 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 22:44:23.664 +08:00 [INF] 关闭登录窗口
2025-10-29 22:44:23.669 +08:00 [INF] === 登录流程结束 ===
2025-10-29 22:44:23.696 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.696 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.696 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.696 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.696 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.697 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:44:23.697 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:44:23.697 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.697 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.697 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.697 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.697 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.698 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.698 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.698 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.698 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.698 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.698 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:44:23.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:44:23.698 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.698 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.698 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.698 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.698 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.698 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.698 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.698 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.698 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.698 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.699 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.699 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.699 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.699 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.699 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.699 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:44:23.699 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:44:23.699 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.699 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.699 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.699 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:23.699 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.699 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.699 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:23.699 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.699 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:23.699 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:44:23.699 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.699 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:23.700 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.700 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:23.700 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:23.700 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:26.241 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 22:44:26.241 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 22:44:26.242 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:44:26.243 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 22:44:26.243 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:44:26.244 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:44:26.251 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:26.251 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.251 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.251 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:26.251 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:26.251 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:26.252 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:26.252 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.252 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:26.253 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.253 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:26.253 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.253 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:26.253 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:44:26.253 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:44:26.253 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:44:26.253 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 22:44:26.255 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:26.255 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.256 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.256 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:26.256 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:26.256 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:26.256 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:44:26.256 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:44:26.256 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.256 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:26.256 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:26.256 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:26.256 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:44:26.256 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:44:27.223 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:44:27.223 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.223 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.223 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.223 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.223 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.223 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:27.224 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:27.224 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.224 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.224 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.224 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.224 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:44:27.224 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:44:27.224 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:44:27.224 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.224 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.224 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.224 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.224 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.224 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:44:27.224 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:44:27.224 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.224 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.224 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.224 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.224 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:44:27.224 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:44:27.226 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:44:27.226 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.226 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.226 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.226 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.226 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.226 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:27.226 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:27.226 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.226 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.226 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.226 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.226 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:44:27.226 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:44:27.226 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:44:27.227 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.227 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.227 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.227 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.227 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.227 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:44:27.227 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:44:27.227 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.227 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.227 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.227 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.227 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:44:27.227 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:44:27.227 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.227 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.227 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.227 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.227 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.227 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:27.228 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:44:27.228 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.228 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.228 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.228 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.238 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.239 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.240 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.240 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:44:27.240 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:44:27.254 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:44:27.260 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.260 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.260 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.260 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.260 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.260 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:44:27.260 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:44:27.263 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.267 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.267 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:44:27.267 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.267 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.268 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.268 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:44:27.270 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.278 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.279 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.279 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.279 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.279 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.280 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:44:27.280 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:44:27.282 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:44:27.283 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.283 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.284 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 22:44:27.285 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 22:44:27.285 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.285 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.285 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.285 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.286 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.286 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.286 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.286 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.286 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.287 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.287 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.287 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.287 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.287 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.287 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.287 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.287 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.287 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.287 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.287 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.287 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.287 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.287 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.287 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.287 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.287 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.287 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:44:27.287 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:27.287 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.287 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:27.288 +08:00 [DBG] Committing transaction.
2025-10-29 22:44:27.290 +08:00 [DBG] Committed transaction.
2025-10-29 22:44:27.291 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.291 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.291 +08:00 [DBG] Disposing transaction.
2025-10-29 22:44:27.291 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.292 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.292 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.292 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.292 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.292 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.292 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 22:44:27.292 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 22:44:27.292 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:44:27.292 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:44:27.293 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 22:44:27.293 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 22:44:27.293 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 22:44:27.302 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 22:44:27.305 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:27.305 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.305 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.305 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:27.305 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.305 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:27.306 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:44:27.306 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:44:27.308 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:27.311 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.311 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:44:27.311 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:27.311 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:27.311 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 17
2025-10-29 22:44:29.502 +08:00 [DBG] Compiling query expression: 
'DbSet<AnswerRecord>()
    .FirstOrDefault(ar => ar.RecordId == __recordId_0 && ar.QuestionId == __questionId_1)'
2025-10-29 22:44:29.506 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AnswerRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<AnswerRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AnswerRecord.AnswerTime (DateTime?), 1], [Property: AnswerRecord.ClientInfoJson (string), 2], [Property: AnswerRecord.Comment (string), 3], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 4], [Property: AnswerRecord.GradeTime (DateTime?), 5], [Property: AnswerRecord.GraderId (int?) FK Index, 6], [Property: AnswerRecord.IsCorrect (bool) Required, 7], [Property: AnswerRecord.IsGraded (bool) Required, 8], [Property: AnswerRecord.QuestionId (int) Required FK Index, 9], [Property: AnswerRecord.RecordId (int) Required FK Index, 10], [Property: AnswerRecord.RubricScoresJson (string), 11], [Property: AnswerRecord.Score (decimal) Required, 12], [Property: AnswerRecord.UserAnswer (string), 13] }
            SELECT TOP(1) a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer
            FROM AnswerRecords AS a
            WHERE (a.RecordId == @__recordId_0) && (a.QuestionId == @__questionId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AnswerRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:29.506 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.506 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.506 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:29.506 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:29.506 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:29.506 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32), @__questionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer"
FROM "AnswerRecords" AS "a"
WHERE "a"."RecordId" = @__recordId_0 AND "a"."QuestionId" = @__questionId_1
LIMIT 1
2025-10-29 22:44:29.507 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32), @__questionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer"
FROM "AnswerRecords" AS "a"
WHERE "a"."RecordId" = @__recordId_0 AND "a"."QuestionId" = @__questionId_1
LIMIT 1
2025-10-29 22:44:29.507 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.507 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:29.507 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.507 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:29.507 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:44:29.507 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:44:29.508 +08:00 [DBG] The unchanged property 'AnswerRecord.AnswerTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:29.508 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:29.508 +08:00 [DBG] The unchanged property 'AnswerRecord.UserAnswer' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:29.509 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:44:29.509 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.509 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.509 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:29.509 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:29.509 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:29.509 +08:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AnswerRecords" SET "AnswerTime" = @p0, "UserAnswer" = @p1
WHERE "AnswerId" = @p2
RETURNING 1;
2025-10-29 22:44:29.509 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AnswerRecords" SET "AnswerTime" = @p0, "UserAnswer" = @p1
WHERE "AnswerId" = @p2
RETURNING 1;
2025-10-29 22:44:29.511 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.511 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:44:29.511 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:29.511 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:29.512 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:29.512 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:44:29.512 +08:00 [DBG] 保存答案成功，记录ID: 17，题目ID: 51
2025-10-29 22:44:30.364 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.364 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.364 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:30.364 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:30.364 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:30.364 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32), @__questionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer"
FROM "AnswerRecords" AS "a"
WHERE "a"."RecordId" = @__recordId_0 AND "a"."QuestionId" = @__questionId_1
LIMIT 1
2025-10-29 22:44:30.365 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32), @__questionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer"
FROM "AnswerRecords" AS "a"
WHERE "a"."RecordId" = @__recordId_0 AND "a"."QuestionId" = @__questionId_1
LIMIT 1
2025-10-29 22:44:30.365 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.365 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:30.365 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.365 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:30.365 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:44:30.365 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:44:30.365 +08:00 [DBG] The unchanged property 'AnswerRecord.AnswerTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:30.365 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:30.365 +08:00 [DBG] The unchanged property 'AnswerRecord.UserAnswer' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:30.365 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:44:30.366 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.366 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.366 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:30.366 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:30.366 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:30.366 +08:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AnswerRecords" SET "AnswerTime" = @p0, "UserAnswer" = @p1
WHERE "AnswerId" = @p2
RETURNING 1;
2025-10-29 22:44:30.366 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AnswerRecords" SET "AnswerTime" = @p0, "UserAnswer" = @p1
WHERE "AnswerId" = @p2
RETURNING 1;
2025-10-29 22:44:30.368 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.368 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 2ms reading results.
2025-10-29 22:44:30.368 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:30.368 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:30.368 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:30.368 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:44:30.368 +08:00 [DBG] 保存答案成功，记录ID: 17，题目ID: 32
2025-10-29 22:44:57.982 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.RecordId == __recordId_0)'
2025-10-29 22:44:57.984 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE e.RecordId == @__recordId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:44:57.984 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.984 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.984 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:57.984 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:57.984 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:57.984 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 22:44:57.985 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 22:44:57.985 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.985 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:44:57.985 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.985 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:57.985 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:44:57.985 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:44:57.985 +08:00 [DBG] The unchanged property 'ExamRecord.RemainingTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:44:57.985 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:57.985 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:44:57.985 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.985 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.985 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:44:57.985 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:57.985 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:44:57.985 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 22:44:57.985 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 22:44:57.988 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.988 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 22:44:57.988 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:44:57.988 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:44:57.988 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:44:57.988 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:45:07.908 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 22:45:07.909 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 22:45:07.909 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:45:07.909 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.909 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.909 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:07.909 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:07.909 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:07.909 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:07.909 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:07.909 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.909 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:07.909 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.910 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:07.910 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:45:07.910 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:45:07.910 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:45:07.910 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.910 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.910 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:07.910 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:07.910 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:07.910 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:45:07.910 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:45:07.910 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.910 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:07.910 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:07.910 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:07.910 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:45:07.910 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:45:08.590 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:45:08.590 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.590 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.590 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.590 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.590 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.591 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:08.591 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:08.591 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.591 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.591 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.591 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.591 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:45:08.591 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:45:08.591 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:45:08.591 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.591 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.591 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.591 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.591 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.591 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:45:08.591 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:45:08.591 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.591 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.591 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.591 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.591 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:45:08.591 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:45:08.591 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:45:08.592 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.592 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:08.592 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:08.592 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.592 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.592 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:45:08.592 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:45:08.592 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:45:08.592 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.592 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:45:08.592 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:45:08.592 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.592 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.592 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:45:08.592 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:45:08.592 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.592 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:08.592 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:45:08.592 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.592 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.592 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.592 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.593 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.593 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.593 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:45:08.593 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:45:08.593 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:45:08.593 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.593 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.593 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.593 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.593 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.593 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:45:08.593 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:45:08.593 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.595 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.595 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:45:08.595 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.595 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.595 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:45:08.595 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.595 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.596 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:45:08.596 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:45:08.596 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:45:08.596 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.596 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.596 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 22:45:08.596 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 22:45:08.596 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.596 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.596 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.596 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.596 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.596 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.596 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.596 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.596 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.596 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.596 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.596 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.596 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.596 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.596 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.596 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.596 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.596 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.596 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.596 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.596 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.597 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.597 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.597 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.597 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.597 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.597 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.597 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.597 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.597 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.597 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.597 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.597 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.597 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.597 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.597 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.597 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.597 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:45:08.597 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:45:08.597 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.597 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.597 +08:00 [DBG] Committing transaction.
2025-10-29 22:45:08.598 +08:00 [DBG] Committed transaction.
2025-10-29 22:45:08.598 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.598 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.598 +08:00 [DBG] Disposing transaction.
2025-10-29 22:45:08.598 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.598 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.598 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.598 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.598 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.598 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:45:08.598 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 22:45:08.599 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.599 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.599 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:45:08.599 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.599 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:45:08.599 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:45:08.599 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:45:08.599 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.599 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:45:08.599 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:08.599 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:45:08.599 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 18
2025-10-29 22:45:13.792 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 22:45:14.992 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:45:14.993 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:45:14.993 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:02.680 +08:00 [DBG] Hosting starting
2025-10-29 22:47:02.701 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 22:47:02.703 +08:00 [INF] Hosting environment: Production
2025-10-29 22:47:02.703 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 22:47:02.703 +08:00 [DBG] Hosting started
2025-10-29 22:47:02.737 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 22:47:02.749 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 22:47:02.884 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:47:02.902 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:47:02.954 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:47:02.955 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:47:02.969 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 22:47:03.082 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:47:03.085 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:03.089 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 22:47:03.091 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.092 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:03.093 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:47:03.094 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.097 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.099 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.101 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.104 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:47:03.106 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 22:47:03.107 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 22:47:03.108 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.111 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.113 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.121 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.123 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.123 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.124 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:03.124 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:47:03.124 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.125 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.125 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.125 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.125 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:47:03.125 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:47:03.125 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:47:03.125 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.125 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.125 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.125 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.125 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.125 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.130 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.130 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.130 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:03.130 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.130 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.130 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:47:03.131 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:47:03.133 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.134 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:47:03.134 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.134 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.140 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:47:03.141 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:03.142 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:47:03.142 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.142 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:47:03.142 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:47:03.142 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:47:03.142 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.142 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.142 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.142 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:03.143 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:47:03.143 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.143 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:47:03.143 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:03.143 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.143 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:47:03.143 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:47:03.143 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:03.143 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.143 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.143 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:47:03.164 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 22:47:03.220 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:03.228 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.228 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.228 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:03.228 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.228 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.228 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:47:03.228 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:47:03.228 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.229 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:03.229 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.229 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.229 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 22:47:03.230 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:03.230 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.230 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.230 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:03.230 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.230 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.230 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:47:03.230 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:47:03.231 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.231 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:03.231 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.231 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.231 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 22:47:03.231 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:03.232 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.232 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.232 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:03.232 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.232 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:03.232 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:47:03.232 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:47:03.232 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.232 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:03.232 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.232 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.232 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:47:03.233 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:03.233 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:03.237 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:47:53.212 +08:00 [INF] === 开始登录流程 ===
2025-10-29 22:47:53.213 +08:00 [INF] 用户名: student
2025-10-29 22:47:53.213 +08:00 [INF] 密码长度: 10
2025-10-29 22:47:53.213 +08:00 [INF] AuthService是否为null: False
2025-10-29 22:47:53.213 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 22:47:53.215 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 22:47:53.215 +08:00 [INF] 接收到的用户名: student
2025-10-29 22:47:53.215 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 22:47:53.215 +08:00 [INF] 开始查询用户
2025-10-29 22:47:53.215 +08:00 [INF] UserRepository是否为null: False
2025-10-29 22:47:53.215 +08:00 [INF] Context是否为null: False
2025-10-29 22:47:53.215 +08:00 [INF] 测试数据库连接...
2025-10-29 22:47:53.217 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:53.217 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:47:53.217 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.217 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.217 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.217 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.217 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 22:47:53.218 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 22:47:53.226 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:53.229 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:47:53.229 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:47:53.229 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.229 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.229 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.229 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.229 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.229 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:47:53.229 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:47:53.230 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.230 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.230 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.230 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.230 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 22:47:53.231 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 22:47:53.244 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:53.247 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.247 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.247 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.247 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.248 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.248 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:47:53.250 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:47:53.260 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.274 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.274 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 23ms reading results.
2025-10-29 22:47:53.274 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.274 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.274 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 22:47:53.275 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 22:47:53.275 +08:00 [INF] 用户是否激活: True
2025-10-29 22:47:53.275 +08:00 [INF] 登录失败次数: 0
2025-10-29 22:47:53.275 +08:00 [INF] 检查账户锁定状态
2025-10-29 22:47:53.277 +08:00 [INF] 开始验证密码
2025-10-29 22:47:53.277 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 22:47:53.277 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 22:47:53.277 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 22:47:53.277 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 22:47:53.277 +08:00 [INF] 密码哈希长度: 60
2025-10-29 22:47:53.277 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 22:47:53.498 +08:00 [INF] 密码验证结果: True
2025-10-29 22:47:53.498 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 22:47:53.499 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:47:53.502 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:47:53.509 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:53.511 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.514 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:47:53.531 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.532 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.532 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.532 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.532 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:47:53.533 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:47:53.537 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.537 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:47:53.537 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.537 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.539 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.539 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:47:53.540 +08:00 [INF] 用户信息更新完成
2025-10-29 22:47:53.540 +08:00 [INF] 用户登录成功 - student
2025-10-29 22:47:53.540 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 22:47:53.540 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 22:47:53.540 +08:00 [INF] 成功: True
2025-10-29 22:47:53.540 +08:00 [INF] 消息: 登录成功
2025-10-29 22:47:53.540 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:47:53.540 +08:00 [INF] 用户 student 登录成功
2025-10-29 22:47:53.542 +08:00 [INF] 上次登录时间: 2025-10-29 22:44:23
2025-10-29 22:47:53.542 +08:00 [INF] 触发登录成功事件
2025-10-29 22:47:53.542 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 22:47:53.542 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 22:47:53.543 +08:00 [INF] 用户ID: 2
2025-10-29 22:47:53.543 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:47:53.554 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 22:47:53.554 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 22:47:53.555 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 22:47:53.562 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 22:47:53.565 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 22:47:53.568 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:53.568 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.568 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.568 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.568 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.568 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.568 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:47:53.568 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:47:53.569 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.569 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.569 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.569 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.572 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 22:47:53.598 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.600 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.600 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.600 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.600 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.600 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.600 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:47:53.601 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:47:53.603 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.607 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.607 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.607 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.607 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.607 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.607 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.608 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:47:53.608 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.608 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.611 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 22:47:53.614 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:47:53.614 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:47:53.624 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.626 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.626 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.626 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.626 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.626 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.626 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:47:53.626 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:47:53.626 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.626 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.626 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.626 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.628 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 22:47:53.630 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.630 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.630 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.630 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.630 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.630 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.630 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:47:53.630 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:47:53.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.641 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.642 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:47:53.642 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.642 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.647 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 22:47:53.648 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.649 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.649 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.649 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.649 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.649 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.649 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:47:53.649 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:47:53.650 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.653 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.653 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:47:53.654 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.654 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.662 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 22:47:53.663 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 22:47:53.663 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 22:47:53.663 +08:00 [INF] 用户ID: 2
2025-10-29 22:47:53.663 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:47:53.663 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 22:47:53.663 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 22:47:53.663 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 22:47:53.664 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 22:47:53.666 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.667 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.667 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.667 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.667 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.667 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.667 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:47:53.667 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:47:53.670 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.672 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.673 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.673 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.673 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.673 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.673 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.680 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.680 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 13ms reading results.
2025-10-29 22:47:53.680 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.680 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.681 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 22:47:53.689 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 22:47:53.690 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 22:47:53.690 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 22:47:53.691 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 22:47:53.692 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 22:47:53.692 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:47:53.692 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:47:53.715 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.715 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.715 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.715 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.715 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.715 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.715 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:47:53.716 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:47:53.717 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.717 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.718 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.719 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.723 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.723 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.732 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.733 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.733 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 16ms reading results.
2025-10-29 22:47:53.733 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.733 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.733 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 22:47:53.734 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 22:47:53.739 +08:00 [INF] 开始加载学生考试结果
2025-10-29 22:47:53.741 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.741 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.741 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.741 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.741 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.741 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:47:53.741 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:47:53.741 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.741 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.741 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.741 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.741 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 22:47:53.749 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 22:47:53.750 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:53.751 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.751 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.751 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.751 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.751 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.751 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:47:53.751 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:47:53.751 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.751 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.751 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.751 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.752 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 22:47:53.752 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 22:47:53.753 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 22:47:53.759 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:47:53.761 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.761 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.761 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.761 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.761 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.761 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:47:53.761 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:47:53.761 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.761 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.761 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.762 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.776 +08:00 [INF] 所有页面加载完成
2025-10-29 22:47:53.777 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 22:47:53.777 +08:00 [INF] 当前用户: student (Student)
2025-10-29 22:47:53.777 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 22:47:53.777 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 22:47:53.777 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 22:47:53.777 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 22:47:53.777 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 22:47:53.777 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 22:47:53.777 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 22:47:53.777 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 22:47:53.777 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 22:47:53.777 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 22:47:53.777 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 22:47:53.777 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 22:47:53.777 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 22:47:53.777 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 22:47:53.777 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 22:47:53.813 +08:00 [INF] 关闭登录窗口
2025-10-29 22:47:53.819 +08:00 [INF] === 登录流程结束 ===
2025-10-29 22:47:53.846 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.847 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.847 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.847 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.847 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.847 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:47:53.847 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:47:53.847 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.847 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.847 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.847 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.847 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.848 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.848 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.848 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.848 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.848 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.848 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:47:53.848 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:47:53.849 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.849 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.849 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.849 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.849 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.849 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.849 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.849 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.849 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.849 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.849 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.849 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:47:53.849 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:47:53.849 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.849 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:53.849 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.849 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:53.849 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.849 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:53.849 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:47:53.849 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:53.850 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.850 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:53.850 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:53.850 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:56.092 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 22:47:56.092 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 22:47:56.093 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:47:56.094 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 22:47:56.094 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:47:56.094 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:47:56.101 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:56.101 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.101 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.101 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:56.101 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:56.101 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:56.101 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:56.102 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:56.102 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.102 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:56.102 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.102 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:56.103 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:47:56.103 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:47:56.103 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:47:56.103 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 22:47:56.105 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:56.105 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.105 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.105 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:56.105 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:56.105 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:56.105 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:47:56.105 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:47:56.105 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.105 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:56.105 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:56.105 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:56.105 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:47:56.105 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:47:57.068 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:47:57.068 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.068 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.068 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.068 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.068 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.068 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:57.069 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:57.069 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.069 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.069 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.069 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.069 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:47:57.069 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:47:57.069 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:47:57.069 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.069 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.069 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.069 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.069 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.069 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:47:57.069 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:47:57.069 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.069 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.069 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.069 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.069 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:47:57.069 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:47:57.070 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:47:57.070 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.070 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.071 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.071 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.071 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:57.071 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:57.071 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.071 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.071 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:47:57.071 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:47:57.071 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:47:57.071 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.071 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.071 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.071 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:47:57.071 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:47:57.071 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.071 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.071 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.071 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:47:57.071 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:47:57.072 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.072 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.072 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.072 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.072 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.072 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:57.072 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:47:57.072 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.072 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.072 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.072 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.082 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.083 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.084 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.084 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:47:57.084 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:47:57.098 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:47:57.103 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.103 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.103 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.103 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.104 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.104 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:47:57.104 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:47:57.107 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.111 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.111 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:47:57.111 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.111 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.112 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.112 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:47:57.114 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.123 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.123 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.123 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.124 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:47:57.124 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:47:57.126 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:47:57.128 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.128 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.129 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 22:47:57.130 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 22:47:57.130 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.130 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.130 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.130 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.130 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.131 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.131 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.131 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.131 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.131 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.131 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.131 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.131 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.132 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.132 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.132 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.132 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.132 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.132 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.132 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.132 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.132 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.132 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.132 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.132 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.132 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.132 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.132 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.132 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.132 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:47:57.132 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:47:57.132 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.132 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:47:57.133 +08:00 [DBG] Committing transaction.
2025-10-29 22:47:57.135 +08:00 [DBG] Committed transaction.
2025-10-29 22:47:57.136 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.136 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.136 +08:00 [DBG] Disposing transaction.
2025-10-29 22:47:57.137 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.137 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.137 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.137 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.149 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.149 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.149 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 22:47:57.149 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 22:47:57.150 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:47:57.150 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:47:57.150 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 22:47:57.150 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 22:47:57.150 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 22:47:57.162 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 22:47:57.165 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:47:57.165 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.165 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.165 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:47:57.165 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.165 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:47:57.165 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:47:57.166 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:47:57.168 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.170 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:47:57.171 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.171 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:47:57.171 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:47:57.171 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:47:57.171 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 19
2025-10-29 22:48:27.889 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.RecordId == __recordId_0)'
2025-10-29 22:48:27.891 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE e.RecordId == @__recordId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:48:27.891 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.892 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.892 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:48:27.892 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:48:27.892 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:48:27.892 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 22:48:27.892 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 22:48:27.892 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.892 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:48:27.892 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.892 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:48:27.892 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:48:27.892 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:48:27.893 +08:00 [DBG] The unchanged property 'ExamRecord.RemainingTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:48:27.893 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:48:27.894 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:48:27.894 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.894 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.894 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:48:27.894 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:48:27.894 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:48:27.894 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 22:48:27.894 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 22:48:27.897 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.897 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 2ms reading results.
2025-10-29 22:48:27.897 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:27.897 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:48:27.897 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:48:27.897 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:48:31.844 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 22:48:33.037 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:48:33.038 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:48:33.038 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.165 +08:00 [DBG] Hosting starting
2025-10-29 22:56:09.185 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 22:56:09.186 +08:00 [INF] Hosting environment: Production
2025-10-29 22:56:09.187 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 22:56:09.187 +08:00 [DBG] Hosting started
2025-10-29 22:56:09.222 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 22:56:09.233 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 22:56:09.364 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:56:09.381 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:56:09.432 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:56:09.433 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 22:56:09.447 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 22:56:09.564 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:56:09.568 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:56:09.572 +08:00 [DBG] Created DbConnection. (3ms).
2025-10-29 22:56:09.575 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.576 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:56:09.577 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:56:09.578 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.582 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.583 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.585 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.589 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:56:09.591 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 22:56:09.591 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 22:56:09.592 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.594 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.597 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.604 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.606 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.607 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.608 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:56:09.608 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:56:09.608 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.608 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.608 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.608 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.609 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:56:09.609 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:56:09.609 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:56:09.609 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.609 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.609 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.609 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.609 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.609 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.614 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.614 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:56:09.614 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.614 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:56:09.615 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:56:09.616 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.617 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:56:09.617 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.617 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.622 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:56:09.623 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:56:09.624 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:56:09.624 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.624 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:56:09.624 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:56:09.624 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:56:09.624 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.624 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.624 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.624 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.624 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:56:09.624 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:56:09.624 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.625 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 22:56:09.625 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:56:09.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 22:56:09.625 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 22:56:09.625 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.625 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:56:09.625 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.625 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.625 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:56:09.625 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 22:56:09.625 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:56:09.625 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.625 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.625 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 22:56:09.640 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 22:56:09.687 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:56:09.694 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.695 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.695 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:56:09.695 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.695 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.695 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:56:09.695 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 22:56:09.695 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.695 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:56:09.695 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.695 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.696 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 22:56:09.697 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:56:09.697 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.697 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.697 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:56:09.697 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.697 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.697 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:56:09.697 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 22:56:09.697 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.697 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:56:09.697 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.697 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.697 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 22:56:09.698 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:56:09.698 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.698 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.698 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:56:09.698 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.698 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:56:09.698 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:56:09.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 22:56:09.698 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.699 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:56:09.699 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.699 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.699 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:56:09.699 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:56:09.699 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:56:09.705 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 22:57:24.917 +08:00 [INF] === 开始登录流程 ===
2025-10-29 22:57:24.917 +08:00 [INF] 用户名: student
2025-10-29 22:57:24.917 +08:00 [INF] 密码长度: 10
2025-10-29 22:57:24.917 +08:00 [INF] AuthService是否为null: False
2025-10-29 22:57:24.917 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 22:57:24.919 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 22:57:24.919 +08:00 [INF] 接收到的用户名: student
2025-10-29 22:57:24.919 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 22:57:24.919 +08:00 [INF] 开始查询用户
2025-10-29 22:57:24.919 +08:00 [INF] UserRepository是否为null: False
2025-10-29 22:57:24.919 +08:00 [INF] Context是否为null: False
2025-10-29 22:57:24.919 +08:00 [INF] 测试数据库连接...
2025-10-29 22:57:24.920 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:57:24.921 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:57:24.921 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.921 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.921 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.921 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:24.921 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 22:57:24.922 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 22:57:24.930 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:24.932 +08:00 [DBG] Creating DbConnection.
2025-10-29 22:57:24.932 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 22:57:24.932 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.932 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.932 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:24.932 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:24.932 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:24.932 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:57:24.932 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 22:57:24.932 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.932 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:24.932 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.932 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:24.932 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 22:57:24.933 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 22:57:24.945 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:24.947 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.947 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.948 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:24.948 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:24.948 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:24.948 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:57:24.950 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 22:57:24.959 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:24.973 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.973 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 22ms reading results.
2025-10-29 22:57:24.973 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:24.973 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:24.973 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 22:57:24.974 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 22:57:24.974 +08:00 [INF] 用户是否激活: True
2025-10-29 22:57:24.974 +08:00 [INF] 登录失败次数: 0
2025-10-29 22:57:24.974 +08:00 [INF] 检查账户锁定状态
2025-10-29 22:57:24.977 +08:00 [INF] 开始验证密码
2025-10-29 22:57:24.977 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 22:57:24.977 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 22:57:24.977 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 22:57:24.977 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 22:57:24.977 +08:00 [INF] 密码哈希长度: 60
2025-10-29 22:57:24.977 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 22:57:25.198 +08:00 [INF] 密码验证结果: True
2025-10-29 22:57:25.198 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 22:57:25.200 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:57:25.201 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:57:25.207 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:25.210 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.213 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:57:25.231 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.231 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.232 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.232 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.232 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.232 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:57:25.232 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 22:57:25.237 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.237 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:57:25.237 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.237 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.239 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.239 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:57:25.240 +08:00 [INF] 用户信息更新完成
2025-10-29 22:57:25.240 +08:00 [INF] 用户登录成功 - student
2025-10-29 22:57:25.240 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 22:57:25.240 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 22:57:25.240 +08:00 [INF] 成功: True
2025-10-29 22:57:25.240 +08:00 [INF] 消息: 登录成功
2025-10-29 22:57:25.240 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:57:25.240 +08:00 [INF] 用户 student 登录成功
2025-10-29 22:57:25.242 +08:00 [INF] 上次登录时间: 2025-10-29 22:51:38
2025-10-29 22:57:25.242 +08:00 [INF] 触发登录成功事件
2025-10-29 22:57:25.242 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 22:57:25.242 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 22:57:25.242 +08:00 [INF] 用户ID: 2
2025-10-29 22:57:25.242 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:57:25.256 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 22:57:25.256 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 22:57:25.257 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 22:57:25.266 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 22:57:25.270 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 22:57:25.273 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:25.273 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.273 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.273 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.273 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.273 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.273 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:57:25.273 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:57:25.273 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.273 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.273 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.273 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.277 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 22:57:25.303 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.305 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.305 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.305 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.305 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.305 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.305 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:57:25.305 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:57:25.308 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.312 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.312 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.312 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.312 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.312 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.312 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.312 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 22:57:25.312 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.312 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.316 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 22:57:25.318 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:57:25.318 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:57:25.329 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.331 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.331 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.331 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.331 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.331 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.331 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:57:25.331 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:57:25.331 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.331 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.331 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.331 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.333 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 22:57:25.334 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.334 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.334 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.334 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.334 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.334 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.334 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:57:25.334 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:57:25.336 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.346 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.346 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 22:57:25.346 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.346 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.351 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 22:57:25.353 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.353 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.353 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.353 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.353 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.353 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.353 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:57:25.353 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 22:57:25.355 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.358 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.358 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 22:57:25.358 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.358 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.365 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 22:57:25.366 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 22:57:25.366 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 22:57:25.366 +08:00 [INF] 用户ID: 2
2025-10-29 22:57:25.366 +08:00 [INF] 用户对象是否为null: False
2025-10-29 22:57:25.366 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 22:57:25.366 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 22:57:25.366 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 22:57:25.367 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 22:57:25.369 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.369 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.369 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.369 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.369 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.369 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.369 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:57:25.369 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 22:57:25.372 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.374 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.393 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.393 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 24ms reading results.
2025-10-29 22:57:25.393 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.393 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.394 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 22:57:25.402 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 22:57:25.402 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 22:57:25.403 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 22:57:25.404 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 22:57:25.404 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 22:57:25.404 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:57:25.405 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:57:25.413 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.413 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.413 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.413 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.413 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.413 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.413 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:57:25.414 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 22:57:25.414 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.414 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.415 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.416 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.419 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.419 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.428 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.429 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.429 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 22:57:25.429 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.429 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.429 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 22:57:25.430 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 22:57:25.434 +08:00 [INF] 开始加载学生考试结果
2025-10-29 22:57:25.435 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.435 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.435 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.435 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.435 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.436 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:57:25.436 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:57:25.436 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.436 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.436 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.436 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.436 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 22:57:25.443 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 22:57:25.444 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:25.444 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.444 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.444 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.444 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.444 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.445 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:57:25.445 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 22:57:25.445 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.445 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.445 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.445 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.445 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 22:57:25.446 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 22:57:25.446 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 22:57:25.453 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 22:57:25.454 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.454 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.454 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:57:25.454 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 22:57:25.454 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.454 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.454 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.454 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.467 +08:00 [INF] 所有页面加载完成
2025-10-29 22:57:25.467 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 22:57:25.467 +08:00 [INF] 当前用户: student (Student)
2025-10-29 22:57:25.467 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 22:57:25.467 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 22:57:25.467 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 22:57:25.467 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 22:57:25.467 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 22:57:25.467 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 22:57:25.467 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 22:57:25.467 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 22:57:25.467 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 22:57:25.467 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 22:57:25.467 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 22:57:25.467 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 22:57:25.467 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 22:57:25.467 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 22:57:25.468 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 22:57:25.511 +08:00 [INF] 关闭登录窗口
2025-10-29 22:57:25.516 +08:00 [INF] === 登录流程结束 ===
2025-10-29 22:57:25.543 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.543 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.544 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.544 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.544 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.544 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:57:25.544 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 22:57:25.544 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.544 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.544 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.544 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.544 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.545 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.545 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.545 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.545 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.545 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.545 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:57:25.545 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 22:57:25.545 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.545 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.545 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.546 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.546 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.546 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.546 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.546 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.546 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.546 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.546 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.546 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:57:25.546 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 22:57:25.546 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.546 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:25.546 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.546 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:25.546 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.546 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:25.546 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:57:25.546 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:25.547 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.547 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:25.547 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:25.547 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:27.860 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 22:57:27.861 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 22:57:27.862 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:57:27.863 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 22:57:27.863 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:57:27.863 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 22:57:27.870 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:27.871 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.871 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.871 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:27.871 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:27.871 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:27.871 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:27.871 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.871 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:27.872 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.872 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:27.872 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.872 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:27.872 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:57:27.872 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:57:27.872 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:57:27.873 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 22:57:27.874 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:27.875 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.875 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.875 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:27.875 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:27.875 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:27.875 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:57:27.875 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:57:27.875 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.875 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:27.875 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:27.875 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:27.875 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:57:27.875 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:57:28.661 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:57:28.662 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.662 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.662 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.662 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.662 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.662 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:28.662 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:28.662 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.662 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.662 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.662 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.662 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:57:28.662 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:57:28.662 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:57:28.663 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.663 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.663 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.663 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.663 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.663 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:57:28.663 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:57:28.663 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.663 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.663 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.663 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.663 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:57:28.663 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:57:28.664 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 22:57:28.664 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.664 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.664 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.664 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.664 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.664 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:28.665 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:28.665 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.665 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.665 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.665 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.665 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 22:57:28.665 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 22:57:28.665 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 22:57:28.665 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.665 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.665 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.665 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.665 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.665 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:57:28.665 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 22:57:28.665 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.665 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.665 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.665 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.665 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 22:57:28.665 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 22:57:28.666 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.666 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.666 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.666 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.666 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.666 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:28.666 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 22:57:28.666 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.666 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.666 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.666 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.676 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.678 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.679 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.679 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:57:28.679 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:57:28.703 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:57:28.709 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.709 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.709 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.709 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.709 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.709 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:57:28.710 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 22:57:28.713 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.717 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.717 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 7ms reading results.
2025-10-29 22:57:28.717 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.717 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.718 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.718 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 22:57:28.720 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.730 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.731 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.731 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.731 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.732 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 22:57:28.732 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 22:57:28.734 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 22:57:28.737 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.737 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.737 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 22:57:28.739 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 22:57:28.739 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.739 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.739 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.739 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.740 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.740 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.741 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.741 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 22:57:28.741 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.741 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.741 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.741 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.741 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.741 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.741 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.741 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.741 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.741 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.741 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.741 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.742 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.742 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.742 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.742 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.742 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.742 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.742 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.742 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.742 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.742 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.742 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.742 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.742 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.742 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.742 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.742 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.742 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.742 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 22:57:28.742 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 22:57:28.742 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.742 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 22:57:28.743 +08:00 [DBG] Committing transaction.
2025-10-29 22:57:28.746 +08:00 [DBG] Committed transaction.
2025-10-29 22:57:28.746 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.746 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.747 +08:00 [DBG] Disposing transaction.
2025-10-29 22:57:28.747 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.747 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.747 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.747 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.747 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.747 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.747 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 22:57:28.748 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 22:57:28.748 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 22:57:28.748 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 22:57:28.748 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 22:57:28.749 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 22:57:28.749 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 22:57:28.759 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 22:57:28.761 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 22:57:28.762 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.762 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.762 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 22:57:28.762 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.762 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 22:57:28.762 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:57:28.763 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 22:57:28.764 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.766 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 22:57:28.767 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.767 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 22:57:28.767 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:28.767 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 22:57:28.767 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 22
2025-10-29 22:57:34.276 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 22:57:35.642 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 22:57:35.643 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 22:57:35.644 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:13.980 +08:00 [DBG] Hosting starting
2025-10-29 23:03:14.000 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:03:14.002 +08:00 [INF] Hosting environment: Production
2025-10-29 23:03:14.002 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:03:14.002 +08:00 [DBG] Hosting started
2025-10-29 23:03:14.039 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:03:14.050 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:03:14.183 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:03:14.202 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:03:14.256 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:03:14.256 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:03:14.270 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:03:14.381 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:03:14.384 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:14.388 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:03:14.390 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.391 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:14.391 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:03:14.392 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.396 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.397 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.399 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.402 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:03:14.404 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-10-29 23:03:14.405 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 23:03:14.405 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.411 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.413 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.420 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.421 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.422 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.423 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:14.423 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:03:14.423 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.423 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.423 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.423 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.423 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:03:14.423 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:03:14.423 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:03:14.423 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.423 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.423 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.423 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.424 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.424 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.428 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.428 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.429 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:14.429 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.429 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.429 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:03:14.429 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:03:14.431 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.431 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:03:14.431 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.431 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.436 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:03:14.438 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:14.438 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:03:14.438 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.438 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:03:14.438 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:03:14.438 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:03:14.438 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.438 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.438 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.438 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:14.438 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:03:14.438 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.438 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.439 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:03:14.439 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:03:14.439 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:03:14.439 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.439 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:03:14.439 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.439 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:14.439 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.439 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.439 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:03:14.439 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:03:14.439 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:14.439 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.439 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.439 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:03:14.454 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:03:14.503 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:14.512 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.513 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.513 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:14.513 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.513 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.513 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:03:14.513 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:03:14.513 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.513 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:14.513 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.514 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.514 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:03:14.515 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:14.515 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.516 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.516 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:14.516 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.516 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.516 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:03:14.516 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:03:14.516 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.516 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:14.516 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.516 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.516 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:03:14.517 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:14.517 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.517 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.517 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:14.517 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.517 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:14.517 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:03:14.517 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:03:14.517 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.517 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:14.517 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.517 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.518 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:03:14.518 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:14.518 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:14.523 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:03:21.850 +08:00 [INF] === 开始登录流程 ===
2025-10-29 23:03:21.850 +08:00 [INF] 用户名: student
2025-10-29 23:03:21.850 +08:00 [INF] 密码长度: 10
2025-10-29 23:03:21.850 +08:00 [INF] AuthService是否为null: False
2025-10-29 23:03:21.850 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 23:03:21.852 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 23:03:21.852 +08:00 [INF] 接收到的用户名: student
2025-10-29 23:03:21.852 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 23:03:21.852 +08:00 [INF] 开始查询用户
2025-10-29 23:03:21.852 +08:00 [INF] UserRepository是否为null: False
2025-10-29 23:03:21.852 +08:00 [INF] Context是否为null: False
2025-10-29 23:03:21.852 +08:00 [INF] 测试数据库连接...
2025-10-29 23:03:21.853 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:21.853 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:03:21.853 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.854 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.854 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.854 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:21.854 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 23:03:21.854 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 23:03:21.863 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:21.865 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:03:21.865 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:03:21.865 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.865 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.865 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:21.865 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:21.865 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:21.865 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:03:21.865 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:03:21.865 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.865 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:21.865 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.865 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:21.865 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 23:03:21.866 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 23:03:21.878 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:21.881 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.881 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.881 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:21.881 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:21.881 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:21.882 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:03:21.883 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:03:21.892 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:21.905 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.905 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 21ms reading results.
2025-10-29 23:03:21.905 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:21.905 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:21.905 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 23:03:21.906 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 23:03:21.906 +08:00 [INF] 用户是否激活: True
2025-10-29 23:03:21.906 +08:00 [INF] 登录失败次数: 0
2025-10-29 23:03:21.906 +08:00 [INF] 检查账户锁定状态
2025-10-29 23:03:21.907 +08:00 [INF] 开始验证密码
2025-10-29 23:03:21.907 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 23:03:21.907 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 23:03:21.907 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 23:03:21.907 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 23:03:21.907 +08:00 [INF] 密码哈希长度: 60
2025-10-29 23:03:21.907 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 23:03:22.129 +08:00 [INF] 密码验证结果: True
2025-10-29 23:03:22.129 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 23:03:22.130 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:03:22.133 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:03:22.139 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:22.142 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.145 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:03:22.161 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.162 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.162 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.162 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.162 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.162 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:03:22.163 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:03:22.166 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.166 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 23:03:22.166 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.166 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.168 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.169 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:03:22.169 +08:00 [INF] 用户信息更新完成
2025-10-29 23:03:22.169 +08:00 [INF] 用户登录成功 - student
2025-10-29 23:03:22.169 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 23:03:22.169 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 23:03:22.169 +08:00 [INF] 成功: True
2025-10-29 23:03:22.169 +08:00 [INF] 消息: 登录成功
2025-10-29 23:03:22.169 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:03:22.169 +08:00 [INF] 用户 student 登录成功
2025-10-29 23:03:22.172 +08:00 [INF] 上次登录时间: 2025-10-29 22:58:48
2025-10-29 23:03:22.172 +08:00 [INF] 触发登录成功事件
2025-10-29 23:03:22.172 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 23:03:22.172 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 23:03:22.173 +08:00 [INF] 用户ID: 2
2025-10-29 23:03:22.173 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:03:22.185 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 23:03:22.185 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 23:03:22.186 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 23:03:22.193 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 23:03:22.197 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 23:03:22.199 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:22.199 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.199 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.199 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.199 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.199 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.199 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:03:22.200 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:03:22.200 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.200 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.200 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.200 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.203 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 23:03:22.229 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.231 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.231 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.231 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.231 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.231 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.231 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:03:22.232 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:03:22.234 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.238 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.238 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.238 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:03:22.238 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.238 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.241 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 23:03:22.244 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:03:22.244 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:03:22.253 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.254 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.254 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.254 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.254 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.254 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.254 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:03:22.255 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:03:22.255 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.255 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.255 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.255 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.256 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 23:03:22.258 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.258 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.258 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.258 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.258 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.258 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.258 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:03:22.258 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:03:22.260 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.269 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.270 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.270 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 23:03:22.270 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.270 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.275 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 23:03:22.276 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.277 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.277 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.277 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.277 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.277 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.277 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:03:22.277 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:03:22.278 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.281 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.281 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:03:22.281 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.281 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.289 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 23:03:22.289 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 23:03:22.290 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 23:03:22.290 +08:00 [INF] 用户ID: 2
2025-10-29 23:03:22.290 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:03:22.290 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 23:03:22.290 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 23:03:22.290 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 23:03:22.291 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 23:03:22.293 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.293 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.293 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.293 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.293 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.293 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.293 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:03:22.293 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:03:22.296 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.298 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.305 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.305 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 23:03:22.305 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.305 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.306 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 23:03:22.313 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 23:03:22.314 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 23:03:22.315 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 23:03:22.315 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 23:03:22.316 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 23:03:22.316 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:03:22.316 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:03:22.325 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.325 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.325 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.325 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.325 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.325 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.325 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:03:22.326 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:03:22.326 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.327 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.327 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.328 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.331 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.331 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.341 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.341 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 23:03:22.341 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.341 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.341 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 23:03:22.342 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 23:03:22.347 +08:00 [INF] 开始加载学生考试结果
2025-10-29 23:03:22.348 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.349 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.349 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.349 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.349 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.349 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:03:22.349 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:03:22.349 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.349 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.349 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.349 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.349 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 23:03:22.372 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 23:03:22.374 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:22.374 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.374 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.374 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.374 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.374 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.374 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:03:22.375 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:03:22.375 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.375 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.375 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.375 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.375 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 23:03:22.376 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 23:03:22.377 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 23:03:22.382 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:03:22.384 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.384 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.384 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.384 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.384 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.384 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:03:22.384 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:03:22.385 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.385 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.385 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.385 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.398 +08:00 [INF] 所有页面加载完成
2025-10-29 23:03:22.399 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 23:03:22.399 +08:00 [INF] 当前用户: student (Student)
2025-10-29 23:03:22.399 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 23:03:22.399 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 23:03:22.399 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 23:03:22.399 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 23:03:22.399 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 23:03:22.399 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 23:03:22.399 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 23:03:22.399 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 23:03:22.399 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 23:03:22.399 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 23:03:22.399 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 23:03:22.399 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 23:03:22.399 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 23:03:22.399 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 23:03:22.399 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 23:03:22.440 +08:00 [INF] 关闭登录窗口
2025-10-29 23:03:22.444 +08:00 [INF] === 登录流程结束 ===
2025-10-29 23:03:22.471 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.471 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.471 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.471 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.471 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.471 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:03:22.471 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:03:22.471 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.471 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.472 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.472 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.472 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.472 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.473 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.473 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.473 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.473 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.473 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:03:22.473 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:03:22.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.473 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.473 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.473 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.473 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.473 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.473 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.473 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.473 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.473 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.473 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.473 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:03:22.474 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:03:22.474 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.474 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.474 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.474 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:22.474 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.474 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.474 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:22.474 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.474 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:22.474 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:03:22.474 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:22.474 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.474 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:22.474 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:22.474 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.142 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 23:03:25.142 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 23:03:25.144 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:03:25.145 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 23:03:25.145 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:03:25.146 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:03:25.153 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:25.153 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.153 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.153 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.153 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.153 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.153 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.154 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.154 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.155 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.155 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.155 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.155 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:03:25.155 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:03:25.155 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:03:25.155 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 23:03:25.157 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:25.157 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.157 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.157 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.157 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.157 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.157 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:03:25.157 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:03:25.157 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.157 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.157 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.157 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.157 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:03:25.157 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:03:25.827 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:03:25.827 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.827 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.828 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.828 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.828 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.828 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.828 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.828 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.828 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.829 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.829 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.829 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:03:25.829 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:03:25.829 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:03:25.829 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.829 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.829 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.829 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.829 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.829 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:03:25.829 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:03:25.829 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.829 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.829 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.829 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.829 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:03:25.829 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:03:25.831 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:03:25.831 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.831 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.831 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.831 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.831 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.831 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.831 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.831 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:03:25.831 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:03:25.831 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:03:25.831 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.831 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.831 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.831 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:03:25.831 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:03:25.831 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.831 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.832 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.832 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.832 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:03:25.832 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:03:25.832 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.832 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.832 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.832 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.832 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.832 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.832 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:03:25.832 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.832 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.832 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.832 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.843 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.845 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.846 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.846 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:03:25.846 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:03:25.861 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:03:25.867 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.867 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.867 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.867 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.867 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.867 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:03:25.867 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:03:25.870 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.874 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.874 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:03:25.874 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.874 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.875 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.875 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:03:25.878 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.886 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.886 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.887 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:03:25.887 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:03:25.889 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:03:25.891 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.891 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.892 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 23:03:25.893 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 23:03:25.893 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.893 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.893 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.893 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.893 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.894 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.894 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.894 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.894 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.894 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.894 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.894 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.895 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.895 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.895 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.895 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.895 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.895 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.895 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.895 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.895 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.895 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.895 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.895 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.895 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.895 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.895 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.895 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.895 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:03:25.895 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:25.895 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.895 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:25.896 +08:00 [DBG] Committing transaction.
2025-10-29 23:03:25.901 +08:00 [DBG] Committed transaction.
2025-10-29 23:03:25.901 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.901 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.902 +08:00 [DBG] Disposing transaction.
2025-10-29 23:03:25.902 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.902 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.902 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.902 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.902 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.902 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.902 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 23:03:25.903 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 23:03:25.903 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:03:25.903 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:03:25.903 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 23:03:25.904 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 23:03:25.904 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 23:03:25.914 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 23:03:25.917 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:25.917 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.917 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.917 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:25.917 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.917 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:25.917 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:03:25.918 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:03:25.920 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:25.922 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.923 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:03:25.923 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:25.923 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:25.923 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 24
2025-10-29 23:03:56.658 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.RecordId == __recordId_0)'
2025-10-29 23:03:56.660 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE e.RecordId == @__recordId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:03:56.660 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.661 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.661 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:56.661 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:56.661 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:56.661 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 23:03:56.661 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 23:03:56.661 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.661 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:03:56.661 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.661 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:56.661 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:03:56.661 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:03:56.662 +08:00 [DBG] The unchanged property 'ExamRecord.RemainingTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:03:56.662 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:56.663 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:03:56.663 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.663 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.663 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:03:56.663 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:56.663 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:03:56.663 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 23:03:56.663 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 23:03:56.665 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.665 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:03:56.665 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:03:56.665 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:03:56.665 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:03:56.665 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:04:19.055 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 23:04:20.165 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:04:20.166 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:04:20.166 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:25.945 +08:00 [DBG] Hosting starting
2025-10-29 23:09:25.965 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:09:25.967 +08:00 [INF] Hosting environment: Production
2025-10-29 23:09:25.967 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:09:25.967 +08:00 [DBG] Hosting started
2025-10-29 23:09:25.999 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:09:26.010 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:09:26.143 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:09:26.163 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:09:26.216 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:09:26.216 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:09:26.230 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:09:26.343 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:09:26.346 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:26.350 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:09:26.352 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.353 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:26.354 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:09:26.355 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.358 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.360 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.361 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.365 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:09:26.367 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 23:09:26.368 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-10-29 23:09:26.368 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.374 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.376 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.385 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.386 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.387 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.387 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:26.387 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:09:26.387 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.388 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.388 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.388 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.388 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:09:26.388 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:09:26.388 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:09:26.388 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.388 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.388 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.388 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.388 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.388 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.393 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.393 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.393 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:26.393 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.393 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.393 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:09:26.394 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:09:26.396 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.396 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:09:26.396 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.396 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.401 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:09:26.403 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:26.403 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:09:26.403 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.403 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:09:26.403 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:09:26.403 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:09:26.403 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.403 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.403 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.403 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.403 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:26.403 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:09:26.403 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.404 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:09:26.404 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:09:26.404 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:09:26.404 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.404 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:09:26.404 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.404 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:26.404 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.404 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.404 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:09:26.404 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:09:26.404 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:26.404 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.404 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.404 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:09:26.419 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:09:26.472 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:26.480 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.480 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.480 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:26.480 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.480 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.480 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:09:26.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:09:26.481 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.481 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:26.481 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.481 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.481 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:09:26.483 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:26.483 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.483 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.483 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:26.483 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.483 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.483 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:09:26.483 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:09:26.483 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.483 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:26.483 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.483 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.483 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:09:26.484 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:26.484 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.484 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.484 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:26.484 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.484 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:26.484 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:09:26.484 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:09:26.484 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.484 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:26.484 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.484 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.485 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:09:26.485 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:26.485 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:26.490 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:09:34.494 +08:00 [INF] === 开始登录流程 ===
2025-10-29 23:09:34.494 +08:00 [INF] 用户名: student
2025-10-29 23:09:34.494 +08:00 [INF] 密码长度: 10
2025-10-29 23:09:34.494 +08:00 [INF] AuthService是否为null: False
2025-10-29 23:09:34.494 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 23:09:34.497 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 23:09:34.497 +08:00 [INF] 接收到的用户名: student
2025-10-29 23:09:34.497 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 23:09:34.497 +08:00 [INF] 开始查询用户
2025-10-29 23:09:34.497 +08:00 [INF] UserRepository是否为null: False
2025-10-29 23:09:34.497 +08:00 [INF] Context是否为null: False
2025-10-29 23:09:34.497 +08:00 [INF] 测试数据库连接...
2025-10-29 23:09:34.499 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:34.499 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:09:34.499 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.499 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.500 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.500 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.500 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 23:09:34.500 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 23:09:34.513 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:34.516 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:09:34.516 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:09:34.516 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.516 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.516 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.517 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.517 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.517 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:09:34.517 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:09:34.517 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.517 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:34.517 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.517 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.517 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 23:09:34.519 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 23:09:34.539 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:34.542 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.543 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.543 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.543 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.543 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.544 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:09:34.546 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:09:34.562 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.576 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.576 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 30ms reading results.
2025-10-29 23:09:34.576 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.576 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.577 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 23:09:34.577 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 23:09:34.577 +08:00 [INF] 用户是否激活: True
2025-10-29 23:09:34.577 +08:00 [INF] 登录失败次数: 0
2025-10-29 23:09:34.578 +08:00 [INF] 检查账户锁定状态
2025-10-29 23:09:34.579 +08:00 [INF] 开始验证密码
2025-10-29 23:09:34.579 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 23:09:34.579 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 23:09:34.579 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 23:09:34.579 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 23:09:34.579 +08:00 [INF] 密码哈希长度: 60
2025-10-29 23:09:34.579 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 23:09:34.805 +08:00 [INF] 密码验证结果: True
2025-10-29 23:09:34.805 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 23:09:34.806 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:09:34.807 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:09:34.816 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:34.818 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.822 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:09:34.839 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.839 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.839 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.839 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.839 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.839 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:09:34.840 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:09:34.844 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.844 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:09:34.845 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.845 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.846 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.847 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:09:34.847 +08:00 [INF] 用户信息更新完成
2025-10-29 23:09:34.847 +08:00 [INF] 用户登录成功 - student
2025-10-29 23:09:34.847 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 23:09:34.847 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 23:09:34.847 +08:00 [INF] 成功: True
2025-10-29 23:09:34.847 +08:00 [INF] 消息: 登录成功
2025-10-29 23:09:34.848 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:09:34.848 +08:00 [INF] 用户 student 登录成功
2025-10-29 23:09:34.849 +08:00 [INF] 上次登录时间: 2025-10-29 23:03:22
2025-10-29 23:09:34.849 +08:00 [INF] 触发登录成功事件
2025-10-29 23:09:34.850 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 23:09:34.850 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 23:09:34.850 +08:00 [INF] 用户ID: 2
2025-10-29 23:09:34.850 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:09:34.862 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 23:09:34.862 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 23:09:34.863 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 23:09:34.870 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 23:09:34.873 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 23:09:34.876 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:34.876 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.876 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.876 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.876 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.876 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.876 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:09:34.876 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:09:34.877 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.877 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:34.877 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.877 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.880 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 23:09:34.906 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:34.908 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.908 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.908 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.908 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.908 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.908 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:09:34.909 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:09:34.912 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.915 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.915 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.915 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.915 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.915 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.915 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.915 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:09:34.915 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.916 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.919 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 23:09:34.922 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:09:34.922 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:09:34.930 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:34.932 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.932 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.932 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.932 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.932 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.932 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:09:34.932 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:09:34.932 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.932 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:34.932 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.932 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.934 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 23:09:34.935 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:34.935 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.935 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.935 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.935 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.935 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.935 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:09:34.935 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:09:34.937 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.946 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.946 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.947 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.947 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 23:09:34.947 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.947 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.952 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 23:09:34.953 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:34.953 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.953 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.953 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.953 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.953 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.953 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:09:34.954 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:09:34.955 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.958 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.958 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:09:34.958 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.958 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.966 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 23:09:34.966 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 23:09:34.966 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 23:09:34.966 +08:00 [INF] 用户ID: 2
2025-10-29 23:09:34.966 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:09:34.966 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 23:09:34.966 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 23:09:34.966 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 23:09:34.968 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 23:09:34.969 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:34.970 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.970 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.970 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:34.970 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.970 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:34.970 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:09:34.970 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:09:34.973 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.975 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:34.982 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.982 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 23:09:34.982 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:34.982 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:34.983 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 23:09:34.990 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 23:09:34.990 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 23:09:34.991 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 23:09:34.992 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 23:09:34.992 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 23:09:34.992 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:09:34.992 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:09:35.001 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:35.001 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.001 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.001 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.001 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.001 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.001 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:09:35.002 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:09:35.002 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.002 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.003 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.004 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.008 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.008 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.017 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.017 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 23:09:35.017 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.017 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.018 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 23:09:35.018 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 23:09:35.023 +08:00 [INF] 开始加载学生考试结果
2025-10-29 23:09:35.024 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.024 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.024 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.025 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.025 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.025 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:09:35.025 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:09:35.025 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.025 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.025 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.025 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.025 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 23:09:35.047 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 23:09:35.049 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:35.049 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.049 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.049 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.049 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.049 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.049 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:09:35.049 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:09:35.049 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.049 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.049 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.049 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.050 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 23:09:35.051 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 23:09:35.051 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 23:09:35.058 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:09:35.059 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.059 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.059 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.059 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.059 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.059 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:09:35.059 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:09:35.059 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.059 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.059 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.059 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.073 +08:00 [INF] 所有页面加载完成
2025-10-29 23:09:35.074 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 23:09:35.074 +08:00 [INF] 当前用户: student (Student)
2025-10-29 23:09:35.074 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 23:09:35.074 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 23:09:35.074 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 23:09:35.074 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 23:09:35.074 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 23:09:35.074 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 23:09:35.074 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 23:09:35.074 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 23:09:35.074 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 23:09:35.074 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 23:09:35.074 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 23:09:35.074 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 23:09:35.074 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 23:09:35.074 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 23:09:35.074 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 23:09:35.115 +08:00 [INF] 关闭登录窗口
2025-10-29 23:09:35.120 +08:00 [INF] === 登录流程结束 ===
2025-10-29 23:09:35.148 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.148 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.148 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.148 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.148 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.148 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:09:35.148 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:09:35.148 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.148 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.148 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.148 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.149 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.150 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.150 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.150 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.150 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.150 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.150 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:09:35.150 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:09:35.150 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.150 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.150 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.150 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.150 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.150 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.150 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.150 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.150 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.150 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.150 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.151 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.151 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.151 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.151 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.151 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:09:35.151 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:09:35.151 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.151 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.151 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.151 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:35.151 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.151 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.151 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:35.151 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.151 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:35.151 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:09:35.151 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.151 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.152 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.152 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.152 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:35.152 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.152 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:35.152 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:35.152 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.084 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 23:09:38.084 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 23:09:38.085 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:09:38.086 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 23:09:38.086 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:09:38.087 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:09:38.094 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:38.094 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.094 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.094 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.094 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.094 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.094 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.095 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.095 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.096 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.096 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.096 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.096 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.096 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:09:38.096 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:09:38.096 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:09:38.096 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 23:09:38.098 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:38.099 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.099 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.099 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.099 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.099 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.099 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:09:38.099 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:09:38.099 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.099 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.099 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.099 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.099 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:09:38.099 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:09:38.914 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:09:38.915 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.915 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.915 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.915 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.915 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.915 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.915 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.915 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.915 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.915 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.915 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.915 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:09:38.915 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:09:38.915 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:09:38.916 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.916 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.916 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.916 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.916 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.916 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:09:38.916 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:09:38.916 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.916 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.916 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.916 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.916 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:09:38.916 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:09:38.917 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:09:38.917 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.917 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.917 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.917 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.917 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.917 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.918 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.918 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.918 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.918 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.918 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.918 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:09:38.918 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:09:38.918 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:09:38.918 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.918 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.918 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.918 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.918 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.918 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:09:38.918 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:09:38.918 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.918 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.918 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.918 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.918 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:09:38.918 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:09:38.919 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.919 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.919 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.919 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.919 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.919 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.919 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:09:38.919 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.919 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.919 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.919 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.929 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.931 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.932 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.932 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:09:38.932 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:09:38.947 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:09:38.953 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.953 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.953 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.953 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.953 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.953 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:09:38.953 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:09:38.956 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.960 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.960 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:09:38.960 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.960 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.961 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.961 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:09:38.964 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.972 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.973 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.973 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.974 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:09:38.974 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:09:38.976 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:09:38.978 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.978 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.978 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 23:09:38.980 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 23:09:38.980 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.980 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.980 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.980 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.980 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.981 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.981 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.981 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.981 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.981 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.981 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.981 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.982 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.982 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.982 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.982 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.982 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.982 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.982 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.982 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.982 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.982 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.982 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.982 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.982 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.982 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.982 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:38.982 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:38.982 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:09:38.982 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:09:38.982 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.982 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:09:38.983 +08:00 [DBG] Committing transaction.
2025-10-29 23:09:38.986 +08:00 [DBG] Committed transaction.
2025-10-29 23:09:38.987 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:38.987 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:38.988 +08:00 [DBG] Disposing transaction.
2025-10-29 23:09:38.988 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.988 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.988 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.988 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.988 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.988 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:38.988 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 23:09:38.989 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 23:09:38.989 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:09:38.989 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:09:38.989 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 23:09:38.989 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 23:09:38.989 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 23:09:39.000 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 23:09:39.003 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:09:39.003 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:39.003 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:39.003 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:09:39.003 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:39.003 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:09:39.003 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:09:39.004 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:09:39.006 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.020 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.020 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.020 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.021 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.021 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.021 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.021 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:09:39.021 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:39.021 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 16ms reading results.
2025-10-29 23:09:39.021 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:09:39.021 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:09:39.021 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 25
2025-10-29 23:10:11.127 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.RecordId == __recordId_0)'
2025-10-29 23:10:11.129 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE e.RecordId == @__recordId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:10:11.129 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.129 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.129 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:10:11.129 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:11.129 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:11.130 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 23:10:11.130 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 23:10:11.130 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.130 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:10:11.130 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.130 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:10:11.130 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:10:11.130 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:10:11.130 +08:00 [DBG] The unchanged property 'ExamRecord.RemainingTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:10:11.131 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:10:11.132 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:10:11.132 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.132 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.132 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:10:11.132 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:11.132 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:11.132 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 23:10:11.132 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 23:10:11.134 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.134 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:10:11.134 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:11.134 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:10:11.134 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:10:11.134 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:10:41.349 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.350 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.350 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:10:41.350 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:41.350 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:41.350 +08:00 [DBG] Executing DbCommand [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 23:10:41.350 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__recordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."RecordId" = @__recordId_0
LIMIT 1
2025-10-29 23:10:41.350 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.350 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:10:41.350 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.350 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:10:41.350 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:10:41.350 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:10:41.350 +08:00 [DBG] The unchanged property 'ExamRecord.RemainingTime' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:10:41.350 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:10:41.350 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:10:41.351 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.351 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.351 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:10:41.351 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:41.351 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:10:41.351 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 23:10:41.351 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ExamRecords" SET "RemainingTime" = @p0
WHERE "RecordId" = @p1
RETURNING 1;
2025-10-29 23:10:41.353 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.353 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:10:41.353 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:10:41.353 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:10:41.353 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:10:41.353 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:11:08.172 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 23:11:09.415 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:11:09.416 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:11:09.416 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:48.803 +08:00 [DBG] Hosting starting
2025-10-29 23:15:48.823 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:15:48.825 +08:00 [INF] Hosting environment: Production
2025-10-29 23:15:48.825 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:15:48.825 +08:00 [DBG] Hosting started
2025-10-29 23:15:48.863 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:15:48.876 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:15:49.018 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:15:49.037 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:15:49.090 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:15:49.091 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:15:49.105 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:15:49.223 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:15:49.226 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:15:49.230 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:15:49.232 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.233 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:15:49.234 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:15:49.235 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.238 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.240 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.241 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.245 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:15:49.247 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-10-29 23:15:49.248 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-10-29 23:15:49.249 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.251 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.254 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.262 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.264 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.264 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.265 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:15:49.265 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:15:49.265 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.266 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.266 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.266 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.266 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:15:49.266 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:15:49.266 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:15:49.266 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.266 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.266 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.266 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.266 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.266 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.271 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.271 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.271 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:15:49.271 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.271 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.271 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:15:49.272 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:15:49.273 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.274 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:15:49.274 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.274 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.279 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:15:49.280 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.280 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:15:49.281 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:15:49.281 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.281 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.281 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:15:49.281 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:15:49.281 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.281 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:15:49.281 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.281 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.281 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.282 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.282 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:15:49.282 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.282 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.282 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:15:49.282 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:15:49.282 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.282 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:15:49.282 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.282 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.282 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:15:49.297 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:15:49.350 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:15:49.358 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.358 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.358 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:15:49.358 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.358 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.358 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:15:49.358 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:15:49.359 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.359 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:15:49.359 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.359 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.359 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:15:49.360 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:15:49.360 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.360 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.360 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:15:49.361 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.361 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.361 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:15:49.361 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:15:49.361 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.361 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:15:49.361 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.361 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.361 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:15:49.362 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:15:49.362 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.362 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.362 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:15:49.362 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.362 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:15:49.362 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:15:49.362 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:15:49.362 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.362 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:15:49.362 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.362 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.362 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:15:49.363 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:15:49.363 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:15:49.366 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:17:24.983 +08:00 [INF] === 开始登录流程 ===
2025-10-29 23:17:24.984 +08:00 [INF] 用户名: student
2025-10-29 23:17:24.984 +08:00 [INF] 密码长度: 10
2025-10-29 23:17:24.984 +08:00 [INF] AuthService是否为null: False
2025-10-29 23:17:24.984 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 23:17:24.986 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 23:17:24.986 +08:00 [INF] 接收到的用户名: student
2025-10-29 23:17:24.986 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 23:17:24.986 +08:00 [INF] 开始查询用户
2025-10-29 23:17:24.986 +08:00 [INF] UserRepository是否为null: False
2025-10-29 23:17:24.986 +08:00 [INF] Context是否为null: False
2025-10-29 23:17:24.986 +08:00 [INF] 测试数据库连接...
2025-10-29 23:17:24.988 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:17:24.988 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:17:24.988 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:24.988 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:24.988 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:24.988 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:24.988 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 23:17:24.989 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 23:17:24.998 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:25.000 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:17:25.000 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:17:25.000 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.000 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.000 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.000 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.000 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.000 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:17:25.000 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:17:25.000 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.000 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.000 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.000 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.000 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 23:17:25.002 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 23:17:25.014 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:25.017 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.017 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.017 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.017 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.017 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.018 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:17:25.019 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:17:25.029 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.042 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.042 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 22ms reading results.
2025-10-29 23:17:25.042 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.042 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.042 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 23:17:25.043 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 23:17:25.043 +08:00 [INF] 用户是否激活: True
2025-10-29 23:17:25.043 +08:00 [INF] 登录失败次数: 0
2025-10-29 23:17:25.043 +08:00 [INF] 检查账户锁定状态
2025-10-29 23:17:25.045 +08:00 [INF] 开始验证密码
2025-10-29 23:17:25.045 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 23:17:25.045 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 23:17:25.045 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 23:17:25.045 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 23:17:25.045 +08:00 [INF] 密码哈希长度: 60
2025-10-29 23:17:25.045 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 23:17:25.264 +08:00 [INF] 密码验证结果: True
2025-10-29 23:17:25.264 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 23:17:25.265 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:17:25.266 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:17:25.272 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:25.275 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.278 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:17:25.294 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.294 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.294 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.294 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.294 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.295 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:17:25.295 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:17:25.299 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.299 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:17:25.299 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.299 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.302 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.302 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:17:25.303 +08:00 [INF] 用户信息更新完成
2025-10-29 23:17:25.303 +08:00 [INF] 用户登录成功 - student
2025-10-29 23:17:25.303 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 23:17:25.303 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 23:17:25.303 +08:00 [INF] 成功: True
2025-10-29 23:17:25.303 +08:00 [INF] 消息: 登录成功
2025-10-29 23:17:25.303 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:17:25.303 +08:00 [INF] 用户 student 登录成功
2025-10-29 23:17:25.304 +08:00 [INF] 上次登录时间: 2025-10-29 23:09:34
2025-10-29 23:17:25.304 +08:00 [INF] 触发登录成功事件
2025-10-29 23:17:25.305 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 23:17:25.305 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 23:17:25.305 +08:00 [INF] 用户ID: 2
2025-10-29 23:17:25.305 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:17:25.317 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 23:17:25.317 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 23:17:25.318 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 23:17:25.324 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 23:17:25.328 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 23:17:25.330 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:25.330 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.331 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.331 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.331 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.331 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.331 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:17:25.331 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:17:25.331 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.331 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.331 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.331 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.334 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 23:17:25.359 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.361 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.361 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.361 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.362 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.362 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.362 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:17:25.362 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:17:25.364 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.368 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.368 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.368 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.368 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.368 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.368 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.368 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:17:25.368 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.368 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.371 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 23:17:25.374 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:17:25.374 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:17:25.382 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.384 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.384 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.384 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.384 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.384 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.384 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:17:25.384 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:17:25.384 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.384 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.384 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.384 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.386 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 23:17:25.387 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.387 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.387 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.387 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.387 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.387 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.388 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:17:25.388 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:17:25.389 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.409 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.410 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.410 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.410 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.410 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.410 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.410 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.410 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 22ms reading results.
2025-10-29 23:17:25.410 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.410 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.415 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 23:17:25.417 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.417 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.417 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.417 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.417 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.417 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.417 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:17:25.418 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:17:25.419 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.422 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.422 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:17:25.422 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.422 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.430 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 23:17:25.430 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 23:17:25.430 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 23:17:25.430 +08:00 [INF] 用户ID: 2
2025-10-29 23:17:25.430 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:17:25.430 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 23:17:25.430 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 23:17:25.430 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 23:17:25.431 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 23:17:25.433 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.433 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.433 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.433 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.433 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.433 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.434 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:17:25.434 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:17:25.437 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.438 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.438 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.438 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.439 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.446 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.446 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 23:17:25.446 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.446 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.447 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 23:17:25.453 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 23:17:25.454 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 23:17:25.454 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 23:17:25.455 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 23:17:25.455 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 23:17:25.455 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:17:25.455 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:17:25.463 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.464 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.464 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.464 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.464 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.464 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.464 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:17:25.464 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:17:25.465 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.465 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.465 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.467 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.470 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.470 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.480 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.480 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 23:17:25.480 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.480 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.480 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 23:17:25.481 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 23:17:25.486 +08:00 [INF] 开始加载学生考试结果
2025-10-29 23:17:25.488 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.488 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.488 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.488 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.488 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.488 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:17:25.488 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:17:25.488 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.488 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.488 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.488 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.488 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 23:17:25.496 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 23:17:25.498 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:25.498 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.498 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.498 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.498 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.498 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.499 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:17:25.499 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:17:25.499 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.499 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.499 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.499 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.499 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 23:17:25.500 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 23:17:25.501 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 23:17:25.508 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:17:25.509 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.509 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.509 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.509 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.509 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.509 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:17:25.509 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:17:25.509 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.509 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.509 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.509 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.527 +08:00 [INF] 所有页面加载完成
2025-10-29 23:17:25.528 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 23:17:25.528 +08:00 [INF] 当前用户: student (Student)
2025-10-29 23:17:25.528 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 23:17:25.528 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 23:17:25.528 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 23:17:25.528 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 23:17:25.528 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 23:17:25.528 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 23:17:25.528 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 23:17:25.528 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 23:17:25.528 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 23:17:25.528 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 23:17:25.528 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 23:17:25.528 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 23:17:25.528 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 23:17:25.528 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 23:17:25.528 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 23:17:25.573 +08:00 [INF] 关闭登录窗口
2025-10-29 23:17:25.580 +08:00 [INF] === 登录流程结束 ===
2025-10-29 23:17:25.610 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.610 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.610 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.610 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.610 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.610 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:17:25.611 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:17:25.611 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.611 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.611 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.611 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.611 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.612 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.612 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.612 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.612 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.612 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.612 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:17:25.612 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:17:25.612 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.612 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.612 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.612 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.612 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.612 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.612 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.612 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.612 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.612 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.613 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.613 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.613 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.613 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.613 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.613 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:17:25.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:17:25.613 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.613 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.613 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.613 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:25.613 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.613 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.613 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:25.613 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.613 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:25.613 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:17:25.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:25.614 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.614 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:25.614 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:25.614 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:27.756 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 23:17:27.756 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 23:17:27.757 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:17:27.758 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 23:17:27.759 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:17:27.759 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:17:27.766 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:27.767 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.767 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:27.767 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:27.767 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:27.767 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:27.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.768 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:27.769 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.769 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:17:27.769 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.769 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:27.769 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:17:27.769 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:17:27.769 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:17:27.770 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 23:17:27.772 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:27.773 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.773 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.773 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:27.773 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:27.773 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:27.773 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:27.773 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:27.773 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.773 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:27.773 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:27.773 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:27.773 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:17:27.773 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:17:28.531 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:17:28.531 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.532 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:28.532 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:28.545 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.545 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.545 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.545 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.545 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:17:28.545 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:17:28.545 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:17:28.545 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.545 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.545 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.545 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.545 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.545 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:28.545 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:28.546 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.546 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.546 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.546 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.546 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:17:28.546 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:17:28.547 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:17:28.547 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.547 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.547 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.547 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.548 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.548 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:28.548 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:28.548 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.548 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.548 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.548 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.548 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:17:28.548 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:17:28.548 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:17:28.548 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.548 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.548 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.548 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.548 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.548 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:28.548 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:28.548 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.548 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.548 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.548 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.548 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:17:28.548 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:17:28.549 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.549 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.549 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.549 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.549 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.549 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:28.549 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:28.549 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.549 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.549 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.549 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.560 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.562 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.563 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.563 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:17:28.563 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:17:28.579 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:17:28.585 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.585 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.585 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.585 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.585 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.585 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:17:28.585 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:17:28.588 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.592 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.592 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:17:28.592 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.592 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.593 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.593 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:17:28.596 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.605 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.605 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.605 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.606 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:17:28.606 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:17:28.608 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:17:28.610 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.610 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.611 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 23:17:28.612 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 23:17:28.612 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.612 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.612 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.612 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.612 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.613 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.613 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.613 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.613 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.613 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.614 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.614 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.614 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.614 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.614 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.614 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.614 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.614 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.614 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.614 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.614 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.614 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.614 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.615 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.615 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.615 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:28.615 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:28.615 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.615 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:28.616 +08:00 [DBG] Committing transaction.
2025-10-29 23:17:28.618 +08:00 [DBG] Committed transaction.
2025-10-29 23:17:28.619 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.619 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.619 +08:00 [DBG] Disposing transaction.
2025-10-29 23:17:28.620 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.620 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.620 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.620 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.620 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.620 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.620 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 23:17:28.620 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 23:17:28.621 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:17:28.621 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:17:28.621 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 23:17:28.621 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 23:17:28.621 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 23:17:28.632 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 23:17:28.635 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:17:28.635 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.635 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.635 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:28.636 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.636 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:28.636 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:17:28.637 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:17:28.639 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:28.641 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.641 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:17:28.641 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:28.641 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:28.641 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 26
2025-10-29 23:17:45.272 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 23:17:45.273 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 23:17:45.273 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:17:45.289 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.289 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.289 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:45.289 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:45.289 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:45.289 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:45.289 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:45.290 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.290 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:45.290 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.290 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:45.290 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:17:45.290 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:17:45.290 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:17:45.290 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.290 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.290 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:45.290 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:45.290 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:45.290 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:45.290 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:45.290 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.290 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:45.290 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:45.290 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:45.290 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:17:45.290 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:17:46.445 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:17:46.445 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.445 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.445 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.446 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.446 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.446 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:46.446 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:46.446 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.446 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.446 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.446 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.446 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:17:46.446 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:17:46.446 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:17:46.446 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.446 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.446 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.446 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.446 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.446 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:46.446 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:46.446 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.446 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.446 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.446 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.446 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:17:46.446 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:17:46.447 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:17:46.447 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.447 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.447 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.447 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:46.447 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:46.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.447 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.447 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:17:46.447 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:17:46.447 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:17:46.447 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.447 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.447 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.447 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:46.447 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:17:46.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.447 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.447 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:17:46.447 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:17:46.447 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.447 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.447 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.447 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:46.447 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:17:46.447 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.447 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.447 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.448 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.448 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.448 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.448 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:17:46.448 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:17:46.449 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:17:46.450 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.450 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.450 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.450 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.450 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.450 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:17:46.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:17:46.450 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.453 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.453 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 23:17:46.453 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.453 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.453 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.453 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:17:46.453 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.454 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:17:46.454 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:17:46.454 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:17:46.454 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.454 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.454 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 23:17:46.454 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 23:17:46.454 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.454 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.454 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.454 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.455 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.455 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.455 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.455 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.455 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.455 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.455 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.455 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.455 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.455 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.455 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.455 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.455 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.455 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.455 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.455 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:17:46.455 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:17:46.455 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.455 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.455 +08:00 [DBG] Committing transaction.
2025-10-29 23:17:46.457 +08:00 [DBG] Committed transaction.
2025-10-29 23:17:46.457 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.457 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.457 +08:00 [DBG] Disposing transaction.
2025-10-29 23:17:46.457 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.457 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.457 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.457 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.457 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.457 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:17:46.457 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 23:17:46.458 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.458 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.458 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:17:46.458 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.458 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:17:46.458 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:17:46.459 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:17:46.459 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.459 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:17:46.459 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:46.459 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:17:46.459 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 27
2025-10-29 23:17:52.653 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 23:17:54.112 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:17:54.113 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:17:54.113 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:23.990 +08:00 [DBG] Hosting starting
2025-10-29 23:19:24.010 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:19:24.011 +08:00 [INF] Hosting environment: Production
2025-10-29 23:19:24.012 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:19:24.012 +08:00 [DBG] Hosting started
2025-10-29 23:19:24.045 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:19:24.056 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:19:24.187 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:19:24.205 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:19:24.258 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:19:24.259 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:19:24.273 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:19:24.392 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:19:24.395 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:19:24.399 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:19:24.401 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.402 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:19:24.403 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:19:24.404 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.408 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.409 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.411 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.415 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:19:24.417 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 23:19:24.417 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 23:19:24.418 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.421 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.423 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.431 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.433 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.434 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (1ms).
2025-10-29 23:19:24.435 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:19:24.435 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:19:24.435 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.435 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.435 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.435 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.435 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:19:24.435 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:19:24.435 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:19:24.435 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.435 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.435 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.436 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.436 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.436 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.441 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.441 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.441 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:19:24.441 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.441 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.441 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:19:24.442 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:19:24.444 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.444 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:19:24.444 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.444 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.449 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:19:24.451 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.451 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:19:24.451 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:19:24.451 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.451 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.451 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.451 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:19:24.452 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.452 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.452 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:19:24.452 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:19:24.452 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.452 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:19:24.452 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.452 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.452 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:19:24.452 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.453 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.453 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:19:24.453 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:19:24.453 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.453 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:19:24.453 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.453 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.453 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:19:24.468 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:19:24.519 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:19:24.527 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.527 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.527 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:19:24.527 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.527 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.527 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:19:24.527 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:19:24.528 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.528 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:19:24.528 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.528 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.528 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:19:24.530 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:19:24.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.530 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.530 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:19:24.530 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.530 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.530 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:19:24.530 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:19:24.530 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.530 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:19:24.530 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.530 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.530 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:19:24.531 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:19:24.531 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:19:24.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:19:24.531 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:19:24.531 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:19:24.531 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.531 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:19:24.531 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.531 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.532 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:19:24.532 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:19:24.532 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:19:24.536 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:22:13.263 +08:00 [DBG] Hosting starting
2025-10-29 23:22:13.286 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:22:13.288 +08:00 [INF] Hosting environment: Production
2025-10-29 23:22:13.289 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:22:13.289 +08:00 [DBG] Hosting started
2025-10-29 23:22:13.328 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:22:13.340 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:22:13.478 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:22:13.498 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:22:13.561 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:22:13.562 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:22:13.579 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:22:13.710 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:22:13.713 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:22:13.717 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:22:13.719 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.720 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:22:13.721 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:22:13.721 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.725 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.727 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.728 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.732 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:22:13.734 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-10-29 23:22:13.734 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 23:22:13.735 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.738 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.741 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.748 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.750 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.750 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.751 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:22:13.751 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:22:13.751 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.752 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.752 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.752 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.752 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:22:13.752 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:22:13.752 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:22:13.752 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.752 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.752 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.752 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.752 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.752 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.757 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.757 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.757 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:22:13.757 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.757 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.757 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:22:13.758 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:22:13.759 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.760 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:22:13.760 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.760 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.765 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:22:13.766 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.766 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:22:13.766 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:22:13.766 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:22:13.767 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.767 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:22:13.767 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:22:13.767 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:22:13.767 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:22:13.767 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.767 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:22:13.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:22:13.767 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:22:13.767 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.767 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.768 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:22:13.782 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:22:13.836 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:22:13.844 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.844 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.844 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:22:13.844 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.844 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.844 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:22:13.844 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:22:13.844 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.844 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:22:13.844 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.844 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.845 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:22:13.846 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:22:13.846 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.846 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.846 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:22:13.846 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.846 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.846 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:22:13.846 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:22:13.846 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.846 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:22:13.846 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.846 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.846 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:22:13.847 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:22:13.847 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.847 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.847 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:22:13.847 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.847 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:22:13.847 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:22:13.847 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:22:13.847 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.847 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:22:13.847 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.847 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.848 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:22:13.848 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:22:13.848 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:22:13.851 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:26:22.201 +08:00 [INF] === 开始登录流程 ===
2025-10-29 23:26:22.201 +08:00 [INF] 用户名: student
2025-10-29 23:26:22.201 +08:00 [INF] 密码长度: 10
2025-10-29 23:26:22.201 +08:00 [INF] AuthService是否为null: False
2025-10-29 23:26:22.201 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 23:26:22.203 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 23:26:22.203 +08:00 [INF] 接收到的用户名: student
2025-10-29 23:26:22.203 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 23:26:22.203 +08:00 [INF] 开始查询用户
2025-10-29 23:26:22.203 +08:00 [INF] UserRepository是否为null: False
2025-10-29 23:26:22.203 +08:00 [INF] Context是否为null: False
2025-10-29 23:26:22.203 +08:00 [INF] 测试数据库连接...
2025-10-29 23:26:22.205 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:26:22.205 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:26:22.205 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.205 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.205 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.205 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.205 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 23:26:22.206 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 23:26:22.223 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:22.226 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:26:22.226 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:26:22.226 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.226 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.226 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.226 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.226 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.226 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:26:22.226 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:26:22.226 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.226 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.226 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.226 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.226 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 23:26:22.228 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 23:26:22.241 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:22.243 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.243 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.243 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.243 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.244 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.244 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:26:22.246 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:26:22.256 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.270 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.270 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 24ms reading results.
2025-10-29 23:26:22.270 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.270 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.270 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 23:26:22.271 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 23:26:22.271 +08:00 [INF] 用户是否激活: True
2025-10-29 23:26:22.271 +08:00 [INF] 登录失败次数: 0
2025-10-29 23:26:22.271 +08:00 [INF] 检查账户锁定状态
2025-10-29 23:26:22.272 +08:00 [INF] 开始验证密码
2025-10-29 23:26:22.272 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 23:26:22.272 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 23:26:22.272 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 23:26:22.272 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 23:26:22.272 +08:00 [INF] 密码哈希长度: 60
2025-10-29 23:26:22.272 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 23:26:22.496 +08:00 [INF] 密码验证结果: True
2025-10-29 23:26:22.496 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 23:26:22.497 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:26:22.498 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:26:22.507 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:22.510 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.513 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:26:22.530 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.531 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.531 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.531 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.531 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.531 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:26:22.532 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:26:22.536 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.536 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 3ms reading results.
2025-10-29 23:26:22.536 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.536 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.539 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.539 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:26:22.539 +08:00 [INF] 用户信息更新完成
2025-10-29 23:26:22.539 +08:00 [INF] 用户登录成功 - student
2025-10-29 23:26:22.539 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 23:26:22.540 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 23:26:22.540 +08:00 [INF] 成功: True
2025-10-29 23:26:22.540 +08:00 [INF] 消息: 登录成功
2025-10-29 23:26:22.540 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:26:22.540 +08:00 [INF] 用户 student 登录成功
2025-10-29 23:26:22.541 +08:00 [INF] 上次登录时间: 2025-10-29 23:17:25
2025-10-29 23:26:22.541 +08:00 [INF] 触发登录成功事件
2025-10-29 23:26:22.542 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 23:26:22.542 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 23:26:22.542 +08:00 [INF] 用户ID: 2
2025-10-29 23:26:22.542 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:26:22.555 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 23:26:22.556 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 23:26:22.556 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 23:26:22.564 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 23:26:22.568 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 23:26:22.571 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:22.571 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.571 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.571 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.571 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.571 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.571 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:26:22.572 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:26:22.572 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.572 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.572 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.572 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.575 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 23:26:22.601 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.603 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.603 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.603 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.603 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.603 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.603 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:26:22.604 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:26:22.606 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.610 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.610 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.610 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.610 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.610 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.610 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.610 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:26:22.610 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.610 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.613 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 23:26:22.616 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:26:22.616 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:26:22.624 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.626 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.626 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.626 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.626 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.626 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.626 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:26:22.627 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:26:22.627 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.627 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.627 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.627 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.628 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 23:26:22.630 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.630 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.630 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.630 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.630 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.630 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.630 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:26:22.631 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:26:22.632 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.642 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.643 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.643 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.643 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.643 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.643 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.643 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 23:26:22.643 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.643 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.648 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 23:26:22.649 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.650 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.650 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.650 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.650 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.650 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.650 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:26:22.650 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:26:22.651 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.654 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.654 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:26:22.654 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.654 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.662 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 23:26:22.663 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 23:26:22.663 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 23:26:22.663 +08:00 [INF] 用户ID: 2
2025-10-29 23:26:22.663 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:26:22.663 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 23:26:22.663 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 23:26:22.663 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 23:26:22.664 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 23:26:22.666 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.666 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.666 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.666 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.666 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.666 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.666 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:26:22.667 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:26:22.670 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.671 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.672 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.679 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.679 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 23:26:22.679 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.679 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.680 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 23:26:22.686 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 23:26:22.686 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 23:26:22.687 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 23:26:22.687 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 23:26:22.688 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 23:26:22.688 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:26:22.688 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:26:22.698 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.698 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.698 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.698 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.698 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.698 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.698 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:26:22.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:26:22.699 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.699 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.700 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.701 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.704 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.704 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.713 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.713 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.714 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.714 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 23:26:22.714 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.714 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.714 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 23:26:22.715 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 23:26:22.719 +08:00 [INF] 开始加载学生考试结果
2025-10-29 23:26:22.721 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.721 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.721 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.721 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.721 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.721 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:26:22.721 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:26:22.721 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.722 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.722 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.722 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.722 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 23:26:22.729 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 23:26:22.730 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:22.730 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.730 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.731 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.731 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.731 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.731 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:26:22.731 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:26:22.731 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.731 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.731 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.731 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.731 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 23:26:22.732 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 23:26:22.732 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 23:26:22.740 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:26:22.740 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.740 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.740 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.740 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.740 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.740 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:26:22.740 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:26:22.740 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.740 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.740 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.740 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.753 +08:00 [INF] 所有页面加载完成
2025-10-29 23:26:22.754 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 23:26:22.754 +08:00 [INF] 当前用户: student (Student)
2025-10-29 23:26:22.754 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 23:26:22.754 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 23:26:22.754 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 23:26:22.754 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 23:26:22.754 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 23:26:22.754 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 23:26:22.754 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 23:26:22.754 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 23:26:22.754 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 23:26:22.754 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 23:26:22.754 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 23:26:22.754 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 23:26:22.754 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 23:26:22.754 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 23:26:22.754 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 23:26:22.795 +08:00 [INF] 关闭登录窗口
2025-10-29 23:26:22.801 +08:00 [INF] === 登录流程结束 ===
2025-10-29 23:26:22.829 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.829 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.830 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.830 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.830 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.830 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:26:22.830 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:26:22.830 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.830 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.830 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.830 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.830 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.831 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.831 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.831 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.831 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.832 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.832 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:26:22.832 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:26:22.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.832 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.832 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.832 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.832 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.832 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.832 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.832 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.832 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.832 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.832 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:26:22.833 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:26:22.833 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.833 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.833 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.833 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:22.833 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.833 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.833 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:22.833 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.833 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:22.833 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:26:22.833 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:22.834 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.834 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:22.834 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:22.834 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:24.815 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 23:26:24.815 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 23:26:24.817 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:26:24.818 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 23:26:24.818 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:26:24.818 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:26:24.829 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:24.830 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.830 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.830 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:24.830 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:24.830 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:24.830 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:24.831 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:24.831 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.831 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.832 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.833 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:24.834 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.834 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 2ms reading results.
2025-10-29 23:26:24.834 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.834 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:24.834 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:26:24.834 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:26:24.834 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:26:24.835 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 23:26:24.838 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:24.839 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.839 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.839 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:24.839 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:24.839 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:24.839 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:26:24.839 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:26:24.839 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.839 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:24.839 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:24.839 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:24.840 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:26:24.840 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:26:25.614 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:26:25.614 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.614 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.614 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.614 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.614 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.614 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:25.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:25.615 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.615 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.615 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.615 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.615 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:26:25.615 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:26:25.615 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:26:25.616 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.616 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.616 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.616 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.616 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.616 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:26:25.616 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:26:25.616 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.616 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.616 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.616 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.616 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:26:25.616 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:26:25.618 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:26:25.619 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.619 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.619 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.619 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.619 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.619 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:25.619 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:25.619 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.619 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.619 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.619 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.620 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:26:25.620 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:26:25.620 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:26:25.620 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.620 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.620 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.620 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.620 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.620 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:26:25.620 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:26:25.620 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.620 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.620 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.620 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.620 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:26:25.620 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:26:25.621 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.621 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.621 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.621 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.621 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.621 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:25.621 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:26:25.621 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.621 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.621 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.621 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.634 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.637 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.638 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.639 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:26:25.639 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:26:25.657 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:26:25.663 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.664 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.664 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.664 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.664 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.664 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:26:25.664 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:26:25.667 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.671 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.671 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 7ms reading results.
2025-10-29 23:26:25.671 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.671 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.673 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.673 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:26:25.675 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.686 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.686 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.687 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.688 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:26:25.688 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:26:25.690 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:26:25.693 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.693 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.694 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 23:26:25.695 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 23:26:25.695 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.695 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.695 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.695 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.696 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.696 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.697 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.697 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:26:25.697 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.697 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.697 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.697 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.697 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.697 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.697 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.697 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.697 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.697 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.697 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.697 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.698 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.698 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.698 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.698 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.698 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.698 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.698 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.698 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.698 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.698 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.698 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.698 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.698 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.698 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.698 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.698 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.698 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.698 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:26:25.698 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:26:25.698 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.698 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:26:25.699 +08:00 [DBG] Committing transaction.
2025-10-29 23:26:25.701 +08:00 [DBG] Committed transaction.
2025-10-29 23:26:25.702 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.702 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.703 +08:00 [DBG] Disposing transaction.
2025-10-29 23:26:25.703 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.703 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.703 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.703 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.703 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.703 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.703 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 23:26:25.703 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 23:26:25.704 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:26:25.704 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:26:25.704 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 23:26:25.704 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 23:26:25.704 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 23:26:25.719 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 23:26:25.722 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:26:25.722 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.722 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.722 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:26:25.722 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.722 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:26:25.723 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:26:25.724 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:26:25.726 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:26:25.728 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.728 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:26:25.728 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:25.728 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:26:25.728 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 28
2025-10-29 23:26:41.501 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 23:26:42.535 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:26:42.536 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:26:42.536 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.302 +08:00 [DBG] Hosting starting
2025-10-29 23:29:30.324 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:29:30.326 +08:00 [INF] Hosting environment: Production
2025-10-29 23:29:30.326 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:29:30.326 +08:00 [DBG] Hosting started
2025-10-29 23:29:30.362 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:29:30.375 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:29:30.507 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:29:30.524 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:29:30.578 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:29:30.578 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:29:30.597 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:29:30.719 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:29:30.722 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:29:30.726 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:29:30.728 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.730 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:29:30.731 +08:00 [DBG] Created DbConnection. (1ms).
2025-10-29 23:29:30.732 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.735 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.736 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.738 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.742 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:29:30.744 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 23:29:30.744 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-10-29 23:29:30.745 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.749 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.752 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.759 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.761 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.761 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.762 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:29:30.762 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:29:30.762 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.763 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.763 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.763 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.763 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:29:30.763 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:29:30.763 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:29:30.763 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.763 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.763 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.763 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.763 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.763 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.768 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.768 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.768 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:29:30.768 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.768 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.768 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:29:30.768 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:29:30.770 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.770 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:29:30.770 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.770 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.776 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:29:30.777 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.777 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:29:30.777 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:29:30.777 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:29:30.778 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.778 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.778 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:29:30.778 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:29:30.778 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.778 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:29:30.778 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:29:30.778 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.778 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:29:30.778 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:29:30.778 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:29:30.778 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.778 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.778 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:29:30.795 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:29:30.845 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:29:30.853 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.853 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.853 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:29:30.853 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.853 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.853 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:29:30.853 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:29:30.854 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.854 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:29:30.854 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.854 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.854 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:29:30.856 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:29:30.856 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.856 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.856 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:29:30.856 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.856 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.856 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:29:30.856 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:29:30.856 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.856 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:29:30.856 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.856 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.856 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:29:30.857 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:29:30.857 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.857 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.857 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:29:30.857 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.857 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:29:30.857 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:29:30.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:29:30.857 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.857 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:29:30.857 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.857 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.858 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:29:30.858 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:29:30.858 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:29:30.862 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:34:49.448 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:48:39.472 +08:00 [DBG] Hosting starting
2025-10-29 23:48:39.493 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-29 23:48:39.495 +08:00 [INF] Hosting environment: Production
2025-10-29 23:48:39.495 +08:00 [INF] Content root path: E:\Project\exam_trae\ExamSystem.WPF
2025-10-29 23:48:39.495 +08:00 [DBG] Hosting started
2025-10-29 23:48:39.543 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-29 23:48:39.556 +08:00 [INF] SQLite 数据库路径: E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db
2025-10-29 23:48:39.704 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:48:39.724 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:48:39.786 +08:00 [DBG] No relationship from 'ExamRecord' to 'User' has been configured by convention because there are multiple properties on one entity type - {'Grader', 'User'} that could be matched with the properties on the other entity type - {'ExamRecords'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:48:39.786 +08:00 [DBG] No relationship from 'User' to 'ExamRecord' has been configured by convention because there are multiple properties on one entity type - {'ExamRecords'} that could be matched with the properties on the other entity type - {'Grader', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-10-29 23:48:39.801 +08:00 [DBG] The index {'NotificationId'} was not created on entity type 'NotificationRecipient' as the properties are already covered by the index {'NotificationId', 'ReceiverId'}.
2025-10-29 23:48:39.924 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:48:39.927 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:39.931 +08:00 [DBG] Created DbConnection. (2ms).
2025-10-29 23:48:39.934 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.935 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:39.936 +08:00 [DBG] Created DbConnection. (1ms).
2025-10-29 23:48:39.937 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.941 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.943 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.944 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.948 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:48:39.951 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-10-29 23:48:39.951 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-10-29 23:48:39.952 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.956 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.959 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.967 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.969 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.970 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.971 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:39.971 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:48:39.971 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.972 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.972 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.972 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.972 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:48:39.972 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:48:39.972 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:48:39.972 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.972 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.972 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.972 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.972 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.972 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.977 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.977 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.977 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:39.977 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:39.977 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:39.977 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:48:39.978 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:48:39.980 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.981 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 2ms reading results.
2025-10-29 23:48:39.981 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.981 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.988 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:48:39.990 +08:00 [DBG] Migrating using database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.990 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:39.990 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:48:39.990 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.990 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:48:39.991 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.991 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.991 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:39.991 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-29 23:48:39.991 +08:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.991 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-29 23:48:39.991 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.991 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:39.991 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:39.991 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:48:39.992 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-29 23:48:39.992 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.992 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:39.992 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:39.992 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:39.992 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-10-29 23:48:40.008 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 2)'
2025-10-29 23:48:40.063 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 2)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:40.071 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.071 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.071 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:40.071 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:40.071 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:40.072 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:48:40.072 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 2)
2025-10-29 23:48:40.072 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.072 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:40.072 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.072 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:40.073 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 0)'
2025-10-29 23:48:40.074 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:40.074 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.074 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.075 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:40.075 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:40.075 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:40.075 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:48:40.075 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 0)
2025-10-29 23:48:40.075 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.075 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:40.075 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.075 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:40.075 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => (int)u.Role == 1)'
2025-10-29 23:48:40.076 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Role == 1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:40.076 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.076 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.076 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:40.076 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:40.076 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:40.076 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:48:40.076 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Role" = 1)
2025-10-29 23:48:40.076 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.076 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:40.076 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.076 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:40.077 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:48:40.077 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:40.077 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:40.081 +08:00 [DBG] Entity Framework Core 8.0.8 initialized 'ExamDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.8' with options: MigrationsAssembly=ExamSystem.Infrastructure 
2025-10-29 23:48:46.369 +08:00 [INF] === 开始登录流程 ===
2025-10-29 23:48:46.370 +08:00 [INF] 用户名: student
2025-10-29 23:48:46.370 +08:00 [INF] 密码长度: 10
2025-10-29 23:48:46.370 +08:00 [INF] AuthService是否为null: False
2025-10-29 23:48:46.370 +08:00 [INF] 调用AuthService.LoginAsync方法
2025-10-29 23:48:46.372 +08:00 [INF] === AuthService.LoginAsync 开始 ===
2025-10-29 23:48:46.372 +08:00 [INF] 接收到的用户名: student
2025-10-29 23:48:46.372 +08:00 [INF] 接收到的密码长度: 10
2025-10-29 23:48:46.372 +08:00 [INF] 开始查询用户
2025-10-29 23:48:46.372 +08:00 [INF] UserRepository是否为null: False
2025-10-29 23:48:46.372 +08:00 [INF] Context是否为null: False
2025-10-29 23:48:46.372 +08:00 [INF] 测试数据库连接...
2025-10-29 23:48:46.373 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:46.373 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:48:46.373 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.374 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.374 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.374 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.374 +08:00 [INF] 数据库连接测试结果: True
2025-10-29 23:48:46.374 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Count()'
2025-10-29 23:48:46.383 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Users AS u), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:46.385 +08:00 [DBG] Creating DbConnection.
2025-10-29 23:48:46.385 +08:00 [DBG] Created DbConnection. (0ms).
2025-10-29 23:48:46.385 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.385 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.385 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.385 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.385 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.385 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:48:46.385 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2025-10-29 23:48:46.386 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.386 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:46.386 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.386 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.386 +08:00 [INF] 数据库中用户总数: 3
2025-10-29 23:48:46.386 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2025-10-29 23:48:46.399 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:46.401 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.401 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.401 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.401 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.402 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.402 +08:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:48:46.404 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__username_0
LIMIT 1
2025-10-29 23:48:46.414 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.436 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.436 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 32ms reading results.
2025-10-29 23:48:46.436 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.436 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.436 +08:00 [INF] 用户查询结果: 找到用户
2025-10-29 23:48:46.437 +08:00 [INF] 用户ID: 2, 用户名: student, 角色: Student
2025-10-29 23:48:46.437 +08:00 [INF] 用户是否激活: True
2025-10-29 23:48:46.437 +08:00 [INF] 登录失败次数: 0
2025-10-29 23:48:46.437 +08:00 [INF] 检查账户锁定状态
2025-10-29 23:48:46.440 +08:00 [INF] 开始验证密码
2025-10-29 23:48:46.440 +08:00 [INF] 存储的密码哈希长度: 60
2025-10-29 23:48:46.440 +08:00 [INF] 密码哈希是否为空: False
2025-10-29 23:48:46.440 +08:00 [INF] 密码哈希前20字符: $2a$12$CDurh4lylchoR...
2025-10-29 23:48:46.440 +08:00 [INF] 开始验证密码 - 用户: student
2025-10-29 23:48:46.440 +08:00 [INF] 密码哈希长度: 60
2025-10-29 23:48:46.440 +08:00 [INF] 密码哈希前缀: $2a$12$CDu
2025-10-29 23:48:46.687 +08:00 [INF] 密码验证结果: True
2025-10-29 23:48:46.687 +08:00 [INF] 密码验证成功，更新用户信息
2025-10-29 23:48:46.688 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:48:46.689 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:48:46.696 +08:00 [DBG] The unchanged property 'User.LastLoginAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:46.698 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.701 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:48:46.719 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.719 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.720 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.720 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.720 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.720 +08:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:48:46.721 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "UserId" = @p1
RETURNING 1;
2025-10-29 23:48:46.725 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.725 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:48:46.726 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.726 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.728 +08:00 [DBG] An entity of type 'User' tracked by 'ExamDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.728 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:48:46.729 +08:00 [INF] 用户信息更新完成
2025-10-29 23:48:46.729 +08:00 [INF] 用户登录成功 - student
2025-10-29 23:48:46.729 +08:00 [INF] === AuthService.LoginAsync 结束 ===
2025-10-29 23:48:46.729 +08:00 [INF] === 登录服务返回结果 ===
2025-10-29 23:48:46.729 +08:00 [INF] 成功: True
2025-10-29 23:48:46.729 +08:00 [INF] 消息: 登录成功
2025-10-29 23:48:46.729 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:48:46.729 +08:00 [INF] 用户 student 登录成功
2025-10-29 23:48:46.731 +08:00 [INF] 上次登录时间: 2025-10-29 23:44:23
2025-10-29 23:48:46.731 +08:00 [INF] 触发登录成功事件
2025-10-29 23:48:46.731 +08:00 [INF] === LoginWindow.OnLoginSuccess ===
2025-10-29 23:48:46.732 +08:00 [INF] 登录成功的用户: student (Student)
2025-10-29 23:48:46.732 +08:00 [INF] 用户ID: 2
2025-10-29 23:48:46.732 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:48:46.745 +08:00 [INF] MainWindow 构造函数完成，延迟加载页面直到用户登录
2025-10-29 23:48:46.745 +08:00 [INF] 获取到MainWindow实例，准备设置用户信息
2025-10-29 23:48:46.746 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=ViewOwnGrades, Result=True
2025-10-29 23:48:46.754 +08:00 [INF] 在LoadPages中为DashboardViewModel设置用户信息并加载数据
2025-10-29 23:48:46.758 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-10-29 23:48:46.761 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required, 1], [Property: User.Email (string) Index MaxLength(200), 2], [Property: User.IsActive (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.LockoutEnd (DateTime?), 5], [Property: User.LoginFailCount (int) Required, 6], [Property: User.PasswordHash (string) Required MaxLength(255), 7], [Property: User.Phone (string) MaxLength(20), 8], [Property: User.RealName (string) MaxLength(100), 9], [Property: User.Role (UserRole) Required, 10], [Property: User.Username (string) Required Index MaxLength(50), 11] }
            SELECT TOP(1) u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
            FROM Users AS u
            WHERE u.UserId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:46.761 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.761 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.761 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.761 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.761 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.761 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:48:46.761 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:48:46.761 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.761 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:46.761 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.761 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.765 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Where(ep => ep.IsPublished || ep.Status == "已发布" && ep.StartTime <= __currentTime_0 && ep.EndTime >= __currentTime_0)
    .Select(ep => new StudentExamInfo{ 
        PaperId = ep.PaperId, 
        Title = ep.Name, 
        Subject = "通用", 
        Duration = ep.Duration, 
        TotalQuestions = ep.PaperQuestions != null ? ep.PaperQuestions.Count : 0, 
        StartTime = ep.StartTime ?? DateTime.Now, 
        EndTime = ep.EndTime ?? DateTime.Now.AddDays(30), 
        Description = ep.Description ?? "", 
        HasTaken = DbSet<ExamRecord>()
            .Any(er => er.UserId == __userId_1 && er.PaperId == ep.PaperId) 
    }
    )
    .OrderBy(e => e.StartTime)'
2025-10-29 23:48:46.792 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<StudentExamInfo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PaperQuestion.OrderIndex (int) Required, 4], [Property: PaperQuestion.PaperId (int) Required FK Index, 5], [Property: PaperQuestion.QuestionId (int) Required FK Index, 6], [Property: PaperQuestion.Score (decimal) Required, 7] }
            4 -> 3
            5 -> 8
            6 -> 9
            7 -> 10
            8 -> 11
            9 -> 12
        SELECT e.PaperId, e.Name, e.Duration, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, (
            SELECT COUNT(*)
            FROM PaperQuestions AS p0
            WHERE (e.PaperId != NULL) && (e.PaperId == p0.PaperId)), COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE(e.EndTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) + ' days'), '0'), '.')), COALESCE(e.Description, ''), EXISTS (
            SELECT 1
            FROM ExamRecords AS e0
            WHERE (e0.UserId == @__userId_1) && (e0.PaperId == e.PaperId))
        FROM ExamPapers AS e
        LEFT JOIN PaperQuestions AS p ON e.PaperId == p.PaperId
        WHERE ((e.IsPublished || (e.Status == '已发布')) && (e.StartTime <= @__currentTime_0)) && (e.EndTime >= @__currentTime_0)
        ORDER BY COALESCE(e.StartTime, rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')) ASC, e.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, StudentExamInfo>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.795 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.795 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.795 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.795 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.795 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.795 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:48:46.795 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:48:46.798 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.801 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.802 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.802 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:48:46.802 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.802 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.805 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .AsNoTracking()
    .Include(er => er.ExamPaper)
    .ThenInclude(ep => ep.PaperQuestions)
    .Where(er => er.UserId == __userId_0 && (int)er.Status == 4 || (int)er.Status == 3 || (int)er.Status == 5)
    .OrderByDescending(er => er.StartTime)'
2025-10-29 23:48:46.808 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:48:46.808 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:48:46.817 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
            5 -> 34
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime, e0.Status, e0.TotalScore, e0.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score
        FROM ExamRecords AS e
        INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
        LEFT JOIN PaperQuestions AS p ON e0.PaperId == p.PaperId
        WHERE (e.UserId == @__userId_0) && e.Status IN (4, 3, 5)
        ORDER BY e.StartTime DESC, e.RecordId ASC, e0.PaperId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.819 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.819 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.819 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.819 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.819 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.819 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:48:46.819 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:48:46.820 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.820 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:46.820 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.820 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.821 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()'
2025-10-29 23:48:46.823 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamRecord>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
        SELECT e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
        FROM ExamRecords AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.823 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.823 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.823 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.823 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.823 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.823 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:48:46.823 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:48:46.825 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.834 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.835 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.835 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 11ms reading results.
2025-10-29 23:48:46.835 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.835 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.840 +08:00 [DBG] Compiling query expression: 
'DbSet<QuestionBank>()'
2025-10-29 23:48:46.842 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<QuestionBank>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: QuestionBank.BankId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: QuestionBank.CreatedAt (DateTime) Required, 1], [Property: QuestionBank.CreatorId (int) Required FK Index, 2], [Property: QuestionBank.Description (string) MaxLength(500), 3], [Property: QuestionBank.IsActive (bool) Required, 4], [Property: QuestionBank.Name (string) Required MaxLength(100), 5], [Property: QuestionBank.UpdatedAt (DateTime) Required, 6] }
        SELECT q.BankId, q.CreatedAt, q.CreatorId, q.Description, q.IsActive, q.Name, q.UpdatedAt
        FROM QuestionBanks AS q), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, QuestionBank>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.842 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.842 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.842 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.842 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.842 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.842 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:48:46.842 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "q"."BankId", "q"."CreatedAt", "q"."CreatorId", "q"."Description", "q"."IsActive", "q"."Name", "q"."UpdatedAt"
FROM "QuestionBanks" AS "q"
2025-10-29 23:48:46.843 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionBank' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.846 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.846 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 4ms reading results.
2025-10-29 23:48:46.846 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.846 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.855 +08:00 [INF] 在LoadPages中为QuestionBankViewModel设置用户信息
2025-10-29 23:48:46.855 +08:00 [INF] === QuestionBankViewModel.SetCurrentUser ===
2025-10-29 23:48:46.855 +08:00 [INF] 接收到的用户: student (Student)
2025-10-29 23:48:46.855 +08:00 [INF] 用户ID: 2
2025-10-29 23:48:46.855 +08:00 [INF] 用户对象是否为null: False
2025-10-29 23:48:46.855 +08:00 [INF] 设置后的CurrentUser: student (Student)
2025-10-29 23:48:46.856 +08:00 [INF] CurrentUser是否为null: False
2025-10-29 23:48:46.856 +08:00 [INF] QuestionBankViewModel: 用户信息设置完成
2025-10-29 23:48:46.857 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()'
2025-10-29 23:48:46.859 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
        FROM ExamPapers AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.859 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.859 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.859 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.859 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.859 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.859 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:48:46.859 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
FROM "ExamPapers" AS "e"
2025-10-29 23:48:46.862 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.864 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.871 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.871 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 12ms reading results.
2025-10-29 23:48:46.871 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.871 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.872 +08:00 [INF] 加载试卷列表成功，共 1 个试卷
2025-10-29 23:48:46.881 +08:00 [INF] StudentExamListViewModel 在构造时获取到当前用户: student (ID=2)
2025-10-29 23:48:46.882 +08:00 [INF] 开始加载学生可参加的考试列表，用户ID: 2
2025-10-29 23:48:46.882 +08:00 [INF] 开始获取已发布的试卷列表
2025-10-29 23:48:46.883 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.Creator)
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .Where(p => p.IsPublished)
    .OrderByDescending(p => p.CreatedAt)'
2025-10-29 23:48:46.884 +08:00 [DBG] Including navigation: 'ExamPaper.Creator'.
2025-10-29 23:48:46.884 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:48:46.884 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:48:46.892 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ExamPaper>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
            1 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.CreatedAt (DateTime) Required, 18], [Property: User.Email (string) Index MaxLength(200), 19], [Property: User.IsActive (bool) Required, 20], [Property: User.LastLoginAt (DateTime?), 21], [Property: User.LockoutEnd (DateTime?), 22], [Property: User.LoginFailCount (int) Required, 23], [Property: User.PasswordHash (string) Required MaxLength(255), 24], [Property: User.Phone (string) MaxLength(20), 25], [Property: User.RealName (string) MaxLength(100), 26], [Property: User.Role (UserRole) Required, 27], [Property: User.Username (string) Required Index MaxLength(50), 28] }
            2 -> 0
            3 -> 17
            4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: PaperQuestion.OrderIndex (int) Required, 30], [Property: PaperQuestion.PaperId (int) Required FK Index, 31], [Property: PaperQuestion.QuestionId (int) Required FK Index, 32], [Property: PaperQuestion.Score (decimal) Required, 33] }
            5 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: Question.Analysis (string), 35], [Property: Question.Answer (string) Required, 36], [Property: Question.BankId (int) Required FK Index, 37], [Property: Question.Content (string) Required, 38], [Property: Question.CreatedAt (DateTime) Required, 39], [Property: Question.Difficulty (Difficulty) Required, 40], [Property: Question.GuidanceOverlaysJson (string), 41], [Property: Question.IsActive (bool) Required, 42], [Property: Question.MapDrawingConfigJson (string), 43], [Property: Question.QuestionType (QuestionType) Required, 44], [Property: Question.ReferenceOverlaysJson (string), 45], [Property: Question.ReviewRubricJson (string), 46], [Property: Question.Score (decimal) Required, 47], [Property: Question.ShowBuildingLayersJson (string), 48], [Property: Question.Tags (string) MaxLength(200), 49], [Property: Question.TimeLimitSeconds (int) Required, 50], [Property: Question.Title (string) Required MaxLength(200), 51], [Property: Question.UpdatedAt (DateTime) Required, 52] }
            6 -> 29
            7 -> 34
        SELECT e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username, t.Id, t.OrderIndex, t.PaperId, t.QuestionId, t.Score, t.QuestionId0, t.Analysis, t.Answer, t.BankId, t.Content, t.CreatedAt, t.Difficulty, t.GuidanceOverlaysJson, t.IsActive, t.MapDrawingConfigJson, t.QuestionType, t.ReferenceOverlaysJson, t.ReviewRubricJson, t.Score0, t.ShowBuildingLayersJson, t.Tags, t.TimeLimitSeconds, t.Title, t.UpdatedAt
        FROM ExamPapers AS e
        INNER JOIN Users AS u ON e.CreatorId == u.UserId
        LEFT JOIN 
        (
            SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
            FROM PaperQuestions AS p
            INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
        ) AS t ON e.PaperId == t.PaperId
        WHERE e.IsPublished
        ORDER BY e.CreatedAt DESC, e.PaperId ASC, u.UserId ASC, t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.892 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.893 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.893 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.893 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.893 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.893 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:48:46.893 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username", "t"."Id", "t"."OrderIndex", "t"."PaperId", "t"."QuestionId", "t"."Score", "t"."QuestionId0", "t"."Analysis", "t"."Answer", "t"."BankId", "t"."Content", "t"."CreatedAt", "t"."Difficulty", "t"."GuidanceOverlaysJson", "t"."IsActive", "t"."MapDrawingConfigJson", "t"."QuestionType", "t"."ReferenceOverlaysJson", "t"."ReviewRubricJson", "t"."Score0", "t"."ShowBuildingLayersJson", "t"."Tags", "t"."TimeLimitSeconds", "t"."Title", "t"."UpdatedAt"
FROM "ExamPapers" AS "e"
INNER JOIN "Users" AS "u" ON "e"."CreatorId" = "u"."UserId"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t" ON "e"."PaperId" = "t"."PaperId"
WHERE "e"."IsPublished"
ORDER BY "e"."CreatedAt" DESC, "e"."PaperId", "u"."UserId", "t"."Id"
2025-10-29 23:48:46.894 +08:00 [DBG] The navigation 'ExamPaper.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.894 +08:00 [DBG] The navigation 'QuestionBank.Creator' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.894 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.896 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.899 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.899 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.908 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:46.909 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.909 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 15ms reading results.
2025-10-29 23:48:46.909 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.909 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.909 +08:00 [INF] 成功获取 1 个已发布的试卷
2025-10-29 23:48:46.910 +08:00 [INF] 成功加载 1 个可参加的考试
2025-10-29 23:48:46.915 +08:00 [INF] 开始加载学生考试结果
2025-10-29 23:48:46.916 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.916 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.916 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.916 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.916 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.916 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:48:46.916 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:48:46.916 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.916 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:46.917 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.917 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.917 +08:00 [INF] 成功加载 0 条考试结果
2025-10-29 23:48:46.940 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .Count()'
2025-10-29 23:48:46.942 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM NotificationRecipients AS n
            WHERE n.ReceiverId == @__receiverId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:46.942 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.942 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.942 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.942 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.942 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.942 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:48:46.942 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "NotificationRecipients" AS "n"
WHERE "n"."ReceiverId" = @__receiverId_0
2025-10-29 23:48:46.943 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.943 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:46.943 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.943 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.943 +08:00 [DBG] Compiling query expression: 
'DbSet<NotificationRecipient>()
    .Include(r => r.Notification)
    .ThenInclude(n => n.Sender)
    .Where(r => r.ReceiverId == __receiverId_0)
    .OrderByDescending(r => r.Notification.CreatedAt)
    .Skip(__p_1)
    .Take(__p_2)'
2025-10-29 23:48:46.944 +08:00 [DBG] Including navigation: 'NotificationRecipient.Notification'.
2025-10-29 23:48:46.944 +08:00 [DBG] Including navigation: 'Notification.Sender'.
2025-10-29 23:48:46.951 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<NotificationRecipient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: NotificationRecipient.NotificationRecipientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: NotificationRecipient.CreatedAt (DateTime) Required, 1], [Property: NotificationRecipient.DeliveryStatus (DeliveryStatus) Required, 2], [Property: NotificationRecipient.NotificationId (int) Required FK Index, 3], [Property: NotificationRecipient.ReadAt (DateTime?), 4], [Property: NotificationRecipient.ReceiverId (int) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Notification.NotificationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Notification.Content (string) Required, 7], [Property: Notification.CreatedAt (DateTime) Required, 8], [Property: Notification.Priority (NotificationPriority) Required, 9], [Property: Notification.Scope (NotificationScope) Required, 10], [Property: Notification.SenderId (int) Required FK Index, 11], [Property: Notification.Status (NotificationStatus) Required, 12], [Property: Notification.Title (string) Required MaxLength(200), 13] }
            2 -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: User.CreatedAt (DateTime) Required, 15], [Property: User.Email (string) Index MaxLength(200), 16], [Property: User.IsActive (bool) Required, 17], [Property: User.LastLoginAt (DateTime?), 18], [Property: User.LockoutEnd (DateTime?), 19], [Property: User.LoginFailCount (int) Required, 20], [Property: User.PasswordHash (string) Required MaxLength(255), 21], [Property: User.Phone (string) MaxLength(20), 22], [Property: User.RealName (string) MaxLength(100), 23], [Property: User.Role (UserRole) Required, 24], [Property: User.Username (string) Required Index MaxLength(50), 25] }
        SELECT t.NotificationRecipientId, t.CreatedAt, t.DeliveryStatus, t.NotificationId, t.ReadAt, t.ReceiverId, t.NotificationId0, t.Content, t.CreatedAt0, t.Priority, t.Scope, t.SenderId, t.Status, t.Title, u.UserId, u.CreatedAt, u.Email, u.IsActive, u.LastLoginAt, u.LockoutEnd, u.LoginFailCount, u.PasswordHash, u.Phone, u.RealName, u.Role, u.Username
        FROM 
        (
            SELECT n.NotificationRecipientId, n.CreatedAt, n.DeliveryStatus, n.NotificationId, n.ReadAt, n.ReceiverId, n0.NotificationId AS NotificationId0, n0.Content, n0.CreatedAt AS CreatedAt0, n0.Priority, n0.Scope, n0.SenderId, n0.Status, n0.Title
            FROM NotificationRecipients AS n
            INNER JOIN Notifications AS n0 ON n.NotificationId == n0.NotificationId
            WHERE n.ReceiverId == @__receiverId_0
            ORDER BY n0.CreatedAt DESC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Users AS u ON t.SenderId == u.UserId
        ORDER BY t.CreatedAt0 DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, NotificationRecipient>, 
    ExamSystem.Data.ExamDbContext, 
    False, 
    False, 
    True
)'
2025-10-29 23:48:46.951 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.951 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.952 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:46.952 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.952 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:46.952 +08:00 [DBG] Executing DbCommand [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:48:46.952 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__receiverId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."NotificationRecipientId", "t"."CreatedAt", "t"."DeliveryStatus", "t"."NotificationId", "t"."ReadAt", "t"."ReceiverId", "t"."NotificationId0", "t"."Content", "t"."CreatedAt0", "t"."Priority", "t"."Scope", "t"."SenderId", "t"."Status", "t"."Title", "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM (
    SELECT "n"."NotificationRecipientId", "n"."CreatedAt", "n"."DeliveryStatus", "n"."NotificationId", "n"."ReadAt", "n"."ReceiverId", "n0"."NotificationId" AS "NotificationId0", "n0"."Content", "n0"."CreatedAt" AS "CreatedAt0", "n0"."Priority", "n0"."Scope", "n0"."SenderId", "n0"."Status", "n0"."Title"
    FROM "NotificationRecipients" AS "n"
    INNER JOIN "Notifications" AS "n0" ON "n"."NotificationId" = "n0"."NotificationId"
    WHERE "n"."ReceiverId" = @__receiverId_0
    ORDER BY "n0"."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
INNER JOIN "Users" AS "u" ON "t"."SenderId" = "u"."UserId"
ORDER BY "t"."CreatedAt0" DESC
2025-10-29 23:48:46.952 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.952 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:46.952 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:46.952 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:46.968 +08:00 [INF] 所有页面加载完成
2025-10-29 23:48:46.968 +08:00 [INF] === UpdateViewModelsWithCurrentUser ===
2025-10-29 23:48:46.968 +08:00 [INF] 当前用户: student (Student)
2025-10-29 23:48:46.968 +08:00 [INF] DashboardFrame是否为null: False
2025-10-29 23:48:46.968 +08:00 [INF] DashboardFrame.Content是否为null: True
2025-10-29 23:48:46.968 +08:00 [INF] QuestionBankFrame是否为null: False
2025-10-29 23:48:46.968 +08:00 [INF] QuestionBankFrame.Content是否为null: True
2025-10-29 23:48:46.968 +08:00 [INF] ExamPaperFrame是否为null: False
2025-10-29 23:48:46.968 +08:00 [INF] ExamPaperFrame.Content是否为null: True
2025-10-29 23:48:46.969 +08:00 [WRN] ExamPaperFrame.Content不是ExamPaperView类型或为null
2025-10-29 23:48:46.969 +08:00 [INF] ExamFrame是否为null: False
2025-10-29 23:48:46.969 +08:00 [INF] ExamFrame.Content是否为null: True
2025-10-29 23:48:46.969 +08:00 [INF] ExamFrame.Content不是StudentExamListView类型（可能为教师/管理员视图）
2025-10-29 23:48:46.969 +08:00 [INF] ExamResultFrame是否为null: False
2025-10-29 23:48:46.969 +08:00 [INF] ExamResultFrame.Content是否为null: True
2025-10-29 23:48:46.969 +08:00 [INF] ExamResultFrame.Content不是StudentExamResultView类型（可能为教师/管理员视图）
2025-10-29 23:48:46.969 +08:00 [INF] 所有ViewModel的用户信息已更新
2025-10-29 23:48:46.969 +08:00 [INF] 用户信息设置完成，显示主窗口
2025-10-29 23:48:47.008 +08:00 [INF] 关闭登录窗口
2025-10-29 23:48:47.014 +08:00 [INF] === 登录流程结束 ===
2025-10-29 23:48:47.078 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.078 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.078 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:47.078 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.078 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.078 +08:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:48:47.078 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."UserId", "u"."CreatedAt", "u"."Email", "u"."IsActive", "u"."LastLoginAt", "u"."LockoutEnd", "u"."LoginFailCount", "u"."PasswordHash", "u"."Phone", "u"."RealName", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."UserId" = @__id_0
LIMIT 1
2025-10-29 23:48:47.078 +08:00 [DBG] Context 'ExamDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.078 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.078 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:47.078 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.079 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:47.079 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.079 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.079 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:47.079 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.080 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.080 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:48:47.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_1='?' (DbType = Int32), @__currentTime_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."PaperId", "e"."Name", "e"."Duration", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", (
    SELECT COUNT(*)
    FROM "PaperQuestions" AS "p0"
    WHERE "e"."PaperId" = "p0"."PaperId"), COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), COALESCE("e"."EndTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime', CAST(30.0 AS TEXT) || ' days'), '0'), '.')), COALESCE("e"."Description", ''), EXISTS (
    SELECT 1
    FROM "ExamRecords" AS "e0"
    WHERE "e0"."UserId" = @__userId_1 AND "e0"."PaperId" = "e"."PaperId")
FROM "ExamPapers" AS "e"
LEFT JOIN "PaperQuestions" AS "p" ON "e"."PaperId" = "p"."PaperId"
WHERE ("e"."IsPublished" OR "e"."Status" = '已发布') AND "e"."StartTime" <= @__currentTime_0 AND "e"."EndTime" >= @__currentTime_0
ORDER BY COALESCE("e"."StartTime", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'), '0'), '.')), "e"."PaperId"
2025-10-29 23:48:47.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.080 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.080 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.080 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:47.080 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.080 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:47.080 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.080 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.080 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:47.080 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.080 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.080 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:48:47.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime", "e0"."Status", "e0"."TotalScore", "e0"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score"
FROM "ExamRecords" AS "e"
INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
LEFT JOIN "PaperQuestions" AS "p" ON "e0"."PaperId" = "p"."PaperId"
WHERE "e"."UserId" = @__userId_0 AND "e"."Status" IN (4, 3, 5)
ORDER BY "e"."StartTime" DESC, "e"."RecordId", "e0"."PaperId"
2025-10-29 23:48:47.080 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.081 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:47.081 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.081 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:47.081 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.081 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.081 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:47.081 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.081 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:47.081 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:48:47.081 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:47.081 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.081 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:47.081 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:47.081 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:48.738 +08:00 [INF] 学生 2 请求开始考试 1
2025-10-29 23:48:48.738 +08:00 [INF] PermissionService.HasPermission: Role=Student, Operation=TakeExam, Result=True
2025-10-29 23:48:48.740 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:48:48.740 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamPaper>()
    .Include(p => p.PaperQuestions)
    .ThenInclude(pq => pq.Question)
    .FirstOrDefault(p => p.PaperId == __paperId_0)'
2025-10-29 23:48:48.741 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:48:48.741 +08:00 [DBG] Including navigation: 'PaperQuestion.Question'.
2025-10-29 23:48:48.749 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamPaper>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamPaper>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamPaper.AllowRetake (bool) Required, 1], [Property: ExamPaper.AllowViewAnswer (bool) Required, 2], [Property: ExamPaper.CreatedAt (DateTime) Required, 3], [Property: ExamPaper.CreatorId (int) Required FK Index, 4], [Property: ExamPaper.Description (string) MaxLength(500), 5], [Property: ExamPaper.Duration (int) Required, 6], [Property: ExamPaper.EndTime (DateTime?), 7], [Property: ExamPaper.IsActive (bool) Required, 8], [Property: ExamPaper.IsPublished (bool) Required, 9], [Property: ExamPaper.IsRandomOrder (bool) Required, 10], [Property: ExamPaper.Name (string) Required MaxLength(100), 11], [Property: ExamPaper.PassScore (decimal) Required, 12], [Property: ExamPaper.StartTime (DateTime?), 13], [Property: ExamPaper.Status (string) Required MaxLength(20), 14], [Property: ExamPaper.TotalScore (decimal) Required, 15], [Property: ExamPaper.UpdatedAt (DateTime) Required, 16] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: PaperQuestion.OrderIndex (int) Required, 18], [Property: PaperQuestion.PaperId (int) Required FK Index, 19], [Property: PaperQuestion.QuestionId (int) Required FK Index, 20], [Property: PaperQuestion.Score (decimal) Required, 21] }
                3 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Question.Analysis (string), 23], [Property: Question.Answer (string) Required, 24], [Property: Question.BankId (int) Required FK Index, 25], [Property: Question.Content (string) Required, 26], [Property: Question.CreatedAt (DateTime) Required, 27], [Property: Question.Difficulty (Difficulty) Required, 28], [Property: Question.GuidanceOverlaysJson (string), 29], [Property: Question.IsActive (bool) Required, 30], [Property: Question.MapDrawingConfigJson (string), 31], [Property: Question.QuestionType (QuestionType) Required, 32], [Property: Question.ReferenceOverlaysJson (string), 33], [Property: Question.ReviewRubricJson (string), 34], [Property: Question.Score (decimal) Required, 35], [Property: Question.ShowBuildingLayersJson (string), 36], [Property: Question.Tags (string) MaxLength(200), 37], [Property: Question.TimeLimitSeconds (int) Required, 38], [Property: Question.Title (string) Required MaxLength(200), 39], [Property: Question.UpdatedAt (DateTime) Required, 40] }
                4 -> 17
                5 -> 22
            SELECT t.PaperId, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt, t.CreatorId, t.Description, t.Duration, t.EndTime, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime, t.Status, t.TotalScore, t.UpdatedAt, t0.Id, t0.OrderIndex, t0.PaperId, t0.QuestionId, t0.Score, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) e.PaperId, e.AllowRetake, e.AllowViewAnswer, e.CreatedAt, e.CreatorId, e.Description, e.Duration, e.EndTime, e.IsActive, e.IsPublished, e.IsRandomOrder, e.Name, e.PassScore, e.StartTime, e.Status, e.TotalScore, e.UpdatedAt
                FROM ExamPapers AS e
                WHERE e.PaperId == @__paperId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt
                FROM PaperQuestions AS p
                INNER JOIN Questions AS q ON p.QuestionId == q.QuestionId
            ) AS t0 ON t.PaperId == t0.PaperId
            ORDER BY t.PaperId ASC, t0.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamPaper>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:48.750 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.750 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.750 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:48.750 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:48.750 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:48.750 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:48.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamPaper' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.751 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.752 +08:00 [DBG] Context 'ExamDbContext' started tracking 'PaperQuestion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.752 +08:00 [DBG] The navigation 'PaperQuestion.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.752 +08:00 [DBG] Context 'ExamDbContext' started tracking 'Question' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:48.752 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.752 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:48:48.752 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.752 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:48.752 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:48:48.752 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:48:48.752 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:48:48.753 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .FirstOrDefault(r => r.UserId == __userId_0 && r.PaperId == __paperId_1)'
2025-10-29 23:48:48.755 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
            SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId
            FROM ExamRecords AS e
            WHERE (e.UserId == @__userId_0) && (e.PaperId == @__paperId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:48.756 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.756 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.756 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:48.756 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:48.756 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:48.756 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:48:48.756 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:48:48.756 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.756 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:48.756 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:48.756 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:48.756 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:48:48.756 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:48:50.538 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:48:50.539 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.539 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.539 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.539 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.539 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.539 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:50.540 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:50.540 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.540 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.540 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.540 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.540 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:48:50.540 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:48:50.540 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:48:50.541 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.541 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.541 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.541 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.541 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.541 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:48:50.541 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:48:50.541 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.541 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.541 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.541 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.541 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:48:50.541 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:48:50.544 +08:00 [INF] 开始检查用户考试资格 - UserId: 2, PaperId: 1
2025-10-29 23:48:50.544 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.544 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.544 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.544 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.544 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.544 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:50.545 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:50.545 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.545 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.545 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.545 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.545 +08:00 [INF] 试卷信息 - Name: 测试, IsPublished: true, Status: 已发布
2025-10-29 23:48:50.545 +08:00 [INF] 试卷发布状态检查通过
2025-10-29 23:48:50.545 +08:00 [INF] 考试时间窗口检查通过 - 开始时间: "2025-10-29T00:00:00.0000000", 结束时间: "2025-11-05T00:00:00.0000000"
2025-10-29 23:48:50.545 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.545 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.545 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.546 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.546 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.546 +08:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:48:50.546 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__paperId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId"
FROM "ExamRecords" AS "e"
WHERE "e"."UserId" = @__userId_0 AND "e"."PaperId" = @__paperId_1
LIMIT 1
2025-10-29 23:48:50.546 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.546 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.546 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.546 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.546 +08:00 [INF] 找到现有考试记录 - RecordId: 1, Status: "InProgress", AllowRetake: true
2025-10-29 23:48:50.546 +08:00 [INF] 用户有进行中的考试，允许继续 -RecordId: 1
2025-10-29 23:48:50.547 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.547 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.547 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.547 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.547 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.547 +08:00 [DBG] Executing DbCommand [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:50.547 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__paperId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."PaperId", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime", "t"."Status", "t"."TotalScore", "t"."UpdatedAt", "t0"."Id", "t0"."OrderIndex", "t0"."PaperId", "t0"."QuestionId", "t0"."Score", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt"
FROM (
    SELECT "e"."PaperId", "e"."AllowRetake", "e"."AllowViewAnswer", "e"."CreatedAt", "e"."CreatorId", "e"."Description", "e"."Duration", "e"."EndTime", "e"."IsActive", "e"."IsPublished", "e"."IsRandomOrder", "e"."Name", "e"."PassScore", "e"."StartTime", "e"."Status", "e"."TotalScore", "e"."UpdatedAt"
    FROM "ExamPapers" AS "e"
    WHERE "e"."PaperId" = @__paperId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt"
    FROM "PaperQuestions" AS "p"
    INNER JOIN "Questions" AS "q" ON "p"."QuestionId" = "q"."QuestionId"
) AS "t0" ON "t"."PaperId" = "t0"."PaperId"
ORDER BY "t"."PaperId", "t0"."Id"
2025-10-29 23:48:50.548 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.548 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.548 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.548 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.563 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'ExamRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.565 +08:00 [DBG] The navigation 'ExamRecord.ExamPaper' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.567 +08:00 [DBG] Context 'ExamDbContext' started tracking 'ExamRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.567 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:48:50.567 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:48:50.584 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:48:50.591 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.591 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.591 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.591 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.591 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.591 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:48:50.591 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = Decimal), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ExamRecords" ("CorrectCount", "CreatedAt", "EndTime", "GradedAt", "GraderId", "IsPassed", "ObjectiveScore", "PaperId", "RemainingTime", "StartTime", "Status", "SubjectiveScore", "SubmitTime", "TotalCount", "TotalScore", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "RecordId";
2025-10-29 23:48:50.594 +08:00 [DBG] The foreign key property 'ExamRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.598 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.598 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:48:50.598 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.598 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.600 +08:00 [DBG] An entity of type 'ExamRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.600 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 1 entities written to the database.
2025-10-29 23:48:50.602 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.612 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.613 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.613 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.613 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.613 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] 'ExamDbContext' generated a temporary value for the property 'AnswerRecord.AnswerId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.Question' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] The navigation 'AnswerRecord.ExamRecord' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] Context 'ExamDbContext' started tracking 'AnswerRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.614 +08:00 [DBG] SaveChanges starting for 'ExamDbContext'.
2025-10-29 23:48:50.614 +08:00 [DBG] DetectChanges starting for 'ExamDbContext'.
2025-10-29 23:48:50.616 +08:00 [DBG] DetectChanges completed for 'ExamDbContext'.
2025-10-29 23:48:50.618 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.618 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.619 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-29 23:48:50.620 +08:00 [DBG] Began transaction with isolation level 'Serializable'.
2025-10-29 23:48:50.620 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.620 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.621 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.621 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.621 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.621 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.622 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.622 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 1ms reading results.
2025-10-29 23:48:50.622 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.622 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.622 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.622 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.622 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.622 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.622 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.622 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.623 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.623 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.623 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.623 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.623 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.623 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.623 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.623 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.623 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.623 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.623 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.623 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.623 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.623 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-29 23:48:50.623 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?', @p11='?' (DbType = Decimal), @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AnswerRecords" ("AnswerTime", "ClientInfoJson", "Comment", "DrawDurationSeconds", "GradeTime", "GraderId", "IsCorrect", "IsGraded", "QuestionId", "RecordId", "RubricScoresJson", "Score", "UserAnswer")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "AnswerId";
2025-10-29 23:48:50.623 +08:00 [DBG] The foreign key property 'AnswerRecord.AnswerId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-29 23:48:50.623 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.623 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 0ms reading results.
2025-10-29 23:48:50.624 +08:00 [DBG] Committing transaction.
2025-10-29 23:48:50.627 +08:00 [DBG] Committed transaction.
2025-10-29 23:48:50.628 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.628 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.628 +08:00 [DBG] Disposing transaction.
2025-10-29 23:48:50.629 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.629 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.629 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.629 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.629 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.629 +08:00 [DBG] An entity of type 'AnswerRecord' tracked by 'ExamDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.629 +08:00 [DBG] SaveChanges completed for 'ExamDbContext' with 6 entities written to the database.
2025-10-29 23:48:50.629 +08:00 [DBG] Compiling query expression: 
'DbSet<ExamRecord>()
    .Include(r => r.ExamPaper)
    .ThenInclude(p => p.PaperQuestions)
    .Include(r => r.AnswerRecords)
    .ThenInclude(ar => ar.Question)
    .ThenInclude(q => q.Options)
    .FirstOrDefault(r => r.RecordId == __examRecord_RecordId_0)'
2025-10-29 23:48:50.630 +08:00 [DBG] Including navigation: 'ExamRecord.ExamPaper'.
2025-10-29 23:48:50.630 +08:00 [DBG] Including navigation: 'ExamPaper.PaperQuestions'.
2025-10-29 23:48:50.630 +08:00 [DBG] Including navigation: 'ExamRecord.AnswerRecords'.
2025-10-29 23:48:50.630 +08:00 [DBG] Including navigation: 'AnswerRecord.Question'.
2025-10-29 23:48:50.630 +08:00 [DBG] Including navigation: 'Question.Options'.
2025-10-29 23:48:50.642 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-10-29 23:48:50.645 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ExamRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<ExamRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ExamRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ExamRecord.CorrectCount (int) Required, 1], [Property: ExamRecord.CreatedAt (DateTime) Required, 2], [Property: ExamRecord.EndTime (DateTime?), 3], [Property: ExamRecord.GradedAt (DateTime?), 4], [Property: ExamRecord.GraderId (int?) FK Index, 5], [Property: ExamRecord.IsPassed (bool) Required, 6], [Property: ExamRecord.ObjectiveScore (decimal) Required, 7], [Property: ExamRecord.PaperId (int) Required FK Index, 8], [Property: ExamRecord.RemainingTime (int) Required, 9], [Property: ExamRecord.StartTime (DateTime?), 10], [Property: ExamRecord.Status (ExamStatus) Required, 11], [Property: ExamRecord.SubjectiveScore (decimal) Required, 12], [Property: ExamRecord.SubmitTime (DateTime?), 13], [Property: ExamRecord.TotalCount (int) Required, 14], [Property: ExamRecord.TotalScore (decimal) Required, 15], [Property: ExamRecord.UserId (int) Required FK Index, 16] }
                1 -> Dictionary<IProperty, int> { [Property: ExamPaper.PaperId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: ExamPaper.AllowRetake (bool) Required, 18], [Property: ExamPaper.AllowViewAnswer (bool) Required, 19], [Property: ExamPaper.CreatedAt (DateTime) Required, 20], [Property: ExamPaper.CreatorId (int) Required FK Index, 21], [Property: ExamPaper.Description (string) MaxLength(500), 22], [Property: ExamPaper.Duration (int) Required, 23], [Property: ExamPaper.EndTime (DateTime?), 24], [Property: ExamPaper.IsActive (bool) Required, 25], [Property: ExamPaper.IsPublished (bool) Required, 26], [Property: ExamPaper.IsRandomOrder (bool) Required, 27], [Property: ExamPaper.Name (string) Required MaxLength(100), 28], [Property: ExamPaper.PassScore (decimal) Required, 29], [Property: ExamPaper.StartTime (DateTime?), 30], [Property: ExamPaper.Status (string) Required MaxLength(20), 31], [Property: ExamPaper.TotalScore (decimal) Required, 32], [Property: ExamPaper.UpdatedAt (DateTime) Required, 33] }
                2 -> 0
                3 -> 17
                4 -> Dictionary<IProperty, int> { [Property: PaperQuestion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 34], [Property: PaperQuestion.OrderIndex (int) Required, 35], [Property: PaperQuestion.PaperId (int) Required FK Index, 36], [Property: PaperQuestion.QuestionId (int) Required FK Index, 37], [Property: PaperQuestion.Score (decimal) Required, 38] }
                5 -> 34
                6 -> Dictionary<IProperty, int> { [Property: AnswerRecord.AnswerId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: AnswerRecord.AnswerTime (DateTime?), 40], [Property: AnswerRecord.ClientInfoJson (string), 41], [Property: AnswerRecord.Comment (string), 42], [Property: AnswerRecord.DrawDurationSeconds (int) Required, 43], [Property: AnswerRecord.GradeTime (DateTime?), 44], [Property: AnswerRecord.GraderId (int?) FK Index, 45], [Property: AnswerRecord.IsCorrect (bool) Required, 46], [Property: AnswerRecord.IsGraded (bool) Required, 47], [Property: AnswerRecord.QuestionId (int) Required FK Index, 48], [Property: AnswerRecord.RecordId (int) Required FK Index, 49], [Property: AnswerRecord.RubricScoresJson (string), 50], [Property: AnswerRecord.Score (decimal) Required, 51], [Property: AnswerRecord.UserAnswer (string), 52] }
                7 -> Dictionary<IProperty, int> { [Property: Question.QuestionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 53], [Property: Question.Analysis (string), 54], [Property: Question.Answer (string) Required, 55], [Property: Question.BankId (int) Required FK Index, 56], [Property: Question.Content (string) Required, 57], [Property: Question.CreatedAt (DateTime) Required, 58], [Property: Question.Difficulty (Difficulty) Required, 59], [Property: Question.GuidanceOverlaysJson (string), 60], [Property: Question.IsActive (bool) Required, 61], [Property: Question.MapDrawingConfigJson (string), 62], [Property: Question.QuestionType (QuestionType) Required, 63], [Property: Question.ReferenceOverlaysJson (string), 64], [Property: Question.ReviewRubricJson (string), 65], [Property: Question.Score (decimal) Required, 66], [Property: Question.ShowBuildingLayersJson (string), 67], [Property: Question.Tags (string) MaxLength(200), 68], [Property: Question.TimeLimitSeconds (int) Required, 69], [Property: Question.Title (string) Required MaxLength(200), 70], [Property: Question.UpdatedAt (DateTime) Required, 71] }
                8 -> 39
                9 -> 53
                10 -> Dictionary<IProperty, int> { [Property: QuestionOption.OptionId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 72], [Property: QuestionOption.Content (string) Required, 73], [Property: QuestionOption.IsCorrect (bool) Required, 74], [Property: QuestionOption.OptionLabel (string) Required MaxLength(10), 75], [Property: QuestionOption.OrderIndex (int) Required, 76], [Property: QuestionOption.QuestionId (int) Required FK Index, 77] }
                11 -> 72
            SELECT t.RecordId, t.CorrectCount, t.CreatedAt, t.EndTime, t.GradedAt, t.GraderId, t.IsPassed, t.ObjectiveScore, t.PaperId, t.RemainingTime, t.StartTime, t.Status, t.SubjectiveScore, t.SubmitTime, t.TotalCount, t.TotalScore, t.UserId, t.PaperId0, t.AllowRetake, t.AllowViewAnswer, t.CreatedAt0, t.CreatorId, t.Description, t.Duration, t.EndTime0, t.IsActive, t.IsPublished, t.IsRandomOrder, t.Name, t.PassScore, t.StartTime0, t.Status0, t.TotalScore0, t.UpdatedAt, p.Id, p.OrderIndex, p.PaperId, p.QuestionId, p.Score, t0.AnswerId, t0.AnswerTime, t0.ClientInfoJson, t0.Comment, t0.DrawDurationSeconds, t0.GradeTime, t0.GraderId, t0.IsCorrect, t0.IsGraded, t0.QuestionId, t0.RecordId, t0.RubricScoresJson, t0.Score, t0.UserAnswer, t0.QuestionId0, t0.Analysis, t0.Answer, t0.BankId, t0.Content, t0.CreatedAt, t0.Difficulty, t0.GuidanceOverlaysJson, t0.IsActive, t0.MapDrawingConfigJson, t0.QuestionType, t0.ReferenceOverlaysJson, t0.ReviewRubricJson, t0.Score0, t0.ShowBuildingLayersJson, t0.Tags, t0.TimeLimitSeconds, t0.Title, t0.UpdatedAt, t0.OptionId, t0.Content0, t0.IsCorrect0, t0.OptionLabel, t0.OrderIndex, t0.QuestionId1
            FROM 
            (
                SELECT TOP(1) e.RecordId, e.CorrectCount, e.CreatedAt, e.EndTime, e.GradedAt, e.GraderId, e.IsPassed, e.ObjectiveScore, e.PaperId, e.RemainingTime, e.StartTime, e.Status, e.SubjectiveScore, e.SubmitTime, e.TotalCount, e.TotalScore, e.UserId, e0.PaperId AS PaperId0, e0.AllowRetake, e0.AllowViewAnswer, e0.CreatedAt AS CreatedAt0, e0.CreatorId, e0.Description, e0.Duration, e0.EndTime AS EndTime0, e0.IsActive, e0.IsPublished, e0.IsRandomOrder, e0.Name, e0.PassScore, e0.StartTime AS StartTime0, e0.Status AS Status0, e0.TotalScore AS TotalScore0, e0.UpdatedAt
                FROM ExamRecords AS e
                INNER JOIN ExamPapers AS e0 ON e.PaperId == e0.PaperId
                WHERE e.RecordId == @__examRecord_RecordId_0
            ) AS t
            LEFT JOIN PaperQuestions AS p ON t.PaperId0 == p.PaperId
            LEFT JOIN 
            (
                SELECT a.AnswerId, a.AnswerTime, a.ClientInfoJson, a.Comment, a.DrawDurationSeconds, a.GradeTime, a.GraderId, a.IsCorrect, a.IsGraded, a.QuestionId, a.RecordId, a.RubricScoresJson, a.Score, a.UserAnswer, q.QuestionId AS QuestionId0, q.Analysis, q.Answer, q.BankId, q.Content, q.CreatedAt, q.Difficulty, q.GuidanceOverlaysJson, q.IsActive, q.MapDrawingConfigJson, q.QuestionType, q.ReferenceOverlaysJson, q.ReviewRubricJson, q.Score AS Score0, q.ShowBuildingLayersJson, q.Tags, q.TimeLimitSeconds, q.Title, q.UpdatedAt, q0.OptionId, q0.Content AS Content0, q0.IsCorrect AS IsCorrect0, q0.OptionLabel, q0.OrderIndex, q0.QuestionId AS QuestionId1
                FROM AnswerRecords AS a
                INNER JOIN Questions AS q ON a.QuestionId == q.QuestionId
                LEFT JOIN QuestionOptions AS q0 ON q.QuestionId == q0.QuestionId
            ) AS t0 ON t.RecordId == t0.RecordId
            ORDER BY t.RecordId ASC, t.PaperId0 ASC, p.Id ASC, t0.AnswerId ASC, t0.QuestionId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ExamRecord>, 
        ExamSystem.Data.ExamDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-29 23:48:50.645 +08:00 [DBG] Opening connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.645 +08:00 [DBG] Opened connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.645 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-29 23:48:50.659 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2025-10-29 23:48:50.659 +08:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-10-29 23:48:50.659 +08:00 [DBG] Executing DbCommand [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:48:50.661 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__examRecord_RecordId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."RecordId", "t"."CorrectCount", "t"."CreatedAt", "t"."EndTime", "t"."GradedAt", "t"."GraderId", "t"."IsPassed", "t"."ObjectiveScore", "t"."PaperId", "t"."RemainingTime", "t"."StartTime", "t"."Status", "t"."SubjectiveScore", "t"."SubmitTime", "t"."TotalCount", "t"."TotalScore", "t"."UserId", "t"."PaperId0", "t"."AllowRetake", "t"."AllowViewAnswer", "t"."CreatedAt0", "t"."CreatorId", "t"."Description", "t"."Duration", "t"."EndTime0", "t"."IsActive", "t"."IsPublished", "t"."IsRandomOrder", "t"."Name", "t"."PassScore", "t"."StartTime0", "t"."Status0", "t"."TotalScore0", "t"."UpdatedAt", "p"."Id", "p"."OrderIndex", "p"."PaperId", "p"."QuestionId", "p"."Score", "t0"."AnswerId", "t0"."AnswerTime", "t0"."ClientInfoJson", "t0"."Comment", "t0"."DrawDurationSeconds", "t0"."GradeTime", "t0"."GraderId", "t0"."IsCorrect", "t0"."IsGraded", "t0"."QuestionId", "t0"."RecordId", "t0"."RubricScoresJson", "t0"."Score", "t0"."UserAnswer", "t0"."QuestionId0", "t0"."Analysis", "t0"."Answer", "t0"."BankId", "t0"."Content", "t0"."CreatedAt", "t0"."Difficulty", "t0"."GuidanceOverlaysJson", "t0"."IsActive", "t0"."MapDrawingConfigJson", "t0"."QuestionType", "t0"."ReferenceOverlaysJson", "t0"."ReviewRubricJson", "t0"."Score0", "t0"."ShowBuildingLayersJson", "t0"."Tags", "t0"."TimeLimitSeconds", "t0"."Title", "t0"."UpdatedAt", "t0"."OptionId", "t0"."Content0", "t0"."IsCorrect0", "t0"."OptionLabel", "t0"."OrderIndex", "t0"."QuestionId1"
FROM (
    SELECT "e"."RecordId", "e"."CorrectCount", "e"."CreatedAt", "e"."EndTime", "e"."GradedAt", "e"."GraderId", "e"."IsPassed", "e"."ObjectiveScore", "e"."PaperId", "e"."RemainingTime", "e"."StartTime", "e"."Status", "e"."SubjectiveScore", "e"."SubmitTime", "e"."TotalCount", "e"."TotalScore", "e"."UserId", "e0"."PaperId" AS "PaperId0", "e0"."AllowRetake", "e0"."AllowViewAnswer", "e0"."CreatedAt" AS "CreatedAt0", "e0"."CreatorId", "e0"."Description", "e0"."Duration", "e0"."EndTime" AS "EndTime0", "e0"."IsActive", "e0"."IsPublished", "e0"."IsRandomOrder", "e0"."Name", "e0"."PassScore", "e0"."StartTime" AS "StartTime0", "e0"."Status" AS "Status0", "e0"."TotalScore" AS "TotalScore0", "e0"."UpdatedAt"
    FROM "ExamRecords" AS "e"
    INNER JOIN "ExamPapers" AS "e0" ON "e"."PaperId" = "e0"."PaperId"
    WHERE "e"."RecordId" = @__examRecord_RecordId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PaperQuestions" AS "p" ON "t"."PaperId0" = "p"."PaperId"
LEFT JOIN (
    SELECT "a"."AnswerId", "a"."AnswerTime", "a"."ClientInfoJson", "a"."Comment", "a"."DrawDurationSeconds", "a"."GradeTime", "a"."GraderId", "a"."IsCorrect", "a"."IsGraded", "a"."QuestionId", "a"."RecordId", "a"."RubricScoresJson", "a"."Score", "a"."UserAnswer", "q"."QuestionId" AS "QuestionId0", "q"."Analysis", "q"."Answer", "q"."BankId", "q"."Content", "q"."CreatedAt", "q"."Difficulty", "q"."GuidanceOverlaysJson", "q"."IsActive", "q"."MapDrawingConfigJson", "q"."QuestionType", "q"."ReferenceOverlaysJson", "q"."ReviewRubricJson", "q"."Score" AS "Score0", "q"."ShowBuildingLayersJson", "q"."Tags", "q"."TimeLimitSeconds", "q"."Title", "q"."UpdatedAt", "q0"."OptionId", "q0"."Content" AS "Content0", "q0"."IsCorrect" AS "IsCorrect0", "q0"."OptionLabel", "q0"."OrderIndex", "q0"."QuestionId" AS "QuestionId1"
    FROM "AnswerRecords" AS "a"
    INNER JOIN "Questions" AS "q" ON "a"."QuestionId" = "q"."QuestionId"
    LEFT JOIN "QuestionOptions" AS "q0" ON "q"."QuestionId" = "q0"."QuestionId"
) AS "t0" ON "t"."RecordId" = "t0"."RecordId"
ORDER BY "t"."RecordId", "t"."PaperId0", "p"."Id", "t0"."AnswerId", "t0"."QuestionId0"
2025-10-29 23:48:50.663 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Context 'ExamDbContext' started tracking 'QuestionOption' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-29 23:48:50.667 +08:00 [DBG] Closing data reader to 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.667 +08:00 [DBG] A data reader for 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' is being disposed after spending 6ms reading results.
2025-10-29 23:48:50.667 +08:00 [DBG] Closing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:48:50.667 +08:00 [DBG] Closed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
2025-10-29 23:48:50.667 +08:00 [INF] 用户 2 开始考试，试卷ID: 1，记录ID: 36
2025-10-29 23:49:05.403 +08:00 [INF] 用户已退出登录，清空当前用户状态
2025-10-29 23:49:06.898 +08:00 [DBG] 'ExamDbContext' disposed.
2025-10-29 23:49:06.899 +08:00 [DBG] Disposing connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db'.
2025-10-29 23:49:06.899 +08:00 [DBG] Disposed connection to database 'main' on server 'E:\Project\exam_trae\ExamSystem.WPF\bin\Debug\net8.0-windows10.0.19041\exam_system.db' (0ms).
