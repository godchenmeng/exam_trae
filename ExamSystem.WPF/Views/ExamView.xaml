<UserControl x:Class="ExamSystem.WPF.Views.ExamView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
             xmlns:local="clr-namespace:ExamSystem.WPF.Views">
    
    <UserControl.Resources>
        <!-- 转换器定义 -->
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        
        <!-- 自定义转换器 -->
        <local:LessThanConverter x:Key="LessThanConverter"/>
        <local:MultiplyConverter x:Key="MultiplyConverter"/>
        <local:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter"/>
        
        <!-- 样式定义 -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
        
        <Style x:Key="InfoTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#34495E"/>
            <Setter Property="Margin" Value="0,0,15,0"/>
        </Style>
        
        <Style x:Key="QuestionTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="LineHeight" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>
        
        <Style x:Key="OptionRadioButtonStyle" TargetType="RadioButton">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Padding" Value="8,5"/>
        </Style>
        
        <Style x:Key="OptionCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Padding" Value="8,5"/>
        </Style>
        
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="35"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="1" 
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="PrimaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryHoverBrush}"/>
        </Style>
        
        <Style x:Key="SuccessButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="#27AE60"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#229954"/>
        </Style>
        
        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="#E74C3C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#C0392B"/>
        </Style>
        
        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="#95A5A6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#7F8C8D"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 顶部信息栏 -->
        <Border Grid.Row="0" Background="#ECF0F1" BorderBrush="#BDC3C7" BorderThickness="0,0,0,1" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- 考试信息 -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="考试：" Style="{StaticResource InfoTextStyle}"/>
                    <TextBlock Text="{Binding ExamPaperName}" Style="{StaticResource InfoTextStyle}" FontWeight="Bold"/>
                    <TextBlock Text="总分：" Style="{StaticResource InfoTextStyle}" Margin="30,0,0,0"/>
                    <TextBlock Text="{Binding TotalScore}" Style="{StaticResource InfoTextStyle}" FontWeight="Bold"/>
                    <TextBlock Text="题目：" Style="{StaticResource InfoTextStyle}" Margin="30,0,0,0"/>
                    <TextBlock Text="{Binding CurrentQuestionIndex}" Style="{StaticResource InfoTextStyle}" FontWeight="Bold"/>
                    <TextBlock Text="/" Style="{StaticResource InfoTextStyle}"/>
                    <TextBlock Text="{Binding TotalQuestions}" Style="{StaticResource InfoTextStyle}" FontWeight="Bold"/>
                </StackPanel>
                
                <!-- 倒计时 -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="剩余时间：" Style="{StaticResource InfoTextStyle}"/>
                    <TextBlock Text="{Binding RemainingTimeText}" Style="{StaticResource InfoTextStyle}" 
                               FontWeight="Bold" FontSize="16" Foreground="#E74C3C"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- 主要内容区域 -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="400"/>
                <ColumnDefinition Width="Auto" MinWidth="200" MaxWidth="300">
                    <ColumnDefinition.Style>
                        <Style TargetType="ColumnDefinition">
                            <Setter Property="Width" Value="250"/>
                            <Style.Triggers>
                                <!-- 当窗口宽度小于1200时，减少侧边栏宽度 -->
                                <DataTrigger Binding="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource LessThanConverter}, ConverterParameter=1200}" Value="True">
                                    <Setter Property="Width" Value="200"/>
                                </DataTrigger>
                                <!-- 当窗口宽度小于1000时，进一步减少侧边栏宽度 -->
                                <DataTrigger Binding="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource LessThanConverter}, ConverterParameter=1000}" Value="True">
                                    <Setter Property="Width" Value="180"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ColumnDefinition.Style>
                </ColumnDefinition>
            </Grid.ColumnDefinitions>
            
            <!-- 题目显示区域 -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,0,20,0">
                <StackPanel>
                    <!-- 题目标题 -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="第" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Text="{Binding CurrentQuestionIndex}" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Text="题" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Text="（" Style="{StaticResource HeaderTextStyle}" Margin="10,0,0,0"/>
                        <TextBlock Text="{Binding CurrentQuestion.QuestionType}" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Text="，" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Text="{Binding CurrentQuestion.Score}" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Text="分）" Style="{StaticResource HeaderTextStyle}"/>
                    </StackPanel>
                    
                    <!-- 题目内容 -->
                    <TextBlock Text="{Binding CurrentQuestion.Content}" Style="{StaticResource QuestionTextStyle}"/>
                    
                    <!-- 答题区域 -->
                    <StackPanel Name="AnswerPanel">
                        <!-- 单选题 -->
                        <ItemsControl ItemsSource="{Binding CurrentQuestion.Options}" 
                                      Visibility="{Binding IsSingleChoice, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <RadioButton Content="{Binding}" 
                                                 GroupName="SingleChoice"
                                                 Style="{StaticResource OptionRadioButtonStyle}"
                                                 IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                 Command="{Binding DataContext.SelectSingleOptionCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                 CommandParameter="{Binding}"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- 多选题 -->
                        <ItemsControl ItemsSource="{Binding CurrentQuestion.Options}" 
                                      Visibility="{Binding IsMultipleChoice, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Content="{Binding}" 
                                              Style="{StaticResource OptionCheckBoxStyle}"
                                              IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                              Command="{Binding DataContext.SelectMultipleOptionCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                              CommandParameter="{Binding}"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <!-- 判断题 -->
                        <StackPanel Visibility="{Binding IsTrueFalse, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <RadioButton Content="正确" GroupName="TrueFalse" Style="{StaticResource OptionRadioButtonStyle}"
                                         IsChecked="{Binding TrueFalseAnswer, Converter={StaticResource BooleanToTrueConverter}}"
                                         Command="{Binding SelectTrueFalseCommand}" CommandParameter="True"/>
                            <RadioButton Content="错误" GroupName="TrueFalse" Style="{StaticResource OptionRadioButtonStyle}"
                                         IsChecked="{Binding TrueFalseAnswer, Converter={StaticResource BooleanToFalseConverter}}"
                                         Command="{Binding SelectTrueFalseCommand}" CommandParameter="False"/>
                        </StackPanel>
                        
                        <!-- 填空题 -->
                        <TextBox Text="{Binding FillInBlankAnswer, UpdateSourceTrigger=PropertyChanged}"
                                 Visibility="{Binding IsFillInBlank, Converter={StaticResource BooleanToVisibilityConverter}}"
                                 Height="100" TextWrapping="Wrap" AcceptsReturn="True"
                                 FontSize="14" Padding="10" Margin="0,10"/>
                        
                        <!-- 简答题 -->
                        <TextBox Text="{Binding EssayAnswer, UpdateSourceTrigger=PropertyChanged}"
                                 Visibility="{Binding IsEssay, Converter={StaticResource BooleanToVisibilityConverter}}"
                                 Height="200" TextWrapping="Wrap" AcceptsReturn="True"
                                 FontSize="14" Padding="10" Margin="0,10"/>
                        
                        <!-- 地图绘制题 -->
                        <Grid Visibility="{Binding IsMapDrawing, Converter={StaticResource BooleanToVisibilityConverter}}" 
                              MinHeight="400" MaxHeight="800" Margin="0,10">
                            <Grid.Style>
                                <Style TargetType="Grid">
                                    <Setter Property="Height" Value="600"/>
                                    <Style.Triggers>
                                        <!-- 当窗口高度小于900时，使用相对高度 -->
                                        <DataTrigger Binding="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource LessThanConverter}, ConverterParameter=900}" Value="True">
                                            <Setter Property="Height" Value="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource MultiplyConverter}, ConverterParameter=0.6}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Grid.Style>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- 地图工具栏 - 简化版，主要功能由百度地图编辑器提供 -->
                            <Border Grid.Row="0" Background="#F8F9FA" BorderBrush="#DEE2E6" 
                                    BorderThickness="1" CornerRadius="5,5,0,0" Padding="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <TextBlock Text="地图绘制题：" VerticalAlignment="Center" FontWeight="Bold" Margin="0,0,10,0"/>
                                        <TextBlock Text="请在地图上绘制相关图形" VerticalAlignment="Center" Foreground="#6C757D"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <StackPanel.Style>
                                            <Style TargetType="StackPanel">
                                                <Setter Property="Orientation" Value="Horizontal"/>
                                                <Style.Triggers>
                                                    <!-- 当窗口宽度小于1000时，改为垂直布局 -->
                                                    <DataTrigger Binding="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource LessThanConverter}, ConverterParameter=1000}" Value="True">
                                                        <Setter Property="Orientation" Value="Vertical"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </StackPanel.Style>
                                        
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                                            <Button Content="清空绘制" Width="80" Height="30" Margin="5,0" 
                                                    Style="{StaticResource DangerButtonStyle}"
                                                    Command="{Binding ClearMapDrawingCommand}"/>
                                            <Button Content="保存答案" Width="80" Height="30" Margin="5,0" 
                                                    Style="{StaticResource SuccessButtonStyle}"
                                                    Command="{Binding SaveMapDrawingCommand}"/>
                                        </StackPanel>
                                        
                                        <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                            <TextBlock Text="剩余时间：" VerticalAlignment="Center" Margin="10,0,5,0"/>
                                            <TextBlock Text="{Binding MapDrawingTimeRemaining}" VerticalAlignment="Center" 
                                                       FontWeight="Bold" Foreground="#E74C3C"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- 地图容器 -->
                            <Border Grid.Row="1" BorderBrush="#DEE2E6" BorderThickness="1,0,1,0">
                                <Grid>
                                    <!-- WebView2 控件 - 动态加载百度地图编辑器 -->
                                    <wv2:WebView2 x:Name="MapWebView" 
                                              NavigationCompleted="MapWebView_NavigationCompleted"
                                              Panel.ZIndex="-1"/>
                                    
                                    <!-- 加载遮罩 -->
                                    <Grid Background="#80FFFFFF" 
                                          Visibility="{Binding IsMapLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <ProgressBar IsIndeterminate="True" Width="200" Height="4" Margin="0,0,0,10"/>
                                            <TextBlock Text="地图加载中..." FontSize="14" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                            </Border>
                            
                            <!-- 状态栏 -->
                            <Border Grid.Row="2" Background="#F8F9FA" BorderBrush="#DEE2E6" 
                                    BorderThickness="1" CornerRadius="0,0,5,5" Padding="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                                        <TextBlock Text="已绘制图形：" VerticalAlignment="Center"/>
                                        <TextBlock Text="{Binding MapDrawingOverlayCount}" VerticalAlignment="Center" 
                                                   FontWeight="Bold" Margin="5,0,15,0"/>
                                        <TextBlock Text="自动保存：" VerticalAlignment="Center"/>
                                        <TextBlock Text="{Binding AutoSaveStatus}" VerticalAlignment="Center" 
                                                   FontWeight="Bold" Margin="5,0,15,0" Foreground="#28A745"/>
                                        <TextBlock Text="最后保存：" VerticalAlignment="Center"/>
                                        <TextBlock Text="{Binding LastSaveTime}" VerticalAlignment="Center" 
                                                   FontWeight="Bold" Margin="5,0"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <Button Content="手动保存" Width="80" Height="30" Margin="5,0" 
                                                Style="{StaticResource PrimaryButtonStyle}"
                                                Command="{Binding SaveMapDrawingCommand}"/>
                                        <Button Content="导出数据" Width="80" Height="30" Margin="5,0" 
                                                Style="{StaticResource SecondaryButtonStyle}"
                                                Command="{Binding ExportMapDataCommand}"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
            
            <!-- 右侧导航面板 -->
            <Border Grid.Column="1" Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="5">
                <StackPanel Margin="15">
                    <TextBlock Text="答题卡" Style="{StaticResource HeaderTextStyle}" HorizontalAlignment="Center"/>
                    
                    <!-- 题目导航 -->
                    <ItemsControl ItemsSource="{Binding QuestionNavigations}" Margin="0,10">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Content="{Binding QuestionNumber}" 
                                        Width="35" Height="35" Margin="2"
                                        FontSize="12" FontWeight="Bold"
                                        Command="{Binding DataContext.NavigateToQuestionCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding QuestionIndex}">
                                    <Button.Style>
                                        <Style TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
                                            <Setter Property="Background" Value="#E9ECEF"/>
                                            <Setter Property="Foreground" Value="#495057"/>
                                            <Setter Property="BorderBrush" Value="#CED4DA"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsAnswered}" Value="True">
                                                    <Setter Property="Background" Value="#28A745"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="BorderBrush" Value="#1E7E34"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding IsCurrent}" Value="True">
                                                    <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryHoverBrush}"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <!-- 统计信息 -->
                    <Border Background="White" BorderBrush="#DEE2E6" BorderThickness="1" 
                            CornerRadius="3" Padding="10" Margin="0,15,0,0">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                <Rectangle Width="12" Height="12" Fill="#28A745" Margin="0,0,5,0"/>
                                <TextBlock Text="已答：" FontSize="12"/>
                                <TextBlock Text="{Binding AnsweredCount}" FontSize="12" FontWeight="Bold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <Rectangle Width="12" Height="12" Fill="#E9ECEF" Margin="0,0,5,0"/>
                                <TextBlock Text="未答：" FontSize="12"/>
                                <TextBlock Text="{Binding UnansweredCount}" FontSize="12" FontWeight="Bold"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <!-- 操作按钮 -->
                    <StackPanel Margin="0,20,0,0">
                        <Button Content="暂存答案" Style="{StaticResource PrimaryButtonStyle}" 
                                Command="{Binding SaveAnswerCommand}" Margin="0,0,0,10"/>
                        <Button Content="提交考试" Style="{StaticResource DangerButtonStyle}" 
                                Command="{Binding SubmitExamCommand}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
        
        <!-- 底部导航栏 -->
        <Border Grid.Row="2" Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="0,1,0,0" Padding="20,15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="上一题" Style="{StaticResource SecondaryButtonStyle}" 
                        Command="{Binding PreviousQuestionCommand}" 
                        IsEnabled="{Binding CanGoPrevious}"/>
                <Button Content="下一题" Style="{StaticResource PrimaryButtonStyle}" 
                        Command="{Binding NextQuestionCommand}" 
                        IsEnabled="{Binding CanGoNext}"/>
            </StackPanel>
        </Border>
        
        <!-- 加载指示器 -->
        <Grid Grid.RowSpan="3" Background="#80000000" 
              Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="4" Margin="0,0,0,10"/>
                <TextBlock Text="加载中..." Foreground="White" FontSize="16" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>