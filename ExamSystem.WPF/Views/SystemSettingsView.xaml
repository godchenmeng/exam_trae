<UserControl x:Class="ExamSystem.WPF.Views.SystemSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- 百度地图AK管理 -->
    <GroupBox Header="百度地图AK管理" Padding="10" Margin="0,0,0,8">
      <StackPanel>
        <TextBlock Text="AK："/>
        <TextBox Text="{Binding AkInput, UpdateSourceTrigger=PropertyChanged}" Width="360"/>
        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
          <!--<Button Content="验证" Command="{Binding ValidateAkCommand}" Width="80"/>-->
          <Button Content="保存" Command="{Binding SaveAkCommand}" Width="80" Margin="8,0,0,0"/>
          <TextBlock Text="{Binding AkMessage}" Foreground="Gray" Margin="12,0,0,0" VerticalAlignment="Center"/>
        </StackPanel>
      </StackPanel>
    </GroupBox>

    <!-- 备份操作 -->
    <GroupBox Header="数据库备份" Grid.Row="1" Padding="10" Margin="0,0,0,8">
      <StackPanel Orientation="Horizontal">
        <Button Content="立即备份" Command="{Binding BackupNowCommand}" Width="100"/>
        <Button Content="打开备份目录" Command="{Binding OpenBackupFolderCommand}" Width="120" Margin="8,0,0,0"/>
      </StackPanel>
    </GroupBox>

    <!-- 备份列表与导入 -->
    <Grid Grid.Row="2">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>

      <TextBlock Text="备份文件列表" FontWeight="Bold"/>
      <ListView Grid.Row="1" ItemsSource="{Binding BackupFiles}" Height="200">
        <ListView.View>
          <GridView>
            <GridViewColumn Header="文件名" Width="300" DisplayMemberBinding="{Binding}"/>
          </GridView>
        </ListView.View>
      </ListView>

      <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center">
        <Button Content="导入SQL备份" Command="{Binding ImportSqlCommand}" Width="120"/>
        <ProgressBar Value="{Binding ImportProgress}" Minimum="0" Maximum="100" Width="200" Margin="12,0,0,0"/>
      </StackPanel>
    </Grid>
  </Grid>
</UserControl>