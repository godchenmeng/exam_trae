# 地图集成功能测试指南

## 测试环境准备

1. **编译状态**: ✅ 项目编译成功，无错误
2. **应用程序**: ✅ WPF应用程序已启动
3. **测试数据**: ✅ 已创建测试建筑数据SQL脚本

## 功能测试步骤

### 1. 基础地图显示测试
- [ ] 启动应用程序
- [ ] 进入考试界面或地图绘制界面
- [ ] 验证百度地图是否正常加载
- [ ] 检查地图控件是否响应鼠标操作（缩放、拖拽）

### 2. 城市选择功能测试
- [ ] 在地图界面找到城市选择下拉框
- [ ] 选择"北京"城市
- [ ] 观察是否自动请求并加载北京的建筑数据
- [ ] 选择"上海"城市
- [ ] 观察是否自动请求并加载上海的建筑数据

### 3. 建筑数据显示测试
选择城市后，应该看到以下建筑标记：

#### 北京建筑数据
- **消防队站** (红色图标):
  - 朝阳消防救援站 (116.4074,39.9042)
  - 海淀消防救援站 (116.3017,39.9590)
  - 西城消防救援站 (116.3683,39.9139)

- **专职队** (蓝色图标):
  - 丰台专职消防队 (116.3500,39.8704)
  - 石景山专职消防队 (116.2220,39.9063)

- **重点建筑** (黄色图标):
  - 王府井百货大楼 (116.4142,39.9097)
  - 国贸中心 (116.4551,39.9097)

#### 上海建筑数据
- **消防队站** (红色图标):
  - 黄浦消防救援站 (121.4944,31.2396)
  - 浦东消防救援站 (121.5057,31.2304)

- **专职队** (蓝色图标):
  - 徐汇专职消防队 (121.4520,31.2108)

- **重点建筑** (黄色图标):
  - 东方明珠电视塔 (121.4995,31.2397)
  - 上海中心大厦 (121.5057,31.2397)

### 4. 图标和信息窗口测试
- [ ] 验证不同类型建筑使用不同颜色的图标
- [ ] 点击建筑标记，检查是否显示信息窗口
- [ ] 验证信息窗口内容包括：
  - 建筑名称
  - 建筑类型描述
  - 地址信息

### 5. 建筑计数显示测试
- [ ] 检查界面是否显示各类型建筑的数量统计
- [ ] 验证计数是否与实际显示的标记数量一致

## 数据交互测试

### WPF与WebView2通信测试
1. **请求建筑数据**:
   - 检查控制台是否输出: "FullScreenExamWindow 请求建筑数据: {cityName}"
   
2. **接收建筑数据**:
   - 检查控制台是否输出: "FullScreenExamWindow 发送建筑数据: {JSON数据}"

3. **WebView处理数据**:
   - 检查浏览器控制台是否输出建筑数据加载日志

## 预期结果

✅ **成功标准**:
- 地图正常加载和显示
- 城市选择触发建筑数据请求
- 建筑标记正确显示在地图上
- 不同类型建筑使用不同图标
- 点击标记显示正确的信息窗口
- 建筑计数统计准确

❌ **失败情况**:
- 地图无法加载
- 城市选择无响应
- 建筑数据未显示
- 图标显示错误
- 信息窗口无法打开或内容错误

## 调试信息

### 控制台日志检查
- WPF应用程序控制台输出
- WebView2浏览器开发者工具控制台
- 网络请求状态

### 数据库检查
如需插入测试数据，执行：
```sql
-- 运行 insert_test_building_data.sql 脚本
```

## 测试完成标准

- [ ] 所有基础功能测试通过
- [ ] 数据交互正常
- [ ] 用户界面响应良好
- [ ] 无明显错误或异常

---

**测试日期**: 2024年12月19日  
**测试版本**: 地图集成功能 v1.0  
**测试状态**: 准备就绪