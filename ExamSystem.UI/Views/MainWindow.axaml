<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ExamSystem.UI.ViewModels"
        x:Class="ExamSystem.UI.Views.MainWindow"
        Title="åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ"
        Width="1200"
        Height="800"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Icon="/Assets/icon.ico">

    <Design.DataContext>
        <vm:MainViewModel/>
    </Design.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>

        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <Border Grid.Row="0" Background="#2196F3" BorderBrush="#1976D2" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- å·¦ä¾§æ ‡é¢˜ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                    <TextBlock Text="ðŸ“š" FontSize="24" Foreground="White" VerticalAlignment="Center"/>
                    <TextBlock Text="åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               VerticalAlignment="Center" 
                               Margin="10,0,0,0"/>
                    <TextBlock Text="{Binding CurrentPageTitle}" 
                               FontSize="16" 
                               Foreground="#E3F2FD" 
                               VerticalAlignment="Center" 
                               Margin="20,0,0,0"/>
                </StackPanel>

                <!-- å³ä¾§ç”¨æˆ·ä¿¡æ¯ -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                    <TextBlock Text="{Binding CurrentUserInfo}" 
                               Foreground="White" 
                               VerticalAlignment="Center" 
                               Margin="0,0,15,0"/>
                    
                    <Button Content="ä¿®æ”¹å¯†ç " 
                            Command="{Binding ChangePasswordCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="1"
                            BorderBrush="White"
                            Padding="10,5"
                            Margin="5,0"/>
                    
                    <Button Content="å…³äºŽ" 
                            Command="{Binding AboutCommand}"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="1"
                            BorderBrush="White"
                            Padding="10,5"
                            Margin="5,0"/>
                    
                    <Button Content="é€€å‡º" 
                            Command="{Binding LogoutCommand}"
                            Background="#F44336"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="10,5"
                            Margin="5,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦ä¾§å¯¼èˆªèœå• -->
            <Border Grid.Column="0" Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="0,0,1,0">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <!-- ä»ªè¡¨æ¿ -->
                        <Button Content="ðŸ“Š ä»ªè¡¨æ¿"
                                Command="{Binding NavigateToDashboardCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"/>

                        <!-- ç”¨æˆ·ç®¡ç† (ä»…ç®¡ç†å‘˜å¯è§) -->
                        <Button Content="ðŸ‘¥ ç”¨æˆ·ç®¡ç†"
                                Command="{Binding NavigateToUserManagementCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                IsVisible="{Binding IsAdmin}"/>

                        <!-- é¢˜åº“ç®¡ç† (ç®¡ç†å‘˜å’Œæ•™å¸ˆå¯è§) -->
                        <Button Content="ðŸ“ é¢˜åº“ç®¡ç†"
                                Command="{Binding NavigateToQuestionBankCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                IsVisible="{Binding IsTeacher}"/>

                        <!-- è¯•å·ç®¡ç† (ç®¡ç†å‘˜å’Œæ•™å¸ˆå¯è§) -->
                        <Button Content="ðŸ“„ è¯•å·ç®¡ç†"
                                Command="{Binding NavigateToExamPaperCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                IsVisible="{Binding IsTeacher}"/>

                        <!-- è€ƒè¯•ç®¡ç† (ç®¡ç†å‘˜å’Œæ•™å¸ˆå¯è§) -->
                        <Button Content="ðŸŽ¯ è€ƒè¯•ç®¡ç†"
                                Command="{Binding NavigateToExamManagementCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                IsVisible="{Binding IsTeacher}"/>

                        <!-- æˆç»©ç®¡ç† -->
                        <Button Content="ðŸ“ˆ æˆç»©ç®¡ç†"
                                Command="{Binding NavigateToGradeManagementCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"/>

                        <!-- æˆ‘çš„è€ƒè¯• (å­¦ç”Ÿå¯è§) -->
                        <Button Content="âœï¸ æˆ‘çš„è€ƒè¯•"
                                Command="{Binding NavigateToMyExamsCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                IsVisible="{Binding !IsTeacher}"/>

                        <!-- ç³»ç»Ÿè®¾ç½® (ä»…ç®¡ç†å‘˜å¯è§) -->
                        <Button Content="âš™ï¸ ç³»ç»Ÿè®¾ç½®"
                                Command="{Binding NavigateToSettingsCommand}"
                                Classes="nav-button"
                                HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left"
                                Padding="15,12"
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                IsVisible="{Binding IsAdmin}"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
            <Border Grid.Column="1" Background="White">
                <ContentControl Content="{Binding CurrentPageContent}"/>
            </Border>
        </Grid>

        <!-- åº•éƒ¨çŠ¶æ€æ  -->
        <Border Grid.Row="2" Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" 
                           Text="å°±ç»ª" 
                           VerticalAlignment="Center" 
                           Margin="10,0"
                           FontSize="12"
                           Foreground="#6C757D"/>

                <TextBlock Grid.Column="1" 
                           Text="{Binding CurrentDateTime}" 
                           VerticalAlignment="Center" 
                           Margin="10,0"
                           FontSize="12"
                           Foreground="#6C757D"/>
            </Grid>
        </Border>
    </Grid>

    <Window.Styles>
        <Style Selector="Button.nav-button:pointerover">
            <Setter Property="Background" Value="#E3F2FD"/>
        </Style>
        
        <Style Selector="Button.nav-button:pressed">
            <Setter Property="Background" Value="#BBDEFB"/>
        </Style>
    </Window.Styles>
</Window>